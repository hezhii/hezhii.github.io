<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[CA è¯ä¹¦]]></title>
    <url>%2F2017%2F11%2Fcertification%2F</url>
    <content type="text"><![CDATA[CA è¯ä¹¦æ˜¯ç”± CA æœºæ„é¢å‘çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­åŒ…å«äº†å…¬é’¥å’Œå…¬é’¥æŒæœ‰è€…çš„ä¿¡æ¯ï¼Œå®ƒå°±åƒæ˜¯ä¸€å¼ èº«ä»½è¯ï¼Œå¯ä»¥ç”¨æ¥æ ¸å¯¹è¯ä¹¦æŒæœ‰è€…çš„èº«ä»½ä¿¡æ¯ã€‚ è¯ä¹¦å†…å®¹CA è¯ä¹¦æ˜¯ç»ç”± CA æœºæ„è¿›è¡Œæ•°å­—ç­¾åè¿‡çš„ï¼ŒåŒ…å«å…¬é’¥ã€å…¬é’¥æ‹¥æœ‰è€…ï¼ˆå³ç”³è¯·è€…ï¼‰ä¿¡æ¯ã€ç­¾å‘è€…ä¿¡æ¯ã€æœ‰æ•ˆæœŸç­‰ä¿¡æ¯çš„æ–‡ä»¶ã€‚åœ¨ Mac ç”µè„‘ä¸Šçš„ é’¥åŒ™ä¸²è®¿é—® ä¸­å¯ä»¥çœ‹åˆ°ç”µè„‘ä¸­çš„è¯ä¹¦ä¿¡æ¯ï¼Œè¯ä¹¦éƒ¨åˆ†å†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯ä¹¦ä¸­åŒ…å«äº†å¾ˆå¤šçš„ä¿¡æ¯ï¼Œç›®å‰æ•°å­—è¯ä¹¦çš„æ ¼å¼éµå¾ª X.509 æ ‡å‡†ã€‚ éªŒè¯è¯ä¹¦åœ¨ HTTPS é€šä¿¡ä¸­ï¼ŒæœåŠ¡å™¨å°†éå¯¹ç§°åŠ å¯†çš„å…¬é’¥æ”¾ç½®åœ¨è¯ä¹¦ä¸­ï¼Œç„¶åå°†è¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°è¯ä¹¦åéªŒè¯è¯ä¹¦ï¼Œå¦‚æœéªŒè¯é€šè¿‡å°±å¯ä»¥ç¡®è®¤å…¬é’¥æ¥è‡ªäºæœåŠ¡å™¨ã€‚é‚£ä¹ˆï¼Œå®¢æˆ·ç«¯å¦‚ä½•éªŒè¯è¯ä¹¦å‘¢ï¼Ÿè¯ä¹¦åˆæ˜¯å¦‚ä½•é˜²ä¼ªçš„å‘¢ï¼Ÿ è¯ä¹¦çš„éªŒè¯å’Œé˜²ä¼ªéœ€è¦ç”¨åˆ°è¯ä¹¦ä¸­æä¾›äº†ä¸¤ä¸ªä¿¡æ¯ï¼šç­¾å‘è€…ä½¿ç”¨çš„ç­¾åç®—æ³•ã€æŒ‡çº¹ï¼ˆç­¾åï¼‰ï¼Œå…¶ä¸­ç­¾åç®—æ³•æ˜¯è¯ä¹¦ç­¾å‘æœºæ„å¯¹è¯ä¹¦è¿›è¡Œç­¾åæ—¶æ‰€é‡‡ç”¨çš„ç®—æ³•ã€‚å½“å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘é€è¿‡æ¥çš„è¯ä¹¦åï¼Œå…ˆå¯¹è¯ä¹¦ä¸­çš„å†…å®¹ï¼ˆè¯ä¹¦å†…å®¹æ˜¯æ˜æ–‡ï¼‰è¿›è¡Œæ£€æŸ¥ï¼Œä¾‹å¦‚ï¼šè¯ä¹¦æ˜¯å¦åœ¨è¿‡æœŸã€å…¬é’¥æ‰€æœ‰è€… url ä¸å½“å‰æœåŠ¡å™¨åŸŸåæ˜¯å¦å¯¹åº”ç­‰ã€‚æ¥ç€ï¼Œä¸ºäº†é˜²æ­¢å…¶ä»–äººä»¿é€ è¯ä¹¦ï¼ˆä¾‹å¦‚ï¼šå°†è¯ä¹¦ä¸­çš„å…¬é’¥å’Œ url æ›¿æ¢æˆè‡ªå·±çš„ï¼‰ï¼Œè¿˜éœ€è¦éªŒè¯è¯ä¹¦çš„æŒ‡çº¹ã€‚é€šè¿‡è¯ä¹¦ä¸­æä¾›çš„ç­¾åç®—æ³•ï¼Œç”Ÿæˆè¯ä¹¦å†…å®¹çš„ä¿¡æ¯æ‘˜è¦ï¼Œæ ¹æ®æ‘˜è¦ç®—æ³•çš„ç‰¹æ€§ï¼Œå¦‚æœè¯ä¹¦å†…å®¹è¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆç”Ÿæˆçš„æ‘˜è¦ä¿¡æ¯è‚¯å®šå°±ä¸ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå¦‚æœå…¶ä»–äººåœ¨æ›¿æ¢è¯ä¹¦å†…å®¹åï¼Œæ ¹æ®æ–°çš„å†…å®¹é‡æ–°ç”Ÿæˆä¿¡æ¯æ‘˜è¦è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ å› æ­¤ï¼Œä¸èƒ½åªæ˜¯å°†è¯ä¹¦å†…å®¹çš„ä¿¡æ¯æ‘˜è¦ä½œä¸ºæŒ‡çº¹ï¼Œè€Œæ˜¯ä½¿ç”¨ CA æœºæ„çš„ç§é’¥å¯¹ä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œå°†åŠ å¯†åçš„å†…å®¹ä½œä¸ºæŒ‡çº¹ã€‚å®¢æˆ·ç«¯åœ¨éªŒè¯æ—¶ï¼Œä½¿ç”¨ CA æœºæ„æä¾›çš„å…¬é’¥è§£å¯†æŒ‡çº¹ï¼Œç„¶åå°†è§£å¯†åçš„ä¿¡æ¯æ‘˜è¦ä¸è‡ªå·±æ ¹æ®è¯ä¹¦å†…å®¹ç”Ÿæˆçš„ä¿¡æ¯æ‘˜è¦è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œåˆ™è¯´æ˜è¯ä¹¦æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœå…¶ä»–äººä¿®æ”¹äº†è¯ä¹¦å†…å®¹å¹¶é‡æ–°ç”Ÿæˆäº†ä¿¡æ¯æ‘˜è¦ï¼Œç”±äºæ²¡æœ‰ CA æœºæ„çš„ç§é’¥ï¼Œæ ¹æœ¬æ— æ³•ç”Ÿæˆå¯ä»¥è¢« CA æœºæ„çš„å…¬é’¥è§£å¯†å‡ºæ¥çš„æŒ‡çº¹ï¼Œå°±èƒ½æœ‰æ•ˆåœ°é˜²æ­¢è¯ä¹¦è¢«ç¯¡æ”¹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•ç¡®ä¿ CA çš„å…¬é’¥æ˜¯çœŸå®å¯ä¿¡çš„å‘¢ï¼Ÿæ˜¾ç„¶é€šè¿‡ç½‘ç»œä¼ è¾“æ˜¯æ— æ³•ç¡®ä¿çš„ã€‚äº‹å®ä¸Šï¼Œåœ¨æ“ä½œç³»ç»Ÿï¼ˆæˆ–æµè§ˆå™¨ï¼‰ä¸­å·²ç»å†…ç½®äº†ä¸–ç•Œä¸Šå…¬è®¤å¯ä¿¡çš„ CA è¯ä¹¦ï¼Œè¯¥è¯ä¹¦ä¸­åŒ…å«äº†å…¬é’¥ã€‚è¿™æ ·çš„æœºæ„ä¸ä¼šå¾ˆå¤šï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥åšåˆ°å†…ç½®ã€‚ ä¿¡ä»»é“¾æ‰€è°“ä¿¡ä»»é“¾å°±æ˜¯è¯´ï¼šA ä¿¡ä»» Bï¼Œè€Œ B ä¿¡ä»» Cï¼Œæ‰€ä»¥ A ä¹Ÿä¿¡ä»» Cã€‚äº‹å®ä¸Šï¼Œç³»ç»Ÿä¸­å¹¶æ²¡æœ‰å†…ç½®ä¸–ç•Œä¸Šæ‰€æœ‰ CA æœºæ„çš„è¯ä¹¦ï¼Œåªæ˜¯å†…ç½®äº†é¡¶çº§ CA æœºæ„çš„è¯ä¹¦ï¼Œè€Œå…¶ä»–æœºæ„åˆ™é€šè¿‡ä¿¡ä»»é“¾çš„æ–¹å¼è¿›è¡Œè¯ä¹¦çš„é¢å‘ã€‚å‡è®¾ A æ˜¯é¡¶çº§ CAï¼Œç³»ç»Ÿä¸­å†…ç½®è¯¥æœºæ„çš„è¯ä¹¦ã€‚B æ˜¯ A çš„å­æœºæ„ï¼ŒA ç»™ B é¢å‘äº† CA è¯ä¹¦ï¼ŒB ç»™ C é¢å‘äº† CA è¯ä¹¦ï¼Œå®¢æˆ·ç«¯éªŒè¯ C çš„è¯ä¹¦çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š æŒ‰ç…§ä¸Šæ–‡æåˆ°äº†è¯ä¹¦éªŒè¯æ–¹å¼ï¼Œæ£€æŸ¥ C çš„è¯ä¹¦ã€‚ ç”±äº C çš„è¯ä¹¦æ˜¯ç”± B é¢å‘çš„ï¼Œå› æ­¤éœ€è¦å…ˆè·å– B çš„è¯ä¹¦ï¼Œç„¶åä½¿ç”¨ B çš„è¯ä¹¦ä¸­çš„å…¬é’¥è§£å¯†æŒ‡çº¹å¹¶å¯¹æ¯”ä¿¡æ¯æ‘˜è¦ã€‚ ä¸ºäº†ä¿è¯ B çš„å…¬é’¥çœŸå®å¯é ï¼Œéœ€è¦éªŒè¯ B çš„è¯ä¹¦ï¼Œè€Œ B çš„è¯ä¹¦æ˜¯ç”± A é¢å‘çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ A çš„å…¬é’¥è§£å¯†æŒ‡çº¹å¹¶å¯¹æ¯”ä¿¡æ¯æ‘˜è¦ã€‚ A çš„å…¬é’¥å†…ç½®åœ¨ç³»ç»Ÿä¸­ï¼Œè®¤ä¸ºæ˜¯çœŸå®æœ‰æ•ˆåœ°ã€‚ é€šè¿‡è¿™ç§ä¿¡ä»»é“¾çš„æœºåˆ¶ï¼Œå°±èƒ½å®Œæˆå¯¹è¯ä¹¦çš„è®¤è¯ã€‚å¯è§ï¼Œè¿™é‡Œçš„å…³é”®ä¹‹å¤„åœ¨äºé¡¶çº§ CA è¯ä¹¦ï¼Œè¿™ç±»è¯ä¹¦é€šå¸¸ç³»ç»Ÿå†…ç½®ï¼Œä¸–ç•Œå…¬è®¤å¯ä¿¡ã€‚æ‰€ä»¥ï¼Œä¸è¦è‡ªå·±æ‰‹è´±ä¹±æ·»åŠ è¯ä¹¦å•Š~~~]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Web é€šä¿¡</category>
      </categories>
      <tags>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘ç†è§£çš„ HTTPS]]></title>
    <url>%2F2017%2F11%2Fhttps%2F</url>
    <content type="text"><![CDATA[HTTPS æ˜¯ HTTP çš„å®‰å…¨ç‰ˆï¼Œåœ¨ HTTP ä¸‹å¢åŠ äº† SSL å±‚ï¼Œå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œäº†åŠ å¯†ï¼Œä½¿å¾—é€šä¿¡æ›´åŠ çš„å®‰å…¨ã€‚ä½†æ˜¯ï¼Œå› ä¸º HTTPS éœ€è¦å»ºç«‹æ›´å¤šçš„é€šä¿¡ï¼Œå¹¶ä¸”æ•°æ®åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­éœ€è¦è¿›è¡ŒåŠ å¯†ã€è§£å¯†ï¼Œæ‰€ä»¥ç½‘ç«™è®¿é—®é€Ÿåº¦è¦æ¯” HTTP æ…¢ã€‚ ä»¥å‰æˆ‘å¯¹äº HTTPS çš„äº†è§£ä»…é™äºæ­¤ï¼ŒçŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚å‰æ®µæ—¶é—´åœ¨å·¥ä½œä¸­éœ€è¦éƒ¨ç½² HTTPSï¼Œè¶ç€è¿™æ¬¡æœºä¼šæ›´åŠ å…¨é¢çš„äº†è§£äº† HTTPSï¼Œç°é€šè¿‡è¿™ç¯‡åšå®¢è°ˆè°ˆæˆ‘å¯¹äº HTTPS çš„ä¸€ç‚¹ç†è§£ã€‚ åŠ å¯†ç®—æ³•HTTPS åè®®ä¸‹ä¼ è¾“çš„æ•°æ®éƒ½è¿›è¡Œäº†åŠ å¯†ï¼Œå› æ­¤åœ¨äº†è§£ HTTPS ä¹‹å‰éœ€è¦å…ˆäº†è§£ä¸€ä¸‹åŠ å¯†ç®—æ³•ã€‚ åŠ å¯†ç®—æ³•æœ‰å¾ˆå¤šï¼Œä¸»è¦å¯ä»¥åˆ†ä¸ºå¯¹ç§°åŠ å¯†ç®—æ³•ã€éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚å¯¹ç§°åŠ å¯†é€šè¿‡åŠ å¯†ç®—æ³•å’Œå¯†é’¥å¯¹åŸå§‹æ•°æ®è¿›è¡ŒåŠ å¯†å¾—åˆ°å¯†æ–‡ï¼Œå¦‚æœæƒ³è¦è·å¾—åŸå§‹æ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨åŠ å¯†æ—¶ä½¿ç”¨çš„å¯†é’¥åŠç®—æ³•çš„é€†ç®—æ³•å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†ï¼Œåœ¨å¯¹ç§°åŠ å¯†ç®—æ³•åªä½¿ç”¨ä¸€ä¸ªå¯†é’¥ï¼Œå¦‚ï¼šDES ç®—æ³•ï¼›éå¯¹ç§°æœºå¯†ä¸å¯¹ç§°åŠ å¯†ä¸åŒä¹‹å¤„åœ¨äºï¼Œéå¯¹ç§°åŠ å¯†è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨ä¸¤ä¸ªå¯†é’¥ï¼Œè¿™ä¸¤ä¸ªå¯†é’¥è¢«ç§°ä¸ºå…¬é’¥å’Œç§é’¥ï¼Œå…¬é’¥åŠ å¯†åçš„æ•°æ®åªèƒ½ä½¿ç”¨ç§é’¥è§£å¯†ï¼Œè€Œç§é’¥åŠ å¯†åçš„æ•°æ®åªèƒ½ä½¿ç”¨å…¬é’¥è§£å¯†ï¼Œè¾ƒä¹‹å¯¹ç§°åŠ å¯†å…·æœ‰æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå¦‚ï¼šRSA ç®—æ³•ã€‚ é™¤äº†å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç±»åŠ å¯†ç®—æ³•å«åš Hash ç®—æ³•ã€‚ å“ˆå¸Œç®—æ³•å°†ä»»æ„é•¿åº¦çš„äºŒè¿›åˆ¶å€¼æ˜ å°„ä¸ºè¾ƒçŸ­çš„å›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å€¼ï¼Œè¿™ä¸ªå°çš„äºŒè¿›åˆ¶å€¼ç§°ä¸ºå“ˆå¸Œå€¼ã€‚å“ˆå¸Œå€¼æ˜¯ä¸€æ®µæ•°æ®å”¯ä¸€ä¸”æå…¶ç´§å‡‘çš„æ•°å€¼è¡¨ç¤ºå½¢å¼ã€‚å¦‚æœæ•£åˆ—ä¸€æ®µæ˜æ–‡è€Œä¸”å“ªæ€•åªæ›´æ”¹è¯¥æ®µè½çš„ä¸€ä¸ªå­—æ¯ï¼Œéšåçš„å“ˆå¸Œéƒ½å°†äº§ç”Ÿä¸åŒçš„å€¼ã€‚è¦æ‰¾åˆ°æ•£åˆ—ä¸ºåŒä¸€ä¸ªå€¼çš„ä¸¤ä¸ªä¸åŒçš„è¾“å…¥ï¼Œåœ¨è®¡ç®—ä¸Šæ˜¯ä¸å¯èƒ½çš„ï¼Œæ‰€ä»¥æ•°æ®çš„å“ˆå¸Œå€¼å¯ä»¥æ£€éªŒæ•°æ®çš„å®Œæ•´æ€§ã€‚ä¸€èˆ¬ç”¨äºå¿«é€ŸæŸ¥æ‰¾å’ŒåŠ å¯†ç®—æ³•ã€‚ ç™¾åº¦ç™¾ç§‘å“ˆå¸Œç®—æ³• Hash ç®—æ³• æ˜¯ä¸å¯é€†ç®—æ³•ï¼Œä¸å¯é€†æŒ‡æ— æ³•ï¼ˆå¹¶ä¸æ˜¯å®Œå…¨æ²¡æœ‰åŠæ³•ï¼Œåªæ˜¯éš¾åº¦å¾ˆé«˜ï¼‰æ ¹æ®å¯†æ–‡å¾—åˆ°åŸå§‹æ•°æ®ã€‚åŒæ—¶ï¼Œå³ä½¿åŸå§‹æ•°æ®å‘ç”Ÿä¸€ç‚¹å˜åŒ–ï¼Œé€šè¿‡ Hash ç®—æ³•å¾—åˆ°çš„ Hash å€¼ä¹Ÿå°†ä¸åŒï¼Œå› æ­¤ Hash ç®—æ³•é€šå¸¸ç”¨æ¥ç”Ÿæˆä¿¡æ¯æ‘˜è¦æˆ–ç­¾åï¼Œå¦‚ï¼šMD5 ç®—æ³•ã€‚ HTTPS çš„åŸç†æˆ‘ä»¬éƒ½çŸ¥é“ HTTP åè®®æ˜¯æ˜æ–‡ä¼ é€’æ•°æ®çš„ï¼Œè¿™å°±å¯¼è‡´äº†åœ¨æ•°æ®ä¼ é€’çš„è¿‡ç¨‹ä¸­å¦‚æœè¢«ç¬¬ä¸‰æ–¹æˆªè·ï¼Œé‚£ä¹ˆé€šä¿¡å†…å®¹å¯¹äºç¬¬ä¸‰æ–¹å°±æ˜¯å®Œå…¨é€æ˜çš„ã€‚å› æ­¤ï¼Œå¦‚æœè¦ä¿è¯é€šä¿¡çš„å®‰å…¨ï¼Œæœ€å…ˆæƒ³åˆ°çš„å°±æ˜¯å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·å³ä½¿è¢«ç¬¬ä¸‰æ–¹æˆªè·ï¼Œä»–ä¹Ÿæ— æ³•å¾—çŸ¥é€šä¿¡çš„åŸå§‹å†…å®¹ã€‚ æ ¹æ®ä¸Šæ–‡æåˆ°çš„åŠ å¯†ç®—æ³•ï¼Œå¦‚æœè¦åŠ å¯†æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨å¯¹ç§°åŠ å¯†æˆ–è€…éå¯¹ç§°åŠ å¯†ã€‚å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„åŒºåˆ«åœ¨äºï¼Œå¯¹ç§°åŠ å¯†ä¸­åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„å¯†é’¥ï¼Œè€Œéå¯¹ç§°åŠ å¯†ä¸­ä½¿ç”¨çš„æ˜¯å…¬é’¥å’Œç§é’¥ï¼Œå› æ­¤ éå¯¹ç§°åŠ å¯†è¦æ¯”å¯¹ç§°åŠ å¯†æ›´åŠ å®‰å…¨ï¼Œä¸è¿‡åœ¨æ‰§è¡Œæ•ˆç‡ä¸Šï¼Œå¯¹ç§°åŠ å¯†æ¯”éå¯¹ç§°åŠ å¯†çš„æ•ˆç‡è¦é«˜å¾—å¤šï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®è¾ƒå¤§æ—¶ï¼Œå¦‚æœä½¿ç”¨éå¯¹ç§°åŠ å¯†ä¼šå¾ˆæ…¢ã€‚å› æ­¤ï¼Œå¯¹äºæ•°æ®çš„åŠ å¯†ï¼Œåº”è¯¥ä½¿ç”¨å¯¹ç§°åŠ å¯†ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†æ—¶å´å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ é€šä¿¡åŒæ–¹æ— æ³•å®‰å…¨çš„è¿›è¡Œå¯†é’¥äº¤æ¢ï¼Œå› ä¸ºåœ¨å¯†é’¥çš„ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½å¯†é’¥ä¼šè¢«ç¬¬ä¸‰æ–¹æ‰€æˆªè·ï¼Œä¸€æ—¦å¯†é’¥è¢«æˆªè·ï¼Œé‚£ä¹ˆä¼ è¾“çš„å¯†æ–‡å°±å¯ä»¥è¢«ç¬¬ä¸‰æ–¹è§£å¯†å‡ºæ¥ï¼Œä¸§å¤±å®‰å…¨æ€§ã€‚å› æ­¤å¯¹ç§°åŠ å¯†çš„å¯†é’¥ä¸èƒ½é€šè¿‡æ˜æ–‡ä¼ è¾“ï¼Œå¿…é¡»ä¹Ÿè¦ç»è¿‡åŠ å¯†ã€‚ é‚£ä¹ˆåº”è¯¥å¦‚ä½•åŠ å¯†å¯¹ç§°åŠ å¯†æ—¶ä½¿ç”¨çš„å¯†é’¥å‘¢ï¼Ÿå¦‚æœä»ç„¶ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼Œé‚£ä¹ˆå°±è¿›å…¥åˆ°äº†ä¸€ä¸ªæ­»å¾ªç¯çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œå°±è½®åˆ°éå¯¹ç§°åŠ å¯†ç™»åœºäº†ã€‚éå¯¹ç§°åŠ å¯†è§£å†³äº†å¯¹ç§°åŠ å¯†ä¸­çš„å¯†é’¥ä¼ è¾“é—®é¢˜ï¼Œå®ƒä½¿ç”¨äº†ä¸¤ä¸ªå¯†é’¥ï¼Œå…¶ä¸­å…¬é’¥é€šå¸¸ç”¨æ¥åˆ†å‘ï¼Œè€Œç§é’¥åˆ™è‡ªå·±ä¿ç•™ã€‚åœ¨å»ºç«‹å®‰å…¨é€šä¿¡æ—¶ï¼Œç”±é€šä¿¡çš„ä¸€æ–¹ï¼ˆä»¥ä¸‹ç§°ä¸ºâ€œç”²æ–¹â€ï¼‰ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œç„¶åå°†å…¬é’¥ä¼ è¾“ç»™å¦ä¸€æ–¹ï¼ˆä»¥ä¸‹ç§°ä¸ºâ€œä¹™æ–¹â€ï¼‰ï¼Œå…¶ä¸­å…¬é’¥é‡‡ç”¨æ˜æ–‡ä¼ è¾“çš„æ–¹å¼ã€‚ä¹™æ–¹åœ¨æ”¶åˆ°ç”²æ–¹ä¼ é€’è¿‡æ¥çš„å…¬é’¥åï¼Œç”Ÿæˆå¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†å¹¶å°†åŠ å¯†åçš„å¯†æ–‡è¿”å›ç»™ç”²æ–¹ã€‚ç”²æ–¹åœ¨æ”¶åˆ°åŒ…å«å¯¹ç§°åŠ å¯†å¯†é’¥çš„å¯†æ–‡åï¼Œä½¿ç”¨è‡ªå·±ä¿ç•™çš„ç§é’¥è¿›è¡Œè§£å¯†å³å¯è·å¾—å¯†é’¥ã€‚æ­¤åï¼ŒåŒæ–¹å°±èƒ½ä½¿ç”¨å¯¹ç§°åŠ å¯†çš„å¯†é’¥è¿›è¡Œå®‰å…¨çš„é€šä¿¡äº†ã€‚ åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­ï¼Œå³ä½¿åŒ…å«å¯¹ç§°åŠ å¯†å¯†é’¥çš„å¯†æ–‡è¢«ç¬¬ä¸‰æ–¹æˆªè·ï¼Œç¬¬ä¸‰æ–¹å› ä¸ºæ²¡æœ‰ç§é’¥ï¼Œæ‰€ä»¥æ— æ³•è§£å¯†å¯†æ–‡è·å–å¯¹ç§°åŠ å¯†çš„å¯†é’¥ã€‚è¿™ä¸€è¿‡ç¨‹çœ‹ä¼¼æ²¡æœ‰é—®é¢˜ï¼Œå®åˆ™ä¸ç„¶ã€‚åœ¨ç”²æ–¹ä¼ é€’å…¬é’¥ç»™ä¹™æ–¹çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœç¬¬ä¸‰æ–¹æˆªè·äº†å…¬é’¥ï¼Œå¹¶è‡ªå·±ç”Ÿæˆäº†æ–°çš„å…¬é’¥å’Œç§é’¥ï¼Œç„¶åæŠŠè‡ªå·±çš„å…¬é’¥ä¼ é€’ç»™ä¹™æ–¹ï¼Œä¹™æ–¹åœ¨æ”¶åˆ°ç¬¬ä¸‰æ–¹çš„å…¬é’¥åï¼ˆä¹™æ–¹ä¸çŸ¥æƒ…ï¼Œä»–ä»¥ä¸ºå…¬é’¥æ˜¯ç”²æ–¹ç»™ä»–çš„ï¼‰ï¼Œç”Ÿæˆå¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åç”¨å…¬é’¥åŠ å¯†ï¼Œå¹¶è¿”å›ç»™ç”²æ–¹ï¼Œè¿™ä¸€è¿‡ç¨‹åˆè¢«ç¬¬ä¸‰æ–¹æ‰€æˆªè·ï¼Œå› ä¸ºå…¬é’¥æ˜¯è‡ªå·±çš„ï¼Œæ‰€ä»¥ç¬¬ä¸‰æ–¹å¯ä»¥ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¹¶è·å–å¯¹ç§°åŠ å¯†çš„å¯†é’¥ã€‚æ¥ç€ï¼Œç¬¬ä¸‰æ–¹ç”¨ä¹‹å‰æˆªè·çš„ç”²æ–¹çš„å…¬é’¥ï¼Œå¯¹å¯¹ç§°åŠ å¯†çš„å¯†é’¥è¿›è¡ŒåŠ å¯†å¹¶è¿”å›ç»™ç”²æ–¹ï¼Œå› ä¸ºå…¬é’¥æ˜¯ç”²æ–¹çš„ï¼Œæ‰€ä»¥ç”²æ–¹å¯ä»¥æˆåŠŸç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å¹¶è·å¾—å¯†é’¥ã€‚è¿™æ ·ï¼Œåœ¨ç”²ä¹™åŒæ–¹ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰æ–¹å·²ç»æˆåŠŸçš„è·å–åˆ°äº†åŒæ–¹é€šä¿¡æ—¶æ‰€ä½¿ç”¨çš„å¯†é’¥äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¹™æ–¹åœ¨æ”¶åˆ°å…¬é’¥åï¼Œå¦‚ä½•ç¡®ä¿è¿™ä¸ªå…¬é’¥æ˜¯ç”²æ–¹ç»™ä»–çš„å‘¢ï¼Ÿ è¿™ä¸ªé—®é¢˜å°±å¥½æ¯”æ˜¯æœ‰ä¸€å¤©ä¸€ä¸ªäººè·‘è¿‡æ¥å’Œä½ è¯´ä»–æ˜¯é©¬äº‘ï¼Œä»–å‡ºæ¥ç©æ²¡å¸¦é’±ï¼Œå¦‚æœä½ ç»™ä»– 100 å—é’±æ‰“è½¦å›å®¶ï¼Œä»–å›å»åç»™ä½  1 ä¸ªäº¿ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œä½ å¦‚ä½•èƒ½çŸ¥é“ä»–å°±æ˜¯é©¬äº‘å‘¢ï¼Ÿèº«ä»½è¯æ‹¿å‡ºæ¥çœ‹çœ‹ï¼è¿™åŸºæœ¬æ˜¯è„±å£è€Œå‡ºçš„å›ç­”ã€‚é‚£ä¹ˆè¦è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œç”²æ–¹åœ¨å‘é€å…¬é’¥ç»™ä¹™æ–¹æ—¶ï¼Œå°±è¿˜éœ€è¦æŠŠè‡ªå·±çš„èº«ä»½è¯ç»™ä¹™æ–¹çœ‹çœ‹ã€‚é‚£ç”²æ–¹è¿™ä¸ªèº«ä»½è¯å¦‚ä½•æ¥çš„å‘¢ï¼Ÿå¦‚ä½•èƒ½ç¡®ä¿èº«ä»½è¯æ˜¯ä¸æ˜¯çœŸçš„å‘¢ï¼Ÿä»ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç­”æ¡ˆã€‚äººæ°‘å¸ç”±ä¸­å›½é“¶è¡Œå‘è¡Œï¼Œæ‰€æœ‰äººéƒ½æ‰¿è®¤äººæ°‘å¸æ˜¯æœ‰æ•ˆåœ°ï¼Œå¹¶ä¸”äººæ°‘å¸æœ‰ç‰¹æ®Šçš„åˆ¶é€ å·¥è‰ºï¼Œå…·å¤‡é˜²ä¼ªæ ‡è¯†ã€‚ è‡³æ­¤ï¼Œæ˜¾ç„¶åªé€šè¿‡ç”²ä¹™åŒæ–¹æ˜¯æ— æ³•å»ºç«‹å®‰å…¨é€šä¿¡çš„ï¼Œéœ€è¦ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æƒå¨æœºæ„ä»‹å…¥ï¼Œè¿™ä¸ªæƒå¨æœºæ„è¢«ç§°ä¸º CAï¼ˆCertificate Authorityï¼‰ï¼Œåœ¨ç”²æ–¹ç”³è¯·åï¼ŒCA æœºæ„ç»™ç”²æ–¹é¢å‘â€œèº«ä»½è¯â€ï¼Œç”²æ–¹åœ¨å‘é€å…¬é’¥æ—¶è¿åŒè‡ªå·±çš„â€œèº«ä»½è¯â€ä¸€èµ·å‘é€ç»™ä¹™æ–¹ï¼Œä¹™æ–¹é€šè¿‡æ ¸å®â€œèº«ä»½è¯â€æ¥ç¡®è®¤å…¬é’¥æ˜¯å¦æ¥è‡ªç”²æ–¹ã€‚é‚£ä¹ˆä¹™æ–¹å¦‚ä½•æ ¸å®â€œèº«ä»½è¯â€ï¼Œå¹¶ä¸”å¦‚ä½•ç¡®ä¿â€œèº«ä»½è¯â€ä¸ä¼šè¢«ä¼ªé€ å‘¢ï¼Ÿè¿™å°±éœ€è¦ä¸€ç§åªæœ‰ CA èƒ½äº§å‡ºï¼Œå¹¶ä¸”æ‰€æœ‰ä¹™æ–¹éƒ½èƒ½è¯†åˆ«çš„æœºåˆ¶ï¼Œè€Œéå¯¹ç§°åŠ å¯†æ­£å¥½å°±æ»¡è¶³è¿™ç§ä¸€å¯¹å¤šçš„æœºåˆ¶ã€‚CA æœºæ„é€šè¿‡è‡ªå·±çš„ç§é’¥å¯¹â€œèº«ä»½è¯â€è¿›è¡ŒåŠ å¯†ç”Ÿæˆå¯†æ–‡ï¼Œå…¶ä¸­â€œèº«ä»½è¯â€è¢«ç§°ä¸º æ•°å­—è¯ä¹¦ï¼Œè€Œå¯†æ–‡åˆ™è¢«ç§°ä¸º æ•°å­—ç­¾åï¼Œç„¶åå°†ç­¾åé™„åŠ åˆ°è¯ä¹¦ä¸­ï¼ˆç­¾åœ¨åº•éƒ¨ï¼‰ï¼Œæœ€åå°†ç»è¿‡ç­¾ååçš„è¯ä¹¦é¢å‘ç»™ç”²æ–¹ã€‚äºæ˜¯ï¼Œç”²æ–¹åœ¨å‘é€å…¬é’¥æ—¶ï¼Œè¿åŒè¯ä¹¦ä¸€èµ·å‘é€ç»™ä¹™æ–¹ï¼Œä¹™æ–¹åœ¨æ”¶åˆ°åï¼Œä½¿ç”¨ CA æœºæ„çš„å…¬é’¥è§£å¯†ç­¾åï¼Œå¯¹æ¯”ç­¾åçš„å†…å®¹å’Œè¯ä¹¦å†…å®¹æ˜¯å¦ç›¸åŒå³å¯éªŒè¯ç”²æ–¹èº«ä»½ã€‚é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œä¹™æ–¹å¦‚ä½•çŸ¥é“ CA æœºæ„çš„å…¬é’¥å‘¢ï¼Ÿæ˜¾ç„¶å¦‚æœç»§ç»­é€šè¿‡ç½‘ç»œä¼ è¾“çš„æ–¹å¼è·å–ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½æ°¸è¿œéƒ½æ— æ³•è§£å†³ï¼Œè€Œè€ƒè™‘åˆ°è¿™æ ·çš„æƒå¨æœºæ„å¯èƒ½åªéœ€è¦ä¸€ä¸ªå°±å¤Ÿäº†ï¼Œå®Œå…¨å¯ä»¥è®©ä¹™æ–¹ä¸€å¼€å§‹å°±ä¿ç•™ç€è¯¥å…¬é’¥ï¼Œä¾‹å¦‚ï¼šæµè§ˆå™¨å†…ç½® CA æœºæ„çš„å…¬é’¥ã€‚é€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼Œç”²ä¹™ä¸¤æ–¹å°±èƒ½å»ºç«‹å®‰å…¨çš„é€šä¿¡äº†ã€‚å…·ä½“å…³äº CA è¯ä¹¦çš„ä»‹ç»ä»¥åŠå®ƒæ˜¯å¦‚ä½•è¯æ˜å…¬é’¥æ²¡æœ‰è¢«ç¯¡æ”¹çš„ï¼Œè§æˆ‘å¦å¤–ä¸€ç¯‡åšå®¢ã€‚ HTTPS é€šä¿¡è¿‡ç¨‹å‰é¢åœ¨äº†è§£äº† HTTPS çš„åŸç†ä¹‹åï¼Œå†æ¥è¯´è¯´ HTTPS çš„å…·ä½“é€šä¿¡è¿‡ç¨‹ï¼ŒHTTPS é€šä¿¡çš„è¿‡ç¨‹åŸºæœ¬å°±æ˜¯åŸç†ä¸­æåˆ°çš„å‡ ä¸ªæ­¥éª¤ï¼Œå…·ä½“å¦‚ä¸‹ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ Say Helloï¼ŒåŒ…å«æ”¯æŒçš„ SSL åè®®ç‰ˆæœ¬ã€åŠ å¯†ç®—æ³•ã€å¯†é’¥é•¿åº¦ç­‰ä¿¡æ¯ã€‚ æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯ä¿¡æ¯å‘é€ Server Hello æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­åŒ…å«ç¡®å®šçš„åŠ å¯†ç®—æ³•ã€å¯†é’¥é•¿åº¦ç­‰ä¿¡æ¯ã€‚ æœåŠ¡ç«¯å‘é€è¯ä¹¦ç»™å®¢æˆ·ç«¯ã€‚ æœ€åæœåŠ¡å™¨å‘é€ Server Hello Done æŠ¥æ–‡é€šçŸ¥å®¢æˆ·ç«¯ï¼Œæœ€åˆé˜¶æ®µçš„SSLæ¡æ‰‹åå•†éƒ¨åˆ†ç»“æŸã€‚ å®¢æˆ·ç«¯æ”¶åˆ°è¯ä¹¦åï¼ŒéªŒè¯è¯ä¹¦çš„æœ‰æ•ˆæ€§ã€‚å¦‚æœè¯ä¹¦æ— æ•ˆï¼Œåœ¨æµè§ˆå™¨ä¸Šä¼šæç¤ºï¼›å¦‚æœéªŒè¯æœ‰æ•ˆï¼Œå‘é€ Client Key Exchange æŠ¥æ–‡ç»™æœåŠ¡ç«¯ï¼ŒæŠ¥æ–‡ä¸­åŒ…å«è¢«ç§°ä¸º Pre-master secret çš„éšæœºç ï¼Œè¯¥éšæœºç é€šè¿‡æœåŠ¡ç«¯è¯ä¹¦ä¸­çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ã€‚ æ¥ç€å®¢æˆ·ç«¯ç»§ç»­å‘é€ Change Cipher Spec æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡ä¼šæç¤ºæœåŠ¡å™¨ï¼Œåœ¨æ­¤æŠ¥æ–‡ä¹‹åçš„é€šä¿¡ä¼šä½¿ç”¨ Pre-master secret å¯†é’¥åŠ å¯†ã€‚ å®¢æˆ·ç«¯å‘é€ Finished æŠ¥æ–‡ã€‚è¯¥æŠ¥æ–‡åŒ…å«è¿æ¥è‡³ä»Šå…¨éƒ¨æŠ¥æ–‡çš„æ•´ä½“æ ¡éªŒå€¼ã€‚å¦‚æœæœåŠ¡å™¨èƒ½è§£å¯†å‡ºæ¥ï¼Œåˆ™æ¡æ‰‹æˆåŠŸã€‚ æœåŠ¡ç«¯æ”¶åˆ° Finished æŠ¥æ–‡å¹¶æˆåŠŸè§£å¯†åï¼ŒåŒæ ·å‘é€ Change Cipher Spec æŠ¥æ–‡å’Œ Finished æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ã€‚ æˆåŠŸå»ºç«‹å®‰å…¨è¿æ¥ï¼Œè¿›è¡Œ HTTP é€šä¿¡ï¼Œåº•å±‚é€šè¿‡ SSL åŠ å¯†ã€‚ é€šä¿¡ç»“æŸï¼Œå‘é€æŠ¥æ–‡å…³é—­è¿æ¥ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Web é€šä¿¡</category>
      </categories>
      <tags>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº gulp-istanbul æ— æ³•è§£æ async/await çš„é—®é¢˜]]></title>
    <url>%2F2017%2F11%2Fgulp-istanbul-es6%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ï¼Œåœ¨ä½¿ç”¨ Gulp æ‰§è¡Œ Mocha å•å…ƒæµ‹è¯•å¹¶ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šæ—¶æ‰§è¡Œä¸€ç›´å‡ºé”™ï¼Œå‡ºé”™çš„åŸå› æ˜¯å› ä¸ºä»£ç è§£ææ—¶å‡ºç°ä¸èƒ½è¯†åˆ«çš„ä»£ç ã€‚è¿™ç¯‡åšå®¢è®°å½•äº†é—®é¢˜çš„åŸå› åŠæˆ‘æœ€åé€‰æ‹©çš„å¤„ç†åŠæ³•ã€‚ ç°è±¡æˆ‘ä½¿ç”¨ gulp-mocha å’Œ gulp-istanbul æ’ä»¶æ‰§è¡Œå•å…ƒæµ‹è¯•å¹¶ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼Œå¯¹åº” gulpfile.js ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415const istanbul = require('gulp-istanbul');const mocha = require('gulp-mocha');gulp.task('pre-test', function () &#123; return gulp.src(['src/**/*.js']) .pipe(istanbul()) .pipe(istanbul.hookRequire());&#125;);gulp.task('test', ['pre-test'], function () &#123; return gulp.src(['test/unit/**/*.test.js']) .pipe(mocha()) .pipe(istanbul.writeReports()) .pipe(istanbul.enforceThresholds(&#123; thresholds: &#123; global: 90 &#125; &#125;));&#125;); ä¸Šé¢çš„å†…å®¹æ˜¯ gulp-istanbul æ’ä»¶æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ç”¨æ³•ï¼Œç„¶è€Œåœ¨æ‰§è¡Œæ—¶å´å‡ºé”™äº†ï¼Œä¸»è¦çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå‡ºé”™çš„åŸå› æ˜¯å‡ºç°äº†æ— æ³•è§£æçš„å­—ç¬¦ï¼Œåœ¨æŸ¥çœ‹äº†å¯¹åº”äº†ä»£ç åå‘ç°æ— æ³•è§£æçš„æ˜¯ async/awaitã€‚ åŸå› åœ¨å‘ç° gulp-istanbul æ— æ³•è§£æ async/await ä¹‹åï¼Œæˆ‘é€šè¿‡ Google æŸ¥æ‰¾äº†ç›¸å…³èµ„æ–™ï¼Œæœ€ååœ¨ istanbul çš„ä¸€ä¸ª issue ä¸­æ‰¾åˆ°äº†é—®é¢˜çš„åŸå› æ‰€åœ¨ï¼šgulp-istanbul ä¾èµ–äº† istanbulï¼Œè€Œæœ€æ–°ç‰ˆæœ¬çš„ istanbul æ— æ³•è§£æ async/awaitï¼Œéœ€è¦å°† istanbul å‡çº§åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¯¦æƒ…æˆ³è¿™é‡Œã€‚ æˆ‘é€šè¿‡ npm i -D istanbul@next å‘½ä»¤å°† istanbul å‡çº§åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œç„¶åå•ç‹¬çš„ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼Œå‘ç°ç¡®å®å¯ä»¥æˆåŠŸè§£æ async/awaitã€‚ç„¶è€Œï¼Œgulp-istanbul æ’ä»¶ä¾èµ–çš„æ˜¯ istanbul æœ€æ–°å‘å¸ƒçš„ç¨³å®šç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬å¹¶ä¸èƒ½è§£æ async/awaitã€‚ äºæ­¤åŒæ—¶ï¼Œæˆ‘åœ¨ gulp-istanbul çš„ issue ä¸­ä¹Ÿå‘ç°äº†æœ‰äººæå‡ºäº†åŒæ ·çš„é—®é¢˜ã€‚ä½œè€…åœ¨ issue ä¸­æŒ‡å‡ºäº†ç¨³å®šç‰ˆçš„ istanbul ä¸æ”¯æŒ ES6ï¼Œéœ€è¦æä¾›ä¸€ä¸ªæ’è£…å™¨ã€‚ä½†æ˜¯ï¼Œæˆ‘æŒ‰ç…§æ–‡æ¡£çš„ç¤ºä¾‹æ·»åŠ æ’è£…å™¨åï¼Œä»ç„¶æ— æ³•è§£å†³è¯¥é—®é¢˜ã€‚è¯¥ issue çš„æå‡ºè€…ä¹Ÿè¡¨ç¤ºäº†è¯¥æ–¹æ³•å¹¶ä¸èƒ½èµ·ä½œç”¨ï¼Œå¹¶å¸Œæœ› gulp-istanbul çš„ä½œè€…æ›´æ–°ä¾èµ–çš„ istanbul åˆ°ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œç„¶è€Œä½œè€…è¡¨ç¤ºæ²¡æœ‰æ—¶é—´å»æ”¯æŒä¸€ä¸ªä¸ç¨³å®šçš„ç‰ˆæœ¬ï¼Œå¾ˆä¹æ„æ¥å— PRã€‚ğŸ˜‚ ğŸ˜‚ ğŸ˜‚ åˆ°è¿™é‡Œï¼Œæˆ‘æ„è¯†åˆ°ç›®å‰æƒ³è¦ç›´æ¥é€šè¿‡ gulp-istanbul æ’ä»¶ç”Ÿæˆä»£ç è¦†ç›–ç‡æœ‰ç‚¹å›°éš¾ã€‚ è§£å†³åŠæ³•æˆ‘æ³¨æ„åˆ° istanbul å·²ç»å‡çº§åˆ°äº† 2.0 ç‰ˆæœ¬å¹¶ä¸”ç”±ä¸€ä¸ªæ–°çš„å›¢é˜Ÿè´Ÿè´£å¼€å‘ï¼Œåç§°ä¹Ÿæ”¹æˆäº† nycã€‚å®ƒæ”¯æŒ await/nycï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œæˆ‘å¹¶æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„ gulp æ’ä»¶ï¼Œæ‰€ä»¥æœ€ç»ˆæˆ‘æ‰“ç®—åœ¨ task ä¸­ç®€å•åœ°æ‰§è¡Œ Node è„šæœ¬å‘½ä»¤æ¥æ‰§è¡Œ Mocha å¹¶ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€‚ æ ¹æ® Gulp API æ–‡æ¡£å¯çŸ¥ï¼Œgulp.task(name[, deps], fn) æ–¹æ³•å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªä»»åŠ¡åŠä»»åŠ¡å¯¹åº”çš„åŠ¨ä½œï¼Œæ‰§è¡ŒæŸä¸ªä»»åŠ¡å°±æ˜¯æ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ã€‚åŒæ—¶ï¼Œè¯¥æ–¹æ³•æ”¯æŒå¼‚æ­¥æ“ä½œå¹¶æä¾›äº†å¤šç§æ–¹æ³•ï¼š æ¥å—ä¸€ä¸ª callback å‚æ•°ï¼Œå½“ task ç»“æŸæ—¶è°ƒç”¨è¯¥æ–¹æ³•å³å¯ï¼Œç±»ä¼¼äº Mocha ä¸­çš„ done()ã€‚ è¿”å›ä¸€ä¸ª streamï¼Œstream å¯ä»¥è¢« pipe() åˆ°å…¶ä»–æ’ä»¶ä¸­ã€‚ è¿”å›ä¸€ä¸ª promiseã€‚ å› æ­¤ï¼Œæˆ‘åªç”¨æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­è¿è¡Œ mocha å’Œ nycï¼Œç„¶åå¯¹è¿è¡Œçš„ç»“æœè¿›è¡Œä¸€ä¸ªåŒ…è£…å³å¯ï¼Œè¯¦æƒ…æˆ³è¿™é‡Œã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Gulp</tag>
        <tag>Istanbul</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gulp åˆä½“éªŒ]]></title>
    <url>%2F2017%2F11%2Fglup%2F</url>
    <content type="text"><![CDATA[Gulp.js æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å®ƒåœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ‰§è¡Œå¸¸è§ä»»åŠ¡ã€‚Gulp.js æ˜¯åŸºäº Node.js æ„å»ºçš„ï¼Œåˆ©ç”¨ Node.js æµçš„å¨åŠ›ï¼Œä½ å¯ä»¥å¿«é€Ÿæ„å»ºé¡¹ç›®å¹¶å‡å°‘é¢‘ç¹çš„ IO æ“ä½œã€‚Gulp.js æºæ–‡ä»¶å’Œä½ ç”¨æ¥å®šä¹‰ä»»åŠ¡çš„ Gulp æ–‡ä»¶éƒ½æ˜¯é€šè¿‡ JavaScriptï¼ˆæˆ–è€… CoffeeScript ï¼‰æºç æ¥å®ç°çš„ã€‚ å®‰è£…å…¨å±€å®‰è£…1$ npm i -g gulp é¡¹ç›®ä¾èµ–1$ npm i -D gulp å¼€å§‹ä½¿ç”¨åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º gulpfile.js æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ API ä»¥åŠå„ç±»æ’ä»¶å®šä¹‰æ‰€éœ€çš„è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚ Gulp çš„ API ååˆ†ç®€å•ï¼Œåªæœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š gulp.src: è½½å…¥èµ„æº gulp.dest: è¾“å‡ºæ•°æ® gulp.task: å®šä¹‰ä»»åŠ¡ gulp.watch: ç›‘è§†æ–‡ä»¶ä¿®æ”¹ åœ¨å®šä¹‰å¥½äº†è‡ªåŠ¨åŒ–æ„å»ºçš„ä»»åŠ¡ä¹‹åï¼Œæ‰§è¡Œ gulp å°†ä¼šè¿è¡Œé»˜è®¤çš„åä¸º default çš„ä»»åŠ¡ã€‚å¦‚æœæƒ³è¦è¿è¡Œç‰¹å®šçš„ä»»åŠ¡ï¼Œåœ¨å‘½ä»¤åé¢æ·»åŠ ç›¸åº”ä»»åŠ¡çš„åç§°å³å¯ï¼Œgulp &lt;task&gt; &lt;othertask&gt;ã€‚ å®šä¹‰è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸‹é¢è®°å½•æˆ‘åœ¨ä¸€ä¸ª Node.js é¡¹ç›®ä¸­åˆæ¬¡ä½¿ç”¨ Gulp çš„ç»å†ï¼Œé€šè¿‡ Gulp æˆ‘ä¸»è¦æƒ³å®Œæˆä»£ç å®¡æŸ¥ã€æ‰§è¡Œå•å…ƒæµ‹è¯•ã€æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥ã€æ‰“åŒ…è¿™ä¸€è‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ã€‚ ESlinté¦–å…ˆå®‰è£… ESlint æ’ä»¶ã€‚ 1$ npm i -D gulp-eslint ç„¶åå°†æ–‡æ¡£ä¸­ä»‹ç»çš„ç”¨æ³•ç›´æ¥å¤åˆ¶åˆ° gulpfile.js ä¸­ï¼Œæ­¤æ—¶ gulpfile.js çš„å†…å®¹å¦‚ä¸‹ï¼š 12345678910111213const gulp = require('gulp');const eslint = require('gulp-eslint');gulp.task('lint', () =&gt; &#123; return gulp.src(['**/*.js', '!node_modules/**']) .pipe(eslint()) .pipe(eslint.format()) .pipe(eslint.failAfterError());&#125;);gulp.task('default', ['lint'], function () &#123; // This will only run if the lint task is successful...&#125;); å®šä¹‰å¥½äº† lint ä»»åŠ¡åï¼Œç›´æ¥è¿è¡Œ gulp å‘½ä»¤ï¼Œæ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š ä¸ºäº†æµ‹è¯•æ˜¯å¦çœŸçš„èµ·ä½œç”¨ï¼Œæˆ‘æ•…æ„æ·»åŠ ä¸€ä¸ªå®¡æŸ¥é”™è¯¯çš„ä»£ç ï¼Œå‡ºé”™æ—¶è¾“å‡ºå¦‚ä¸‹ï¼š Mochaé¦–å…ˆå®‰è£… Mocha æ’ä»¶ã€‚ 1$ npm i -D gulp-mocha å®šä¹‰å¦‚ä¸‹ä»»åŠ¡ï¼Œå¹¶æ·»åŠ åˆ°é»˜è®¤ä»»åŠ¡ä¸­ã€‚ 1234567891011121314151617gulp.task('test', function () &#123; process.env.NODE_ENV = 'test'; return gulp.src('test/unit/**/*.test.js') .pipe(mocha(&#123; reporter: 'nyan', timeout: 5000, globals: &#123; should: require('should') &#125; &#125;)) .once('error', () =&gt; &#123; process.exit(1); &#125;) .once('end', () =&gt; &#123; process.exit(); &#125;);&#125;); Mocha å…·ä½“æ”¯æŒå“ªäº›å‚æ•°è§å®˜ç½‘æ–‡æ¡£ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨æµ‹è¯•æ‰§è¡Œå®Œæˆåæ‰‹åŠ¨çš„è°ƒç”¨ process.exit() ç»“æŸè¿›ç¨‹ï¼Œå¦åˆ™ä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚å‚è€ƒ gulp-mocha æ–‡æ¡£ä¸­çš„æè¿°ã€‚ åŒæ—¶ï¼Œåœ¨ä¸€å¼€å§‹çš„æ—¶å€™æˆ‘çš„æµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡ï¼Œæœ€åå‘ç°æ˜¯å› ä¸º NODE_ENV æ²¡æœ‰æŒ‡å®šå¯¼è‡´ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„è®¾ç½® NODE_ENVã€‚ ä»£ç è¦†ç›–ç‡åœ¨è¿™ä¸€éƒ¨åˆ†é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œé—®é¢˜çš„ä¸»è¦åŸå› æ˜¯å› ä¸ºæˆ‘åœ¨ä»£ç ä¸­ä½¿ç”¨äº† async/awaitï¼Œå…³äºè¿™ä¸ªé—®é¢˜çš„è¯¦ç»†è¯´æ˜è¯·ç‚¹è¿™é‡Œã€‚æ­¤å¤„ï¼Œåªåˆ—å‡ºæœ€ç»ˆè§£å†³å gulpfile ä¸­çš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415/** * æ‰§è¡Œå•å…ƒæµ‹è¯•å¹¶ç”Ÿæˆä»£ç è¦†ç›–ç‡æŠ¥å‘Š */gulp.task('test', () =&gt; _exec('npm test'));/** * ä»£ç è¦†ç›–ç‡ */gulp.task('coverage', ['test'], () =&gt; _exec('npm run coverage'));function _exec (command, args = [], options = &#123;shell: true, stdio: 'inherit'&#125;) &#123; return new Promise((resolve, reject) =&gt; spawn(normalize(command), args, options) .on('close', code =&gt; code ? reject(new Error(`$&#123;command&#125;: $&#123;code&#125;`)) : resolve()) );&#125; ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰§è¡Œæµ‹è¯•ä»¥åŠä»£ç è¦†ç›–ç‡æ£€æŸ¥æ—¶æˆ‘å¹¶æ²¡æœ‰ä½¿ç”¨ gulp æ’ä»¶ï¼Œè€Œæ˜¯æ‰§è¡Œäº†ç›¸åº”çš„è„šæœ¬ï¼Œpackage.json ä¸­å¯¹åº”çš„è„šæœ¬å¦‚ä¸‹ï¼š 123456"scripts": &#123; "dev": "NODE_ENV=development DEBUG=host2.0:* node index.js", "lint": "eslint ./ || exit 0", "test": "NODE_ENV=test nyc --reporter=html --reporter=text mocha -R nyan --recursive ./test/unit", "coverage": "nyc check-coverage --lines 90 --functions 100 --branches 100" &#125;, æ‰“åŒ…ä»£ç å®¡æŸ¥åŠæµ‹è¯•é€šè¿‡åéœ€è¦æ‰“åŒ…ä¾¿äºå‘å¸ƒï¼Œæ‰“åŒ…ä»£ç ä½¿ç”¨çš„æ˜¯ gulp-zip æ’ä»¶ï¼Œé¦–å…ˆå®‰è£…æ’ä»¶ï¼š 1$ npm i -D gulp-zip ç„¶åå† gulpfile ä¸­æ·»åŠ ä¸‹é¢å†…å®¹ï¼š 123456789101112131415/** * æ‰“åŒ… */gulp.task('pack', ['coverage'], () =&gt; gulp.src(['src/**', 'index.js', 'package.json', 'package-lock.json', 'README.md', '.nvmrc'], &#123;base: '.'&#125;) .pipe(zip('archive-' + getVersion() + '.zip')) .pipe(gulp.dest('./')));/** * è·å–ç‰ˆæœ¬å· */function getVersion () &#123; return JSON.parse(fs.readFileSync('./package.json', 'utf8')).version;&#125; è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸€æ˜¯è·å–ç‰ˆæœ¬å·æ—¶ç›´æ¥è¯»å–çš„ json æ–‡ä»¶è€Œä¸æ˜¯ä½¿ç”¨ requireï¼Œè¿™æ˜¯å› ä¸º require ä¼šç¼“å­˜å¤šæ¬¡è°ƒç”¨ï¼Œè¿™ä¼šå¯¼è‡´ç‰ˆæœ¬å·ä¸ä¼šè¢«æ›´æ–°æ‰ï¼›äºŒæ˜¯åœ¨ä½¿ç”¨ gulp-zip æ‰“åŒ…æ—¶ï¼Œå¦‚æœå¸Œæœ›æ‰“åŒ…åçš„æ–‡ä»¶åœ¨è§£å‹åä¾æ—§ä¿ç•™é¡¶çº§ç›®å½•ï¼Œéœ€è¦åœ¨è°ƒç”¨ gulp.src è½½å…¥èµ„æºæ—¶ï¼Œæ·»åŠ  base å‚æ•°ï¼Œå‚çœ‹ issueã€‚ æ€»ç»“Gulp åˆæ¬¡ä½“éªŒä¸‹æ¥æ„Ÿè§‰å¾ˆåˆæˆ‘çš„èƒƒå£ï¼Œç›®å‰åªæ˜¯ç®€å•åœ°ä½¿ç”¨å¹¶æ²¡æœ‰å¤ªå¤šæ·±å…¥çš„ç ”ç©¶ï¼Œä¸»è¦æ˜¯åœ¨ç”¨æ³•ä¸Šæ„Ÿè§‰å¾ˆèˆ’æœã€‚å®šä¹‰ä¸€ä¸ªä¸ªçš„ä»»åŠ¡ï¼Œç„¶åé€šè¿‡ä»»åŠ¡çš„å„ç§ç»„åˆæ¥å®Œæˆä¸åŒçš„è‡ªåŠ¨åŒ–æµç¨‹ï¼Œæˆ‘æ„Ÿè§‰çœ‹ç€æ¯” Grunt è¦æ¸…æ™°ï¼Œä¸è¿‡å¯èƒ½æ˜¯å› ä¸ºæˆ‘çœ‹åˆ° Grunt çš„é…ç½®åŠŸèƒ½æ›´å¤æ‚çš„åŸå› å¯¼è‡´çš„ã€‚åœ¨ä»Šåï¼Œä¼šå°è¯•ä½¿ç”¨ Gulp æ¥å®Œæˆæ›´åŠ å¤æ‚çš„æ„å»ºå·¥ä½œï¼Œæˆ‘ç›¸ä¿¡å®ƒä¼šç»™æˆ‘å¸¦æ¥æ›´å¤šçš„æƒŠå–œã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Gulp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Node.js å•å…ƒæµ‹è¯•]]></title>
    <url>%2F2017%2F10%2Fnodejs-unit%2F</url>
    <content type="text"><![CDATA[ä»¥å‰å†™ Java ç¨‹åºçš„æ—¶å€™ä¼šä½¿ç”¨ JUnit å†™ä¸€äº›å•å…ƒæµ‹è¯•ï¼Œä¸€æ–¹é¢æµ‹è¯•ä»£ç æ˜¯å¦å­˜åœ¨ bugï¼Œå¦ä¸€æ–¹é¢åœ¨æ—¥åä¿®æ”¹ä»£ç åé‡æ–°è·‘ä¸€è¾¹æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚æœèƒ½å…¨éƒ¨é€šè¿‡ä¹Ÿå¯ä»¥æ”¹å¾—æ”¾å¿ƒã€‚ç°åœ¨æ¥æ‰‹äº†ä¸€äº› Node.js çš„å¼€å‘å·¥ä½œï¼Œå•å…ƒæµ‹è¯•åŒæ ·ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ã€‚ ç”¨åˆ°çš„åº“ç›®å‰åœ¨è¿›è¡Œ Node.js å•å…ƒæµ‹è¯•çš„å·¥ä½œä¸­ï¼Œä¸»è¦ç”¨åˆ°äº†ä¸‹é¢çš„ä¸€äº›æŠ€æœ¯ï¼š Mochaï¼šMocha (æˆ‘å–œæ¬¢å«â€æŠ¹èŒ¶â€ï¼‰æ˜¯ä¸€ä¸ªåŠŸèƒ½ååˆ†ä¸°å¯Œçš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œåœ¨æµè§ˆå™¨å’Œ Node.js ç¯å¢ƒä¸­éƒ½å¯ä»¥è¿è¡Œã€‚ Chaiï¼šChai æ˜¯ä¸€ä¸ªæ–­è¨€åº“ï¼Œå®ƒæä¾›äº†å¤§é‡çš„æ–­è¨€å¸®åŠ©æˆ‘ä»¬æ›´åŠ è½»æ¾çš„æµ‹è¯•ä»£ç ã€‚ Sinonï¼šSinon.js æ˜¯ä¸€ä¸ªæµ‹è¯•å·¥å…·ï¼Œå®ƒæä¾›äº† spyï¼Œstubï¼Œmock ç­‰åŠŸèƒ½å¸®åŠ©æˆ‘ä»¬ç›‘æµ‹å‡½æ•°çš„è¿è¡Œæƒ…å†µæˆ–è€…è½»æ¾åœ°åˆ›å»ºä¸€ä¸ªå‡½æ•°æ›¿ä»£å“ç­‰ã€‚ Shouldï¼šBDD é£æ ¼çš„æ–­è¨€åº“ã€‚ Istanbulï¼šIstanbul æ˜¯ä¸€ä¸ªç»Ÿè®¡ä»£ç è¦†ç›–ç‡çš„å·¥å…·ã€‚ è¿™é‡Œå°±ä¸å¯¹ä»¥ä¸Šæ¡†æ¶æˆ–åº“è¿›è¡Œè¯¦ç»†çš„è¯´æ˜äº†ï¼Œåœ¨å®ƒä»¬çš„å®˜ç½‘ä¸Šæœ‰è¯¦ç»†çš„ä»‹ç»å’Œæ–‡æ¡£ã€‚ åŸºæœ¬ä½¿ç”¨æˆ‘ä»¬å¯ä»¥åœ¨ Mocha å®˜è®¿æ–‡æ¡£ä¸Šçœ‹åˆ°è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œä¸€ä¸ª Mocha ç»“åˆ Chai ç¼–å†™çš„æµ‹è¯•å·®ä¸å¤šé•¿è¿™æ ·ï¼š 1234567891011121314151617181920212223242526272829303132333435describe('æ•°æ®åº“æ“ä½œæµ‹è¯•', function() &#123; describe('åŒæ­¥æ•°æ®åº“è¡¨', function() &#123; it('åº”è¯¥è¿”å›ä¸€ä¸ªå¯¹è±¡', function(done) &#123; // å¼‚æ­¥ callback å†™æ³• models.sequelize.sync().then(function(result) &#123; // expect é£æ ¼æ–­è¨€ï¼Œç»“æœéœ€è¦è¢« expect() åŒ…è£¹èµ·æ¥ expect(result).to.be.an('object'); done(); &#125;); &#125;); &#125;); describe('æ·»åŠ ä¸»æœºä¿¡æ¯', function() &#123; it('è¿”å›ä¸€ä¸ª model å®ä¾‹', function() &#123; // å¼‚æ­¥ Promise å†™æ³• return models.Info.create(&#123; ID: 'unit_test', NAME: 'unit_test' &#125;).then(function(model) &#123; expect(model).to.be.an('object'); expect(model.get('ID')).to.equal('unit_test'); &#125;); &#125;); it('æ•°æ®åº“è¡¨ä¸­åº”è¯¥æœ‰è¯¥æ¡æ•°æ®', function() &#123; return models.Info.findOne(&#123; where: &#123; ID: 'unit_test', &#125; &#125;).then(function(model) &#123; expect(model.get('NAME')).to.equal('unit_test'); &#125;); &#125;); &#125;);&#125;); å…¶ä¸­ describe å®šä¹‰äº†ä¸€ç±»æµ‹è¯•ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªåˆ†ç»„ï¼Œå¯ä»¥äº’ç›¸åµŒå¥—ï¼›it åˆ™æ˜¯ä¸€ä¸ªæµ‹è¯•å•å…ƒï¼Œåœ¨é‡Œé¢ç¼–å†™å…·ä½“çš„æµ‹è¯•ä»£ç ã€‚æµ‹è¯•ä»£ç å°±æ˜¯æ‰§è¡Œæ­£å¼ä»£ç å¹¶å°†æ‰§è¡Œåçš„ç»“æœä¸æœŸæœ›çš„ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœéƒ½ç›¸åŒé‚£ä¹ˆæµ‹è¯•é€šè¿‡ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸åŒåˆ™æµ‹è¯•ä¸é€šè¿‡ã€‚ æ–­è¨€åº“ä½¿ç”¨çš„ Chai ï¼Œå®ƒæ”¯æŒå¤šç§é£æ ¼çš„æ–­è¨€ï¼Œä¸»è¦æ˜¯ expect å’Œ shouldï¼Œæˆ‘ç†è§£çš„åŒºåˆ«ä¸»è¦æœ‰ä¸‹é¢å‡ ç‚¹ï¼š expect é£æ ¼åªéœ€è¦å¼•å…¥ expect æ–¹æ³•ï¼Œè€Œ should éœ€è¦å¼•å…¥ should()ï¼Œæ–¹æ³•éœ€è¦æ‰§è¡Œã€‚ åœ¨å†™æ³•ä¸Šï¼Œshould æ¯” expect æ›´åŠ ç®€å•ï¼Œexpect(result).to.equal(1) ç­‰åŒäº result.should.equal(1)ã€‚ expect å°†ç»“æœè¿›è¡Œäº†ä¸€ä¸ªåŒ…è£…ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æµè§ˆå™¨å’Œ Node.js ä¸Šè¿è¡Œï¼›should æ‰©å±•äº†åŸå‹å¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ª getter ä½œä¸ºæ–­è¨€çš„å…¥å£ï¼Œä¸æ”¯æŒ IEã€‚ Sinonç›®å‰ä¸»è¦ç”¨åˆ°äº† Sinon æä¾›çš„ spy å’Œ stub æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä½¿æˆ‘ä»¬æ›´åŠ è½»æ¾åœ°è¾¾æˆæµ‹è¯•æ¡ä»¶ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬è¦æµ‹è¯•ä¸€ä¸ªéœ€è¦åˆ é™¤æ•°æ®åº“ä¸­çš„ä¸€æ¡æ•°æ®çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬å¹¶ä¸æƒ³çœŸçš„åˆ é™¤æ•°æ®åº“ä¸­çš„å†…å®¹ï¼Œå³ä½¿æ˜¯æµ‹è¯•åº“ã€‚è¿™æ—¶å°±è½®åˆ° stub ä¸Šåœºäº†ã€‚ stubå¯ä»¥ä¸ºæ•°æ®åº“æ“ä½œæä¾›ä¸€ä¸ªæ›¿èº«ï¼Œåœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­åŸæœ¬è¿›è¡Œæ•°æ®åº“æ“ä½œçš„æ–¹æ³•å¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œè€Œæ˜¯è°ƒç”¨äº†æ›¿èº«æ–¹æ³•å¹¶è®°å½•ä¸‹æ¥è°ƒç”¨ä¿¡æ¯ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥è®©æ›¿èº«æ–¹æ³•è¿”å›ä¸åŒçš„å€¼ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚spy çš„åŠŸèƒ½ä¸ stubç±»ä¼¼ï¼Œå®ƒä¹Ÿä¼šè®°å½•æ–¹æ³•çš„è°ƒç”¨ä¿¡æ¯ï¼Œä½†æ˜¯åŸæœ¬çš„æ–¹æ³•ä»ä¼šè¢«æ‰§è¡Œã€‚Sinon çš„ç”¨æ³•å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031const should = require('should');const sinon = require('sinon');const cacheControl = require('../../../src/middleware/cache-control');const sandbox = sinon.sandbox.create();describe('æµ‹è¯•ä¸­é—´ä»¶: cacheControl', function() &#123; let res; beforeEach(function() &#123; res = &#123; set: sandbox.spy() &#125;; &#125;); afterEach(function() &#123; sandbox.restore(); &#125;); it('æ­£ç¡®è®¾ç½® HTTP header', function(done) &#123; cacheControl('private')(null, res, function(args) &#123; should.not.exist(args); res.set.calledOnce.should.be.true(); res.set.calledWith(&#123; 'Cache-Control': 'no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0' &#125;).should.be.true(); done(); &#125;); &#125;);&#125;); è¯´æ˜ï¼š æˆ‘è¿™é‡Œä½¿ç”¨äº†å¦ä¸€ä¸ªæ–­è¨€åº“ shouldã€‚ æ— è®ºæ˜¯ spy è¿˜æ˜¯ stubï¼Œå¦‚æœä¸æ‰§è¡Œ restore æ–¹æ³•ï¼Œé‚£ä¹ˆä»–ä»¬çš„ç»Ÿè®¡ç»“æœå°†ä¼šä¸æ–­ç´¯ç§¯ã€‚ é€šè¿‡ sandbox æˆ‘ä»¬å¯ä»¥é›†ä¸­åœ°è¿›è¡Œ restoreã€‚åŒæ—¶ï¼Œåœ¨ mocha æä¾›çš„é’©å­æ–¹æ³•ä¸­è¿›è¡Œæ›´åŠ çˆ½æ­ªæ­ªã€‚ å¼•å…¥ä»£ç è¦†ç›–ç‡æ£€æµ‹æ‰§è¡Œ npm install istanbul --save-dev å®‰è£… Istanbulï¼Œå®‰è£…å®Œæˆä¸­åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç›¸åº”çš„å‘½ä»¤å³å¯ã€‚ ä½¿ç”¨ istanbul cover [file] å‘½ä»¤å³å¯ä»¥å¾—åˆ°ç›¸åº”æ–‡ä»¶çš„è¦†ç›–ç‡ï¼ŒåŒæ—¶è¿™æ¡å‘½ä»¤è¿˜ä¼šç”Ÿæˆä¸€ä¸ª coverage ç›®å½•ï¼ˆé»˜è®¤æ˜¯é¡¹ç›®æ ¹ç›®å½•ï¼Œå¯ä»¥é€šè¿‡å‚æ•°é…ç½®ï¼‰ï¼Œç›®å½•ä¸‹çš„ coverage.json æ–‡ä»¶åŒ…å«è¦†ç›–ç‡çš„åŸå§‹æ•°æ®ï¼Œè€Œæ‰“å¼€ lcov-report/index.html æ–‡ä»¶åˆ™å¯ä»¥é€šè¿‡æµè§ˆå™¨é¡µé¢çœ‹åˆ°æ›´åŠ ç›´è§‚åœ°è¦†ç›–ç‡æŠ¥å‘Šã€‚ å¾—åˆ°è¦†ç›–ç‡åï¼Œå¯ä»¥é€šè¿‡ istanbul check-coverage å‘½ä»¤è®¾ç½®æœŸæœ›è¾¾åˆ°çš„è¦†ç›–ç‡ï¼ŒåŒæ—¶æ£€æŸ¥å½“å‰ä»£ç æ˜¯å¦è¾¾æ ‡ã€‚ä¾‹å¦‚ï¼š 12$ istanbul check-coverage --statement 90 # è¯­å¥è¦†ç›–ç‡åº”è¾¾åˆ° 90%$ istanbul check-coverage --statement -80 --branch -90 --function 100 # 80% è¯­å¥è¦†ç›–ç‡ã€90% åˆ†æ”¯è¦†ç›–ç‡å’Œ 100% çš„å‡½æ•°è¦†ç›–ç‡ åœ¨ WebStorm ä¸­ä½¿ç”¨åœ¨ WebStorm ä¸­é€šè¿‡ç®€å•åœ°å‡ ä¸‹é…ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨ Mocha è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ é¦–å…ˆï¼Œåœ¨å·¥å…·æ ä¸Šé€‰æ‹© Run-&gt;Edit Configurations æˆ–è€…ä¸‹å›¾ä¸­çš„å…¥å£è¿›è¡Œåˆ° Run/Debug çš„é…ç½®é¡µé¢ã€‚ é…ç½®é¡µé¢å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€šè¿‡é¡¶éƒ¨çš„ + æŒ‰é’®æˆ‘ä»¬å¯ä»¥æ–°å»º Run/Debug é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©è¿è¡Œç¯å¢ƒä¸º Mochaã€‚ åœ¨å¯åŠ¨é¡¹çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬é…ç½®å¥½åç§°ã€Node.js ç›®å½•ã€Mocha åŒ…ç›®å½•ã€æµ‹è¯•æ–‡ä»¶è·¯å¾„å³å¯è¿è¡Œæµ‹è¯•ï¼Œæ³¨æ„å‹¾é€‰æµ‹è¯•è·¯å¾„ä¸‹é¢çš„ include subdirectories é€‰é¡¹ï¼Œè¿™æ ·æ‰ä¼šé€’å½’çš„æµ‹è¯•æ‰§è¡Œå­ç›®å½•ä¸­çš„å•å…ƒæµ‹è¯•æ–‡ä»¶ã€‚ é…ç½®å®Œæˆåï¼Œæˆ‘ä»¬ç‚¹å‡»çª—å£é¡¶éƒ¨çš„ Run æˆ–è€… Debug æŒ‰é’®å³å¯æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œæ‰§è¡Œçš„ç»“æœä¼šæ˜¾ç¤ºåœ¨æ ‡ç­¾é¡µå†…æ˜¾ç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ­¤æ—¶ï¼Œåœ¨ç¼–è¾‘åŒºå·¦ä¾§æ˜¾ç¤ºè¡Œæ•°çš„åœ°æ–¹ä¼šå‡ºç°ä¸€äº›å°æŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å¯ä»¥å•ç‹¬çš„æ‰§è¡Œç›¸åº”çš„æµ‹è¯•å•å…ƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå•ç‹¬çš„æ‰§è¡Œæµ‹è¯•å•å…ƒç›¸å½“äºä¼šæ–°å»ºä¸€ä¸ª Run/Debug é¡¹ï¼Œå¦‚æœåœ¨æ‰§è¡Œå•å…ƒæµ‹è¯•çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€äº›å‚æ•°ï¼Œåœ¨ Edit Configurations é¡µé¢çš„ Mocha é»˜è®¤é…ç½®ä¸­é…ç½®è¿è¡Œå‚æ•°å³å¯ã€‚è¿™æ ·ï¼Œæ‰§è¡Œæµ‹è¯•å•å…ƒæ—¶ä¹Ÿä¼šåº”ç”¨è¯¥é…ç½®ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Istanbul</tag>
        <tag>Mocha</tag>
        <tag>Chai</tag>
        <tag>Sinon</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Sequelize åŸºæœ¬ç”¨æ³•]]></title>
    <url>%2F2017%2F10%2Fsequelize-usage%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å·¥ä½œä¸­å¼€å§‹å†™ Node.js åº”ç”¨ï¼Œæ•°æ®åº“ä½¿ç”¨çš„ PostgreSQLï¼Œä¸ºäº†æ–¹ä¾¿æ•°æ®åº“æ“ä½œæ‰“ç®—ä½¿ç”¨ä¸€æ¬¾ ORM æ¡†æ¶ã€‚åœ¨ GitHub ä¸Šæ‰¾åˆ°äº† node-orm2 å’Œ sequelize ä¸¤æ¬¾ï¼Œæœ€ç»ˆå› ä¸º star æ•°å’Œæ›´åŠ å…¨é¢çš„æ–‡æ¡£é€‰æ‹©äº† sequelizeã€‚ç°é€šè¿‡è¿™ç¯‡åšå®¢è®°å½•ä¸‹ sequelize çš„ä¸€äº›åŸºæœ¬ç”¨æ³•ã€‚ ç®€å•ä»‹ç» Sequelize is a promise-based ORM for Node.js v4 and up. It supports the dialects PostgreSQL, MySQL, SQLite and MSSQL and features solid transaction support, relations, read replication and more. Seqeulize æ˜¯ Node.js ä¸Šçš„ä¸€ä¸ª ORM æ¡†æ¶ã€‚æ ¹æ®å®˜ç½‘ä¸Šçš„ä»‹ç»ï¼Œå¥¹æ”¯æŒå¤šç§æ•°æ®åº“ã€æ”¯æŒå†™åŸç”Ÿ SQLã€äº‹åŠ¡ã€å…³è”å…³ç³»ã€è¯»å¤åˆ¶ç­‰åŠŸèƒ½ã€‚ Sequelize ä½¿ç”¨ç®€å•ï¼Œæœ‰ååˆ†è¯¦ç»†çš„å®˜æ–¹æ–‡æ¡£ï¼Œåœ¨ GitHubä¸Šä¹Ÿæœ‰ä¸€ä¸ª express-example è¯´æ˜åœ¨ Express ä¸­çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚å¥¹åŸºäº Promiseï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå¼‚æ­¥å¤„ç†ã€‚ åŸºæœ¬ç”¨æ³•Sequelize çš„ç”¨æ³•åœ¨å®˜ç½‘ä¸Šæœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œåªè®°å½•ä¸‹æ¯”è¾ƒå¸¸ç”¨çš„å‡ ç‚¹åŸºæœ¬ç”¨æ³•ã€‚ å®‰è£…ç›´æ¥é€šè¿‡ NPM æˆ–è€… Yarn å®‰è£…å³å¯ï¼Œéœ€è¦åŒæ—¶å®‰è£…ç›¸åº”æ•°æ®åº“è¿æ¥çš„é©±åŠ¨ã€‚ 1234567891011121314151617// Using NPM$ npm install --save sequelize# And one of the following:$ npm install --save pg pg-hstore$ npm install --save mysql2$ npm install --save sqlite3$ npm install --save tedious // MSSQL// Using Yarn$ yarn add sequelize# And one of the following:$ yarn add pg pg-hstore$ yarn add mysql2$ yarn add sqlite3$ yarn add tedious // MSSQL å»ºç«‹è¿æ¥å»ºç«‹è¿æ¥å°±æ˜¯åˆå§‹åŒ–ä¸€ä¸ª Sequelize å¯¹è±¡ã€‚åœ¨åˆå§‹åŒ– Sequelize å®ä¾‹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œæ‰€ä»¥åœ¨å•çº¿ç¨‹æ¨¡å¼ä¸‹æœ€å¥½ä¸€ä¸ªæ•°æ®åº“ä¸‹æ–°å»ºä¸€ä¸ªå®ä¾‹ï¼›å¦‚æœæ˜¯å¤šçº¿ç¨‹æ¨¡å¼åˆ™éœ€è¦åœ¨åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼Œå¹¶ä¸”è®¾ç½®æ¯ä¸€ä¸ªè¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ä¸ºæ€»çš„æœ€å¤§è¿æ¥æ•°é™¤ä»¥çº¿ç¨‹ä¸ªæ•°ã€‚ Sequelize æ”¯æŒå¤šä¸ªåˆå§‹åŒ–å‚æ•°ï¼ŒåŒæ—¶æ”¯æŒå¤šç§å†™æ³•ï¼š 1234567891011121314151617// without password and optionsconst sequelize = new Sequelize('database', 'username')// without optionsconst sequelize = new Sequelize('database', 'username', 'password')// without password / with blank passwordconst sequelize = new Sequelize('database', 'username', null, &#123;&#125;)// with password and optionsconst sequelize = new Sequelize('my_database', 'john', 'doe', &#123;&#125;)// with database, username, and password in the options objectconst sequelize = new Sequelize(&#123; database, username, password &#125;);// with uriconst sequelize = new Sequelize('mysql://localhost:3306/database', &#123;&#125;) æˆ‘ä¹ æƒ¯é€šè¿‡ä¸€ä¸ªå¯¹è±¡ä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼Œè¿™æ ·ç›´æ¥ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å¹¶ä¼ å…¥å³å¯ï¼Œä¸éœ€è¦è¿‡å¤šçš„æ“ä½œã€‚ä¾‹å¦‚ï¼š 12345678910111213const sequelize = new Sequelize(&#123; host: 'localhost', database: 'test', port: 3432, dialect: 'postgres', // è¿æ¥çš„æ•°æ®åº“ç±»å‹ï¼Œmysql, postgres, sqlite and mssql username: 'test', password: 'test', pool: &#123; // è¿æ¥æ± é…ç½® max: 5, min: 0, idle: 10000 &#125;&#125;); å®šä¹‰æ¨¡å‹åœ¨åˆå§‹åŒ– Sequelize å¯¹è±¡çš„å®ä¾‹åï¼Œé€šè¿‡è°ƒç”¨å®ä¾‹å¯¹è±¡çš„ define æ–¹æ³•å¯ä»¥å®šä¹‰æ¨¡å‹ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516171819sequelize.define('modelName', &#123; columnA: &#123; type: Sequelize.BOOLEAN, validate: &#123; is: ["[a-z]",'i'], // will only allow letters max: 23, // only allow values &lt;= 23 isIn: &#123; args: [['en', 'zh']], msg: "Must be English or Chinese" &#125; &#125;, field: 'column_a' // Other attributes here &#125;, columnB: Sequelize.STRING, columnC: 'MY VERY OWN COLUMN TYPE'&#125;)sequelize.models.modelName; // The model will now be available in models under the name given to define define æ–¹æ³•æ”¯æŒä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šæ¨¡å‹åç§°ã€å±æ€§ã€å¯é€‰å‚æ•°ï¼Œå…·ä½“å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚åŒæ—¶ï¼ŒSequelize è¿˜æä¾›äº†ä¸€ä¸ª import æ–¹æ³•ï¼Œæ”¯æŒä»ä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥æ¨¡å‹ï¼Œå…·ä½“çš„å†™æ³•å¯ä»¥å‚è€ƒå®˜ç½‘æä¾›çš„ Demoã€‚ æ¯ä¸€ä¸ªæ¨¡å‹å¯¹åº”ä¸€å¼ æ•°æ®åº“è¡¨ï¼Œåˆå§‹åŒ–æ¨¡å‹æ—¶çš„æ¯ä¸€ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µã€‚å…¶ä¸­ï¼Œå­—æ®µæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šå­—æ®µç±»å‹ã€æ˜¯å¦ä¸ºä¸»é”®ã€æ˜¯å¦å”¯ä¸€ã€æ ¡éªŒç­‰ã€‚ å®šä¹‰å®Œæ¨¡å‹åï¼Œå³å¯é€šè¿‡ Sequelize å¯¹è±¡å®ä¾‹çš„ sync æ–¹æ³•åŒæ­¥æ¨¡å‹åˆ°æ•°æ®åº“è¡¨ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹å½“æ¨¡å‹å¯¹åº”çš„æ•°æ®è¡¨ä¸å­˜åœ¨æ—¶ï¼Œä¼šåˆ›å»ºå¯¹åº”çš„æ•°æ®åº“è¡¨ï¼Œå¯ä»¥é€šè¿‡ force å‚æ•°æ§åˆ¶ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨åˆ›å»ºæ•°æ®åº“è¡¨æ—¶ï¼ŒSequelize ä¼šä½¿ç”¨ &#39;modelName&#39; + &#39;s&#39; ä½œä¸ºè¡¨åç§°ï¼Œå¦‚æœæƒ³ä½¿ç”¨ modelName ä½œä¸ºè¡¨åï¼Œåœ¨å®šä¹‰æ¨¡å‹æ—¶è®¾ç½® freezeTableName å‚æ•°ä¸º true å³å¯ã€‚ CURDåœ¨å®šä¹‰æ¨¡å‹å¹¶åŒæ­¥æ¨¡å‹åˆ°æ•°æ®åº“è¡¨åï¼Œé€šè¿‡æ¨¡å‹çš„é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚ä¸‹é¢ä¸»è¦ä»‹ç»æœ€ä¸ºå¸¸è§çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ã€‚ æ·»åŠ æ•°æ®æ·»åŠ æ•°æ®ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªæ¨¡å‹å®ä¾‹ï¼Œç„¶åè°ƒç”¨å®ä¾‹çš„ save æ–¹æ³•ï¼›å¦ä¸€ç§åˆ™æ˜¯ç›´æ¥é€šè¿‡æ¨¡å‹çš„é™æ€ create æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718192021222324// æ–¹æ³•1ï¼šå…ˆåˆ›å»ºå®ä¾‹ï¼Œç„¶åè°ƒç”¨å®ä¾‹çš„ save æ–¹æ³•const user = User.build(&#123; 'emp_id': '1', 'nick': 'å°çº¢', 'department': 'æŠ€æœ¯éƒ¨'&#125;);user.save().then(function() &#123; // success&#125;).catch(function(err) &#123; // error&#125;);// æ–¹æ³•2ï¼šé€šè¿‡é™æ€ create æ–¹æ³•const user = User.create(&#123; 'emp_id': '2', 'nick': 'å°æ˜', 'department': 'æŠ€æœ¯éƒ¨'&#125;).then(function() &#123; // success&#125;).catch(function(err) &#123; // error&#125;); åˆ é™¤æ•°æ®ç›´æ¥è°ƒç”¨æ¨¡å‹çš„é™æ€æ–¹æ³• destroy å³å¯ï¼Œé€šè¿‡ options.where å¯ä»¥æŒ‡å®šæŸ¥è¯¢å‚æ•°ã€‚ä¾‹å¦‚ï¼š 123456789User.destroy(&#123; where: &#123; emp_id: '1', &#125;&#125;).then(function(count) &#123; // success&#125;).catch(function(err) &#123; // error&#125;); ä¿®æ”¹æ•°æ®ä¿®æ”¹æ•°æ®å¯ä»¥ç›´æ¥è°ƒç”¨é™æ€çš„ update æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸ¥è¯¢æ–¹æ³•è·å–åˆ°æ•°æ®å¯¹åº”çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åç›´æ¥ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæœ€åè°ƒç”¨ save æ–¹æ³•å†™å…¥åˆ°æ•°æ®åº“ä¸­ã€‚ä¾‹å¦‚ï¼š 12345678// æ–¹æ³•1ï¼šæ“ä½œå¯¹è±¡å±æ€§ï¼ˆä¸ä¼šæ“ä½œdbï¼‰ï¼Œè°ƒç”¨saveåæ“ä½œdbuser.nick = 'å°ç™½';user = yield user.save();// æ–¹æ³•2ï¼šç›´æ¥updateæ“ä½œdbuser = yield user.update(&#123; 'nick': 'å°ç™½ç™½'&#125;); æŸ¥è¯¢æ•°æ®æŸ¥è¯¢æ•°æ®ä¸»è¦é€šè¿‡æ¨¡å‹çš„é™æ€æ–¹æ³•ï¼Œæ¨¡å‹æä¾›äº†å¤šä¸ª API ä»¥æ»¡è¶³æŸ¥è¯¢éœ€æ±‚ã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718192021User.findAndCount(&#123; where: &#123; sex: 'å¥³' &#125;, order: [ ['emp_id', 'age'] ], limit: 10, offset: 0&#125;).then(function(result) &#123; // success const data = []; const total = result.count; result.rows.forEach(function(item) &#123; data.push(item.toJSON()); &#125;); logger.debug('æŸ¥è¯¢å®Œæˆï¼Œè€—æ—¶ %d msï¼ŒæŸ¥è¯¢åˆ° %d æ¡ç»“æœã€‚ç»“æœä¸ºï¼š %s', Date.now() - startTime, total, JSON.stringify(data));&#125;).catch(function(err) &#123; // error&#125;); äº‹åŠ¡åœ¨ Seqeulize ä¸­ä½¿ç”¨äº‹åŠ¡ä¸»è¦é€šè¿‡å¯¹è±¡å®ä¾‹çš„ transaction æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ª Transaction å¯¹è±¡å®ä¾‹ï¼Œæ¥ç€åœ¨æ‰§è¡Œæ•°æ®åº“æ“ä½œæ—¶æŒ‡å®š transaction å‚æ•°ä¸ºè¯¥å®ä¾‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨äº‹åŠ¡ä¸‹è¿›è¡Œæ•°æ®åº“æ“ä½œã€‚å½“äº‹åŠ¡å®Œæˆåï¼Œé€šè¿‡ commit æ–¹æ³•æäº¤äº‹åŠ¡ï¼Œé€šè¿‡ rollback æ–¹æ³•å›æ»šã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718192021sequelize.transaction(&#123; isolationLevel: Sequelize.Transaction.ISOLATION_LEVELS.READ_COMMITTED&#125;, transaction =&gt; &#123; return User.findOne(&#123; where: &#123; name: 'å°æ˜' &#125;, transaction: t &#125;).then(function(model) &#123; if (model) &#123; model.age = model.age + 1; return model.save(&#123; transaction: t &#125;); &#125; &#125;);&#125;).then(result =&gt; &#123; // transaction has been committed. Do something after the commit if required.&#125;).catch(err =&gt; &#123; // do something with the err.&#125;); åˆ›å»ºäº‹åŠ¡æ—¶å¯ä»¥é€šè¿‡ isolationLevel å‚æ•°æŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤çº§åˆ«æ˜¯ REPEATABLE_READã€‚ ç»™ sequelize.transaction æ–¹æ³•æŒ‡å®šå›è°ƒå‡½æ•°å¯ä»¥å°†äº‹åŠ¡æ‰˜ç®¡ç»™ Sequelizeï¼Œå®ƒä¼šè‡ªåŠ¨æäº¤å’Œå›æ»šäº‹åŠ¡ï¼ˆä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ï¼‰ã€‚å¦‚æœä¸ä½¿ç”¨å›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨ promise.then()ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨ t.commit() æäº¤äº‹åŠ¡ï¼Œt.callback() å›æ»šäº‹åŠ¡ã€‚ æ€»ç»“ç›®å‰ï¼Œæˆ‘ä¹Ÿåªæ˜¯ä½¿ç”¨äº† Sequelize çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼Œå¹¶ä¸æ¶‰åŠåˆ°å¤æ‚çš„æ“ä½œï¼Œä¸å¤ªé€‚åˆè¿‡å¤šçš„è¿›è¡Œè¯„ä»·ï¼Œç»™æˆ‘çš„æ„Ÿè§‰è¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œç®€å•ã€å¥½ç”¨ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>ORM</tag>
        <tag>Sequelize</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•°æ®åº“äº‹åŠ¡åŠé”æœºåˆ¶]]></title>
    <url>%2F2017%2F09%2Fdatabase-transaction%2F</url>
    <content type="text"><![CDATA[æ˜¨å¤©ï¼Œåœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªä»æ•°æ®åº“ä¸­å–ä¸€æ¡æ•°æ®çš„æ“ä½œï¼Œéœ€è¦ä¿è¯æ¯æ¡æ•°æ®åªä¼šè¢«å–ç”¨ä¸€æ¬¡ã€‚æœ€ç»ˆï¼Œé€šè¿‡æ•°æ®åº“äº‹åŠ¡è§£å†³äº†è¯¥é—®é¢˜ã€‚åœ¨è§£å†³çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è¯´æ˜¯é‡æ–°çš„å­¦ä¹ äº†ä¸€éæ•°æ®åº“é”æœºåˆ¶å’Œäº‹åŠ¡ï¼Œè¡¥äº†ä¸ªé’™ã€‚ å‰è¨€åœ¨å®ç°è¯¥åŠŸèƒ½æ—¶ï¼Œé¦–å…ˆåœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ äº†ä¸€ä¸ª is_used å­—æ®µï¼Œç”¨æ¥æ˜¯æ ‡è®°è¯¥æ¡æ•°æ®æ˜¯å¦è¢«ä½¿ç”¨è¿‡ï¼Œå…¶ä¸­ä¸º 1 æ—¶è¡¨ç¤ºå·²ä½¿ç”¨ï¼Œä¸º 0 æ—¶è¡¨ç¤ºå°šæœªè¢«ä½¿ç”¨ã€‚æ¯æ¬¡è·å–ä¸€æ¡å¯ç”¨æ•°æ®çš„åŒæ—¶ï¼Œéœ€è¦å°†è¯¥æ¡æ•°æ®çš„ is_used å­—æ®µç½®ä¸º 1ï¼Œè¡¨ç¤ºè¯¥æ¡æ•°æ®å·²ç»è¢«ä½¿ç”¨äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨å¤šä¸ªè·å–æ•°æ®çš„è¯·æ±‚å¹¶å‘æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å‰ä¸€ä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­è¿˜æœªæ¥å¾—åŠå°† is_used å­—æ®µç½®ä¸º 1ï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚å°±åˆ°æ¥ï¼Œå¯¼è‡´ä¸¤ä¸ªè¯·æ±‚è·å–åˆ°åŒä¸€æ¡æ•°æ®ã€‚ æœ€åˆï¼Œè®¡åˆ’æ˜¯é€šè¿‡åœ¨å†…å­˜ä¸­ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­ç¼“å­˜äº†éƒ¨åˆ†å¯ç”¨çš„æ•°æ®ã€‚å½“ä¸€ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå¯ç”¨æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¹¶å°†è¯¥æ¡æ•°æ®å¯¹åº”çš„ is_used å­—æ®µç½®ä¸º 1ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œå°†å¹¶å‘çš„å–æ•°æ“ä½œå˜ä¸ºäº†åŒæ­¥çš„é˜Ÿåˆ—æ“ä½œï¼Œå¯ä»¥ä¿è¯ä¸ä¼šå–åˆ°åŒä¸€æ¡æ•°æ®ã€‚ åæ¥ï¼Œåœ¨å¼€å§‹å®ç°æ—¶è€ƒè™‘åˆ°æ˜¯å¦å¯ä»¥ä»æ•°æ®åº“å±‚é¢å®ç°è¿™ä¸ªé—®é¢˜ï¼Ÿèƒ½ä¸èƒ½ç¡®ä¿è·å–ä¸€æ¡æ•°æ®å¹¶è®¾ç½® is_used å­—æ®µä¸º 1 çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çš„è¯·æ±‚ä¸ä¼šå–åˆ°è¯¥æ¡æ•°æ®ï¼Ÿæœ€åï¼Œçªç„¶æƒ³åˆ°äº†æ•°æ®åº“çš„äº‹åŠ¡ï¼Œå› ä¸ºäº‹åŠ¡å…·æœ‰åŸå­æ€§å’Œéš”ç¦»æ€§ï¼Œæ­£å¥½å¯ä»¥åº”å¯¹è¿™ç§å¹¶å‘çš„æƒ…å†µã€‚ æ•°æ®åº“é”æœºåˆ¶å…³äºæ•°æ®åº“é”ç»å¸¸ä¼šå¬åˆ°â€å…±äº«é”â€ã€â€æ’ä»–é”â€ã€â€ä¹è§‚é”â€ã€â€è¡Œçº§é”â€ç­‰åè¯ï¼Œä¹‹å‰å¹¶ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå€Ÿç€è¿™æ¬¡æœºä¼šæˆ‘é‡æ–°çš„äº†è§£äº†ä¸€ä¸‹æ•°æ®åº“é”æœºåˆ¶ã€‚æ•°æ®åº“é”ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š æŒ‰é”çš„ç²’åº¦åˆ’åˆ†ï¼Œå¯åˆ†ä¸ºè¡Œçº§é”ã€è¡¨çº§é”ã€é¡µçº§é”ã€‚ æŒ‰é”çº§åˆ«åˆ’åˆ†ï¼Œå¯åˆ†ä¸ºå…±äº«é”ã€æ’ä»–é”ã€‚ æŒ‰ä½¿ç”¨æ–¹å¼åˆ’åˆ†ï¼Œå¯åˆ†ä¸ºä¹è§‚é”ã€æ‚²è§‚é” æŒ‰æ“ä½œåˆ’åˆ†ï¼Œå¯åˆ†ä¸º DML é”å’Œ DDL é”ã€‚ æŒ‰åŠ é”æ–¹å¼åˆ’åˆ†ï¼Œå¯åˆ†ä¸ºè‡ªåŠ¨é”ã€æ˜¾ç¤ºé” è¡Œçº§é”ã€è¡¨çº§é”å’Œé¡µçº§é”è¡Œçº§é”æ˜¯é”å®šç²’åº¦æœ€ç»†çš„ä¸€ç§é”ï¼Œè¡¨ç¤ºåªé’ˆå¯¹å½“å‰æ“ä½œçš„è¡Œè¿›è¡ŒåŠ é”ã€‚è¡Œçº§é”èƒ½å¤§å¤§å‡å°‘æ•°æ®åº“æ“ä½œçš„å†²çªã€‚å…¶åŠ é”ç²’åº¦æœ€å°ï¼Œä½†åŠ é”çš„å¼€é”€ä¹Ÿæœ€å¤§ã€‚è¡Œçº§é”åˆ†ä¸ºå…±äº«é”å’Œæ’ä»–é”ã€‚ è¡¨çº§é”æ˜¯é”å®šç²’åº¦æœ€å¤§çš„ä¸€ç§é”ï¼Œè¡¨ç¤ºå¯¹å½“å‰æ“ä½œçš„æ•´å¼ è¡¨åŠ é”ï¼Œå®ƒå®ç°ç®€å•ï¼Œèµ„æºæ¶ˆè€—è¾ƒå°‘ã€‚è¡¨çº§é”å®šåˆ†ä¸ºè¡¨å…±äº«è¯»é”å’Œè¡¨ç‹¬å å†™é”ã€‚ é¡µçº§é”æ˜¯é”å®šç²’åº¦ä»‹äºè¡Œçº§é”å’Œè¡¨çº§é”ä¸­é—´çš„ä¸€ç§é”ã€‚è¡¨çº§é”é€Ÿåº¦å¿«ï¼Œä½†å†²çªå¤šï¼Œè¡Œçº§å†²çªå°‘ï¼Œä½†é€Ÿåº¦æ…¢ã€‚é¡µçº§é”é€‰æ‹©äº†ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œä¸€æ¬¡é”å®šç›¸é‚»çš„ä¸€ç»„è®°å½•ã€‚ å…±äº«é”å’Œæ’ä»–é”å…±äº«é”å…±äº«é”åˆç§° S é”ã€è¯»é”ï¼Œæ˜¯è¯»å–æ“ä½œåˆ›å»ºçš„é”ã€‚åŠ ä¸Šå…±äº«é”åï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥å¹¶å‘è¯»å–æ•°æ®ï¼ˆç»§ç»­åŠ å…±äº«é”ï¼‰ï¼Œä½†ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼ˆæ— æ³•åŠ æ’ä»–é”ï¼‰ï¼Œç›´åˆ°æ‰€æœ‰å…±äº«é”è¢«é‡Šæ”¾ã€‚ æ’å®ƒé”æ’ä»–é”åˆç§° X é”ã€å†™é”ï¼Œå¦‚æœæƒ³åˆ°ä¿®æ”¹æ•°æ®ï¼Œå¿…é¡»å…ˆè·å¾—æ’ä»–é”ï¼Œè·å¾—æ’ä»–é”çš„äº‹åŠ¡å¯ä»¥è¯»ã€å†™æ•°æ®ã€‚åœ¨ç»™æ•°æ®åŠ ä¸Šæ’å®ƒé”ä¹‹åï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å†æ·»åŠ å…¶ä»–ä»»ä½•ç±»å‹çš„é”ã€‚ ä¹è§‚é”å’Œæ‚²è§‚é”ä¹è§‚é”å’Œæ‚²è§‚é”ä¸æ˜¯æ•°æ®åº“ä¸­çš„æ¦‚å¿µï¼Œè€Œæ˜¯äººä»¬å®šä¹‰å‡ºæ¥çš„æ¦‚å¿µï¼Œç”¨æ¥æè¿°æ•°æ®åº“å¹¶å‘æ§åˆ¶çš„æ–¹æ¡ˆã€‚ ä¹è§‚é”ä¹è§‚é”å‡è®¾å¤šç”¨æˆ·å¹¶å‘çš„äº‹åŠ¡åœ¨å¤„ç†æ—¶ä¸ä¼šå½¼æ­¤äº’ç›¸å½±å“ï¼Œå„äº‹åŠ¡èƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿé”çš„æƒ…å†µä¸‹å¤„ç†å„è‡ªå½±å“çš„é‚£éƒ¨åˆ†æ•°æ®ã€‚åœ¨æäº¤æ•°æ®æ›´æ–°ä¹‹å‰ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šå…ˆæ£€æŸ¥åœ¨è¯¥äº‹åŠ¡è¯»å–æ•°æ®åï¼Œæœ‰æ²¡æœ‰å…¶ä»–äº‹åŠ¡åˆä¿®æ”¹äº†è¯¥æ•°æ®ã€‚å¦‚æœå…¶ä»–äº‹åŠ¡æœ‰æ›´æ–°çš„è¯ï¼Œæ­£åœ¨æäº¤çš„äº‹åŠ¡ä¼šè¿›è¡Œå›æ»šã€‚åœ¨è¿›è¡Œæ•°æ®åº“å¤„ç†æ—¶ï¼Œä¹è§‚é”é€šå¸¸ä¸ä½¿ç”¨æ•°æ®åº“æä¾›çš„é”æœºåˆ¶ï¼Œè€Œæ˜¯ç»™æ•°æ®æ·»åŠ ä¸€ä¸ªç‰ˆæœ¬æ ‡è¯†ï¼Œåœ¨è¯»å–æ•°æ®æ—¶è¿åŒç‰ˆæœ¬æ ‡è¯†ä¸€åŒè¯»å‡ºï¼Œç„¶åå†æ›´æ–°æ•°æ®æ—¶æ£€æŸ¥å½“å‰æ ‡è¯†ä¸ç¬¬ä¸€æ¬¡è¯»å–å‡ºæ¥çš„æ ‡è¯†è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœç›¸åŒåˆ™è¿›è¡Œæ›´æ–°ï¼Œå¦åˆ™è®¤ä¸ºæ•°æ®è¿‡æœŸã€‚ æ‚²è§‚é”æ‚²è§‚é”æŒ‡çš„æ˜¯å¯¹æ•°æ®æ˜¯å¦å¯èƒ½è¢«å¤–ç•Œï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿå½“å‰çš„å…¶ä»–äº‹åŠ¡ï¼Œä»¥åŠæ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡å¤„ç†ï¼‰ä¿®æ”¹æŒä¿å®ˆï¼ˆæ‚²è§‚ï¼‰æ€åº¦ï¼Œè®¤ä¸ºåœ¨è‡ªå·±çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ•°æ®å¾€å¾€éƒ½ä¼šè¢«å¤–ç•Œä¿®æ”¹ï¼Œå› æ­¤ï¼Œåœ¨æ•´ä¸ªæ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå°†æ•°æ®å¤„äºé”å®šçŠ¶æ€ã€‚ DML é”å’Œ DDL é”DML(Data Manipulation Language)æŒ‡æ•°æ®æ“çºµè¯­è¨€ï¼Œåœ¨å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼ˆDML æ“ä½œï¼‰æ˜¯ä¼šè‡ªåŠ¨åŠ ä¸Š DML é”ï¼Œå¦‚ insertã€deleteã€updateã€select ç­‰ï¼Œ DDL(Data Definition Language)æŒ‡æ•°æ®å®šä¹‰è¯­è¨€ï¼Œåœ¨è¿›è¡Œæ•°æ®åº“å®šä¹‰æ“ä½œï¼ˆDDL æ“ä½œï¼‰æ—¶ä¼šè‡ªåŠ¨åŠ ä¸Š DDL é”å¦‚ createã€alertã€drop ç­‰ã€‚ äº‹åŠ¡æ•°æ®åº“äº‹åŠ¡(Database Transaction) ï¼Œæ˜¯æŒ‡ä½œä¸ºå•ä¸ªé€»è¾‘å·¥ä½œå•å…ƒæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¦ä¹ˆå®Œå…¨åœ°æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨åœ°ä¸æ‰§è¡Œã€‚ä¸€ä¸ªé€»è¾‘å·¥ä½œå•å…ƒè¦æˆä¸ºäº‹åŠ¡ï¼Œå¿…é¡»æ»¡è¶³æ‰€è°“çš„ ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼‰å±æ€§ã€‚ åŸå­æ€§åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡åŒ…å«çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼Œä½¿å¤šä¸ªæ•°æ®åº“æ“ä½œçœ‹èµ·æ¥åƒä¸€ä¸ªæ“ä½œä¸€æ ·ã€‚ ä¸€è‡´æ€§ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åéƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚ éš”ç¦»æ€§éš”ç¦»æ€§æ˜¯å½“å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚äº‹åŠ¡çš„éš”ç¦»æœ‰ 4 ä¸­çº§åˆ«ï¼Œç”±ä½åˆ°é«˜åˆ†åˆ«ä¸º Read uncommitted ã€Read committed ã€Repeatable read ã€Serializableã€‚ Read uncommittedï¼šé¡¾åæ€ä¹‰æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¼šè¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡ä¸­æœªæäº¤çš„è¯»å–ï¼Œä¼šäº§ç”Ÿè„è¯»é—®é¢˜ã€‚ Read committedï¼šé¡¾åæ€ä¹‰æŒ‡ä¸€ä¸ªäº‹åŠ¡åªä¼šè¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æäº¤åçš„æ•°æ®ï¼Œå¯ä»¥è§£å†³è„è¯»é—®é¢˜ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿä¸å¯é‡å¤è¯»é—®é¢˜ã€‚ Repeatable readï¼šæ„æ€æ˜¯è¯´å¯é‡å¤è¯»ï¼Œä¸ºäº†è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜è€Œäº§ç”Ÿã€‚è¿™é‡Œé‡å¤è¯»æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤šæ¬¡å¯¹ä¸€æ¡æ•°æ®è¿›è¡Œè¯»å–æ“ä½œã€‚å…¶ä¸­ä¸å¯é‡å¤è¯»æŒ‡å¤šæ¬¡è¯»å–æ“ä½œä¸­ä¼šè¯»å–åˆ°ä¸åŒçš„æ•°æ®ï¼Œè€Œå¯é‡å¤è¯»æŒ‡å¤šæ¬¡è¯»å–æ“ä½œä¸­è¯»å–çš„æ˜¯ç›¸åŒçš„æ•°æ®ã€‚è¿™é‡Œé’ˆå¯¹çš„æ—¶åŒä¸€æ¡æ•°æ®ï¼Œå¦‚æœæ˜¯æ’å…¥ä¸€æ¡æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆæ— æ³•è¿›è¡Œæ§åˆ¶ï¼Œå› æ­¤ä¼šäº§ç”Ÿå¹»è¯»ã€‚ Serializableï¼šæœ€é«˜çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œåœ¨è¯¥çº§åˆ«ä¸‹ï¼Œå¤šä¸ªäº‹åŠ¡é¡ºåºæ‰§è¡Œï¼Œå¯ä»¥è§£å†³å¹»è¯»é—®é¢˜ã€‚ æŒä¹…æ€§æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤äº†ï¼Œé‚£ä¹ˆå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå³ä¾¿æ˜¯åœ¨æ•°æ®åº“ç³»ç»Ÿé‡åˆ°æ•…éšœçš„æƒ…å†µä¸‹ä¹Ÿä¸ä¼šä¸¢å¤±æäº¤äº‹åŠ¡çš„æ“ä½œã€‚ å®é™…åº”ç”¨åœ¨è¡¥å……äº†æ•°æ®åº“é”æœºåˆ¶åŠäº‹åŠ¡ç›¸å…³çš„çŸ¥è¯†åï¼Œå†æ¥çœ‹ä¹‹å‰çš„é—®é¢˜å°±å˜å¾—ç®€å•è®¸å¤šã€‚åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯è·å–ä¸€ä¸ª is_used å­—æ®µä¸º 0 çš„æ•°æ®å¹¶å°†è¯¥æ•°æ®çš„è¯¥å­—æ®µè®¾ç½®ä¸º 1 æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œå¹¶ä¸”ä¸ä¼šè¢«å…¶ä»–å¹¶å‘æ“ä½œå½±å“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªç”¨æŠŠæŸ¥è¯¢æ•°æ®å’Œæ›´æ–°æ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ç§å¹¶è®¾ç½®åˆé€‚çš„éš”ç¦»çº§åˆ«å³å¯ã€‚é‚£ä¹ˆï¼Œäº‹åŠ¡çš„éš”ç¦»çº§åˆ«åº”è¯¥è®¾ç½®ä¸ºå“ªä¸ªå‘¢ï¼Ÿ å…¶å®ï¼Œè¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼Œä¸€ä¸ªäº‹åŠ¡åœ¨è¯»å–ä¸€æ¡å¯ç”¨æ•°æ®å¹¶å°†å…¶è®¾ä¸ºä¸å¯ç”¨çŠ¶æ€ä¹‹å‰ï¼Œå¦‚æœåæ¥çš„äº‹åŠ¡ä¹Ÿè¯»å–åˆ°äº†ç›¸åŒçš„æ•°æ®ï¼Œé‚£ä¹ˆè¯¥äº‹åŠ¡çš„æ›´æ–°æ“ä½œä¸èƒ½å®Œæˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‰é¢çš„äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¯»å–åˆ°åä¸€ä¸ªäº‹åŠ¡æäº¤çš„æ•°æ®ï¼Œå¯¹åº”çš„éš”ç¦»çº§åˆ«å°±æ˜¯ Repeatable readã€‚å¦‚æœç”¨é”æœºåˆ¶æ¥è§£é‡Šï¼Œå°±æ˜¯äº‹åŠ¡å¼€å§‹æ—¶ï¼Œç»™è¯»å–åˆ°çš„æ•°æ®åŠ ä¸Šæ’ä»–é”ï¼Œç›´åˆ°å®Œæˆæ•°æ®çš„æ›´æ–°æ“ä½œåé‡Šæ”¾ã€‚è¿™æ ·ï¼Œå…¶ä»–äº‹åŠ¡åªèƒ½è¯»å–åˆ°è¯¥äº‹åŠ¡æ‰§è¡Œå‰æˆ–è€…æ‰§è¡Œå®Œæˆåçš„æ•°æ®ã€‚ å…³äºäº‹åŠ¡çš„å…·ä½“ä½¿ç”¨è§æˆ‘çš„å¦ä¸€ç¯‡åšå®¢ï¼šSequelize åŸºæœ¬ç”¨æ³• å‚è€ƒé“¾æ¥ http://blog.csdn.net/lexang1/article/details/52248686 http://www.cnblogs.com/fjdingsd/p/5273008.html]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>äº‹åŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é—®é¢˜æ±‡æ€»]]></title>
    <url>%2F2017%2F09%2Fsolution%2F</url>
    <content type="text"><![CDATA[å­¦ä¹ ã€å·¥ä½œå½“ä¸­å¸¸å¸¸ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæœ‰çš„é—®é¢˜ç¬¬ä¸€æ¬¡é‡åˆ°ä¸çŸ¥é“å¦‚ä½•è§£å†³å°±ä¼šå»ç™¾åº¦ã€è°·æ­Œã€‚ä½†æ˜¯ï¼Œæœ‰çš„ä¸€äº›é—®é¢˜æˆ‘å‘ç°å½“æˆ‘å†æ¬¡é‡åˆ°çš„æ—¶å€™ï¼Œä»ç„¶æ— æ³•ç¬¬ä¸€æ—¶é—´è§£å†³å®ƒï¼Œå› ä¸ºæˆ‘å¿˜è®°äº†å…·ä½“æ“ä½œæˆ–è€…æ˜¯ä¸€äº›å‘½ä»¤ã€‚æ‰€ä»¥ï¼Œæˆ‘å†³å®šæŠŠæˆ‘é€šè¿‡ç™¾åº¦ã€è°·æ­Œæ‰è§£å†³çš„ä¸€äº›é—®é¢˜è®°å½•åœ¨åšå®¢å½“ä¸­ï¼Œå½“æˆ‘å†æ¬¡é‡åˆ°è€Œåˆè®°ä¸æ¸…å…·ä½“æ€ä¹ˆè§£å†³çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥ç¿»çœ‹è¿™ç¯‡åšå®¢è€Œä¸ç”¨å†åœ¨ç½‘ä¸ŠèŠ±æ—¶é—´æ‰¾è§£å†³åŠæ³•ã€‚ NPMError with code: EINTEGRITYé€šè¿‡ npm install å®‰è£…ä¾èµ–æ—¶å‡ºç°ä¸Šè¿°é”™è¯¯ä»£ç ï¼Œç™¾åº¦è¯´é€šè¿‡ npm cache clean --force æ¸…é™¤ç¼“å­˜ï¼Œä½†æ˜¯è¿™å¯¹æˆ‘æ¥è¯´æ²¡æœ‰ä½œç”¨ã€‚æœ€åï¼ŒGoogle åˆ° npm çš„ issuesï¼Œåˆ é™¤ package-lock.json è§£å†³äº†è¯¥é—®é¢˜ã€‚ WebStormåœ¨ Webpack ä¸­é…ç½®åˆ«ååï¼ŒWebStorm å‡ºç°æ–‡ä»¶æ‰¾ä¸åˆ°çš„æç¤ºWebStorm 2017.2 EAP, 172.2827 ç‰ˆæœ¬å·²ç»æ”¯æŒï¼Œå®ƒä¼šè‡ªåŠ¨è§£æé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Webpack é…ç½®æ–‡ä»¶ï¼Œåœ¨ Preferences/Languages &amp; Frameworks/JavaScript/Webpack ä¸­å¯ä»¥æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚ å‚è€ƒï¼šhttps://blog.jetbrains.com/webstorm/2017/06/webstorm-2017-2-eap-172-2827/ Reactçƒ­æ¨¡å—æ›¿æ¢å¤±æ•ˆåŸå› ï¼šæˆ‘åœ¨å¯¼å…¥ containers/App/App.js æ—¶å¯¼å…¥äº†å…¨éƒ¨çš„ containersã€‚ è§£å†³åŠæ³•ï¼šåœ¨å¯¼å…¥æ—¶åªå¯¼å…¥ App ç»„ä»¶å³å¯ã€‚å¦‚ä¸‹é¢ä»£ç æ‰€ç¤ºï¼š 1234567891011121314151617181920212223import React from 'react';import ReactDOM from 'react-dom';import &#123;AppContainer&#125; from 'react-hot-loader';// import &#123;App&#125; from 'containers';import App from 'containers/App/App';const render = (RootElement) =&gt; &#123; ReactDOM.render( &lt;AppContainer&gt; &lt;RootElement/&gt; &lt;/AppContainer&gt; , document.getElementById('root'));&#125;;if (module.hot) &#123; module.hot.accept('containers/App/App', () =&gt; &#123; const App = require('containers/App/App').default; render(App); &#125;);&#125;render(App); ä½¿ç”¨ Eslint æ—¶å‡ºç°å˜é‡æœªä½¿ç”¨çš„é”™è¯¯å®‰è£… eslint-plugin-eact æ’ä»¶ï¼Œé…ç½® extends å±æ€§å¦‚ä¸‹ï¼š 1234"extends": [ "standard", "plugin:react/recommended" ]]]></content>
      <categories>
        <category>æ”¶è—</category>
      </categories>
      <tags>
        <tag>WebStorm</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·¨åŸŸ POST è¯·æ±‚ä¹‹ CROS]]></title>
    <url>%2F2017%2F09%2Fcors%2F</url>
    <content type="text"><![CDATA[è·¨åŸŸèµ„æºå…±äº«ï¼ˆCross-origin resource sharingï¼Œç®€ç§° â€œCROSâ€ï¼‰æ˜¯ä¸€ä¸ªæ–°çš„ W3C æ ‡å‡†ï¼Œå®ƒå…è®¸æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå°±åƒè¯·æ±‚åŒæºçš„æœåŠ¡å™¨èµ„æºä¸€æ ·ã€‚å¯¹äºè·¨åŸŸé—®é¢˜å¸¸è§çš„è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨ JSONPï¼Œä½†æ˜¯ JSONP æ˜¯ä¸æ”¯æŒ POST è¯·æ±‚çš„ï¼Œåœ¨ jQeury ä¸­å³ä½¿è®¾ç½®ä¸º POST ä¹Ÿä¾æ—§ä¼šä»¥ GET è¯·æ±‚æäº¤ã€‚å½“ä¸éœ€è¦å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨æ—¶ï¼Œç›¸è¾ƒäº iframeã€proxy ç­‰ï¼ŒCROS ä¸å¤±ä¸ºä¸€ä¸ªç®€å•ã€ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚ å‰è¨€æœ€è¿‘åœ¨é¡¹ç›®ä¸­éœ€è¦è·¨åŸŸæäº¤ POST è¯·æ±‚ï¼Œä½¿ç”¨çš„æ˜¯ CROS ä½œä¸ºè§£å†³æ–¹æ¡ˆã€‚ä¹‹å‰å¯¹äº CROS æœ‰è¿‡ä¸€äº›äº†è§£ï¼Œä½†æ²¡æœ‰å…·ä½“çš„å°è¯•ä½¿ç”¨ï¼Œåªæ˜¯è§‰å¾— CROS æœºåˆ¶å¹¶ä¸å¤æ‚ï¼šæ— å¤–ä¹å°±æ˜¯æä¾›äº†ä¸€ç§è·¨åŸŸè¯·æ±‚èµ„æºæ—¶ï¼Œå¦‚æœæœåŠ¡å™¨åŒæ„å°±å…è®¸æ­¤æ¬¡è¯·æ±‚çš„æœºåˆ¶ã€‚ä½†æ˜¯ï¼Œè¿™æ¬¡åœ¨å…·ä½“ä½¿ç”¨æ—¶å´é‡åˆ°äº†éº»çƒ¦ã€‚ åŸºæœ¬ä½¿ç”¨CROS ä½¿ç”¨èµ·æ¥ååˆ†ç®€å•ï¼Œå‰ç«¯ä¸éœ€è¦åšä»»ä½•å¤„ç†ï¼Œåªéœ€è¦æœåŠ¡å™¨åœ¨å“åº”è¯·æ±‚æ—¶ï¼Œåœ¨å“åº”å¤´ä¸­è®¾ç½®å‡ ä¸ªç‰¹æ®Šçš„å­—æ®µå³å¯ï¼Œå…·ä½“æ˜¯å“ªäº›å­—æ®µæ ¹æ®è¯·æ±‚ç±»çš„å‹ä¸åŒè€Œä¸åŒã€‚ åˆ©ç”¨ CROS è·¨åŸŸè¯·æ±‚è¢«åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯ä¸éœ€è¦è¿›è¡Œé¢„æ£€çš„ç®€å•è¯·æ±‚ï¼Œå¦ä¸€ç§æ˜¯éœ€è¦è¿›è¡Œé¢„æ£€çš„éç®€å•è¯·æ±‚ã€‚ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚ä¸»è¦é€šè¿‡è¯·æ±‚ç±»å‹å’Œè¯·æ±‚å¤´è¿›è¡Œå†³å®šï¼Œå¦‚æœè¯·æ±‚æ»¡è¶³ä¸‹é¢çš„æ¡ä»¶å°±æ˜¯ç®€å•è¯·æ±‚ï¼Œå¦åˆ™å°±æ˜¯éç®€å•è¯·æ±‚ã€‚ è¯·æ±‚æ–¹æ³•æ˜¯ HEADã€GET æˆ–è€… POST æ–¹æ³•ã€‚ è¯·æ±‚å¤´ä¸­åªåŒ…å«è¿™äº›å¤´ï¼šAcceptã€Accept-Languageã€Content-Languageã€Last-Event-ID å’Œ Content-Typeï¼Œå…¶ä¸­ Content-Type çš„å€¼åªèƒ½æ˜¯ application/x-www-form-urlencodedã€multipart/form-data æˆ–è€… text/plainã€‚ ç®€å•è¯·æ±‚å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨åœ¨å‘å‡ºè¯·æ±‚æ—¶ä¼šåœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ª Origin å­—æ®µç”¨æ¥è¯´æ˜æœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ŒæœåŠ¡å™¨å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µæ¥å†³å®šæ˜¯å¦å…è®¸æ­¤æ¬¡è®¿é—®ã€‚ å¦‚æœæœåŠ¡å™¨åŒæ„æ­¤æ¬¡è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨å“åº”å¤´ä¸­ä¼šåŒ…å« Access-Control-Allow-Origin å­—æ®µï¼Œæµè§ˆå™¨å‘ç°å“åº”å¤´ä¸­åŒ…å«è¯¥å­—æ®µï¼Œå°±çŸ¥é“è¿™ä¸ªè¯·æ±‚æ˜¯è¢«å…è®¸çš„ã€‚ç›¸ååœ°ï¼Œå¦‚æœæœåŠ¡å™¨æ‹’ç»äº†æœ¬æ¬¡è¯·æ±‚ï¼Œé‚£ä¹ˆåœ¨å“åº”å¤´ä¸­å°±ä¸ä¼šåŒ…å«è¯¥å­—æ®µï¼Œè¿™æ—¶æµè§ˆå™¨å°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ éç®€å•è¯·æ±‚éç®€å•è¯·æ±‚ç›¸è¾ƒäºç®€å•è¯·æ±‚è€Œè¨€æœ€å¤§çš„åŒºåˆ«å°±æ˜¯æœ‰ä¸€ä¸ªé¢„æ£€çš„è¿‡ç¨‹ï¼Œå³æµè§ˆå™¨åœ¨å‘å‡ºæ­£å¼çš„è¯·æ±‚ä¹‹å‰ä¼šå…ˆå‘å‡ºä¸€ä¸ª OPTIONS è¯·æ±‚ï¼Œè¯¥è¯·æ±‚çš„ä½œç”¨æ˜¯å…ˆè¯¢é—®æœåŠ¡å™¨å½“å‰åŸŸæ˜¯å¦å¯ä»¥è®¿é—®ä»¥åŠæ˜¯å¦å…è®¸æ­¤ç±»æ–¹æ³•å’Œå…¶ä»–çš„è¯·æ±‚å¤´å­—æ®µï¼Œå½“æœåŠ¡å™¨ä¸­çš„å“åº”å¤´ä¸­åŒ…å«å…è®¸æ­¤è¯·æ±‚çš„å­—æ®µï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„è¯·æ±‚ã€‚ å®é™…åº”ç”¨åœ¨è¿™æ¬¡å®é™…åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘èµ·åˆå¹¶ä¸æ¸…æ¥šå‘é€ POST è¯·æ±‚ä¹‹å‰æœ‰ä¸€ä¸ªé¢„æ£€çš„è¿‡ç¨‹ï¼Œæˆ‘ç®€å•çš„ä»¥ä¸ºåªéœ€è¦æœåŠ¡ç«¯åœ¨è¿”å›æ—¶æ·»åŠ å¯¹åº”çš„å¤´å³å¯ï¼Œä½†æ˜¯ POST è¯·æ±‚ä¸€ç›´ä¸æˆåŠŸï¼Œå¦‚æœæ¢æˆ GET è¯·æ±‚åˆ™å¯ä»¥æ­£å¸¸è¯·æ±‚ï¼Œè¿™ä¸€åº¦è®©æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ã€‚ æµè§ˆå™¨ä¸ŠæŠ¥çš„é”™è¯¯å°±æ˜¯æ²¡æœ‰è·¨åŸŸçš„æƒé™ï¼Œä½†æ˜¯å…¶å®åœ¨é‚£ä¹‹å‰è¿˜æœ‰ä¸€ä¸ª 401ã€‚æˆ‘æ³¨æ„åˆ°äº†è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¥ä¸ºè¿™æ˜¯å› ä¸ºæ²¡æœ‰æƒé™æ‰€ä»¥æ‰è¿”å›çš„ 401ã€‚ä½†æ˜¯ï¼Œå…¶å®æ˜¯å› ä¸ºæœåŠ¡ç«¯æœ‰é‰´æƒçš„è¿‡ç¨‹ï¼Œè€Œ OPTIONS è¯·æ±‚é‰´æƒæ²¡æœ‰é€šè¿‡ï¼Œæ‰€ä»¥æœåŠ¡ç«¯ç›´æ¥è¿”å›äº† 401ï¼Œæ²¡æœ‰æ‰§è¡Œåˆ°è®¾ç½®å“åº”å¤´çš„å¤„ç†ï¼Œè¿™æ‰å¯¼è‡´ä¸€ç›´è¯·æ±‚ä¸æˆåŠŸã€‚ åé¢ï¼Œå°†æœåŠ¡ç«¯ä¸­å¯¹äº OPTIONS è¯·æ±‚çš„é‰´æƒå»æ‰å°±å¯ä»¥æˆåŠŸè·¨åŸŸäº†ã€‚ æ€»ç»“è¿™æ¬¡é—®é¢˜å…¶å®æ˜¯ä¸€ä¸ªå¾ˆå°çš„é—®é¢˜ï¼Œåœ¨è§£å†³çš„è¿‡ç¨‹ä¸­ä¹‹æ‰€ä»¥èŠ±äº†è¿‡å¤šçš„æ—¶é—´å°±æ˜¯å› ä¸ºæˆ‘æƒ³å½“ç„¶äº†ï¼Œæ˜æ˜å°±ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè‡ªä»¥ä¸º 401 æ˜¯å› ä¸ºæ²¡æœ‰è·¨åŸŸæƒé™å¯¼è‡´çš„ã€‚æ‰€ä»¥ï¼Œä»¥ååœ¨é‡åˆ°é—®é¢˜æ—¶è¿˜æ˜¯ä¸èƒ½å¤ªæƒ³å½“ç„¶ï¼Œå¯ä»¥è¿›è¡Œé€‚å½“çš„çŒœæµ‹ï¼Œä½†æ˜¯ä¸€å®šè¦å»éªŒè¯çŒœæµ‹çš„æ­£ç¡®æ€§ã€‚å¦‚æœèƒ½åˆå¿«åˆå¯¹çš„å®šä½é—®é¢˜çš„åŸå› ï¼Œå¯ä»¥èŠ‚çœå¤§é‡æ‘¸çŸ³å¤´è¿‡æ²³çš„è¿‡ç¨‹ã€‚ğŸ¤¡ğŸ¤¡]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Web é€šä¿¡</category>
      </categories>
      <tags>
        <tag>CROS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React å­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2017%2F09%2Fnote-react%2F</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘åœ¨å­¦ä¹  React çš„è¿‡ç¨‹ä¸­è®°å½•ä¸‹çš„ç¬”è®°ï¼Œå­¦ä¹ ä¸»è¦æ˜¯è·Ÿç€å®˜ç½‘çš„æ–‡æ¡£äº†è§£ React çš„ä¸€äº›åŸºæœ¬ç”¨æ³•ã€‚æˆ‘è®°å½•ä¸‹äº†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘é‡åˆ°è¿‡çš„é—®é¢˜ä»¥åŠæˆ‘è§‰å¾—é‡è¦çš„åœ°æ–¹ã€‚ å®‰è£…é€šè¿‡å¼•å…¥è„šæœ¬æ–‡ä»¶çš„æ–¹å¼å®‰è£…æ—¶ï¼Œéœ€è¦å…ˆå¼•å…¥ Reactï¼Œå†å¼•å…¥ ReactDOMã€‚ JSXReact ä¸­ä½¿ç”¨äº†å«åš JSX çš„ä¸€ç§ JavaScript è¯­æ³•æ‰©å±•ï¼Œæ„Ÿè§‰å’Œæ¨¡æ¿è¯­è¨€å¾ˆç±»ä¼¼ï¼Œé€šè¿‡ JSX å¯ä»¥å‘Šåˆ«ä¼ ç»Ÿçš„é€šè¿‡æ‹¼æ¥å­—ç¬¦ä¸²æˆ–è€…æ˜¯æ•°æ®ä¸­ push æ ‡ç­¾çš„æ–¹å¼æ¥æ„å»ºé¡µé¢ï¼Œæ›´åŠ çš„ç›´è§‚ã€ä¼˜é›…ã€‚ åœ¨ JSX ä¸­å¯ä»¥ç›´æ¥åƒä¹¦å†™ HTML ä¸€æ ·å†™é¡µé¢ï¼Œå¯ä»¥ä»»æ„åœ°ä½¿ç”¨ JavaScript è¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼éœ€è¦ç”¨ {} æ‹¬èµ·æ¥ã€‚ æ¨èåœ¨ JSX ä»£ç çš„å¤–é¢æ‰©ä¸Šä¸€ä¸ªå°æ‹¬å·ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢è‡ªåŠ¨æ’å…¥åˆ†å·ï¼ˆç®€ç§° ASIï¼‰çš„é—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼š 123456function asi()&#123; return 'Test ASI';&#125;asi(); // undefined JSX åœ¨ç¼–è¯‘ä¹‹åä¹Ÿä¼šè½¬åŒ–æˆ JavaScript å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç›´æ¥å°†å…¶èµ‹å€¼ç»™å˜é‡æˆ–è€…ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ã€‚ React DOM ä½¿ç”¨ camelCase é©¼å³°å‘½åæ¥å®šä¹‰å±æ€§çš„åç§°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ HTML çš„å±æ€§åç§°ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨ className æŒ‡ä»£ HTML class å±æ€§ã€‚ å¯ä»¥ä½¿ç”¨ JSX ä¸­çš„ç‚¹è¡¨ç¤ºæ³•æ¥å¼•ç”¨ React ç»„ä»¶ï¼Œä¾‹å¦‚ï¼š 1234567891011import React from 'react';const MyComponents = &#123; DatePicker: function DatePicker(props) &#123; return &lt;div&gt;Imagine a &#123;props.color&#125; datepicker here.&lt;/div&gt;; &#125;&#125;function BlueDatePicker() &#123; return &lt;MyComponents.DatePicker color="blue" /&gt;;&#125; å¦‚æœä½ æ²¡æœ‰ç»™å±æ€§ä¼ å€¼ï¼Œå®ƒé»˜è®¤ä¸º trueã€‚ä¾‹å¦‚ï¼š 123456&lt;MyTextBox autocomplete /&gt;&lt;!-- ä¸æ¨èè¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šä¸ ES6 å¯¹è±¡ç®€æ´è¡¨ç¤ºæ³• æ··æ·†ã€‚æ¯”å¦‚ &#123;foo&#125; æ˜¯ &#123;foo: foo&#125; çš„ç®€å†™--&gt;&lt;MyTextBox autocomplete=&#123;true&#125; /&gt; å…ƒç´ å…ƒç´ æ˜¯æ„æˆ React åº”ç”¨çš„æœ€å°å•ä½ã€‚React å…ƒç´ åœ¨å†™æ³•ä¸Šçœ‹ä¸Šå»åƒæ˜¯ HTML æ ‡ç­¾ï¼Œä½†æ˜¯ä¸åŒäºæµè§ˆå™¨ DOM å…ƒç´ ï¼Œå®é™…ä¸Šåªæ˜¯ä¸€ä¸ª JavaScript å¯¹è±¡ã€‚ React å…ƒç´ éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå½“å…ƒç´ è¢«æ¸²æŸ“ä¹‹åå°±æ— æ³•å†æ”¹å˜å…ƒç´ çš„å†…å®¹æˆ–è€…å±æ€§ï¼Œæ›´æ–°çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯æ¸²æŸ“ä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚React ä¸­ä½¿ç”¨äº†è™šæ‹Ÿ DOMï¼Œåœ¨é‡æ–°æ¸²æŸ“çš„æ—¶å€™ä¸ä¼šæ›´æ–°å…¨éƒ¨çš„å…ƒç´ ï¼Œè€Œæ˜¯ä¼šå…ˆæ¯”è¾ƒå‰åå·®å¼‚ï¼Œåªæ›´æ–°æ”¹å˜äº†çš„éƒ¨åˆ†ã€‚ æ¡ä»¶æ¸²æŸ“React ä¸­çš„æ¡ä»¶æ¸²æŸ“æ ¸å¿ƒå°±æ˜¯é€šè¿‡æ§åˆ¶ç»„ä»¶ render çš„è¿”å›å€¼æ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯åƒå…¶ä»–æ¡†æ¶æœ‰ if æŒ‡ä»¤ã€‚ render ä¸­ return null å¯ä»¥éšè—ç»„ä»¶ï¼Œé˜»æ­¢ç»„ä»¶æ¸²æŸ“ï¼Œè¿™å¹¶ä¸ä¼šå½±å“è¯¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„å›è°ƒã€‚ å¾ªç¯æ¸²æŸ“React å¯ä»¥ç›´æ¥æ¸²æŸ“å‡ºç”± React å…ƒç´ æ„æˆçš„é›†åˆã€‚ä¾‹å¦‚ï¼š 123456789const numbers = [1, 2, 3, 4, 5];const listItems = numbers.map((number) =&gt; &lt;li&gt;&#123;number&#125;&lt;/li&gt;);ReactDOM.render( &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt;, document.getElementById('body')); å½“ä½¿ç”¨å…ƒç´ é›†åˆæ—¶ï¼Œåº”å½“ç»™æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ªç¡®å®šçš„æ ‡è¯†ï¼Œç§°ä¸º â€œkeyâ€ã€‚Keys å¯ä»¥åœ¨ DOM ä¸­çš„æŸäº›å…ƒç´ è¢«å¢åŠ æˆ–åˆ é™¤çš„æ—¶å€™å¸®åŠ© React è¯†åˆ«æ•°ç»„ä¸­å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ã€‚ æ³¨æ„ï¼š key ä¸ä¼šä¼ é€’ç»™ç»„ä»¶ï¼Œå³é€šè¿‡ props.key æ— æ³•è·å–åˆ° keyã€‚ æ•°ç»„å…ƒç´ ä¸­ä½¿ç”¨çš„ key åœ¨å…¶å…„å¼Ÿä¹‹é—´åº”è¯¥æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä½†ä¸å¿…å…¨å±€å”¯ä¸€ã€‚ ç»„ä»¶åŠå±æ€§ç»„ä»¶å°±åƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªè¢«æˆä¸ºç»„ä»¶å±æ€§çš„è¾“å…¥ï¼Œè¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚ä¾‹å¦‚ï¼š 123function Welcome(props) &#123; return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;&#125; ä¸Šé¢çš„è¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 class æ¥å®šä¹‰ç»„ä»¶ï¼š 12345class Welcome extends React.Component &#123; render()&#123; return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;; &#125;&#125; å®šä¹‰äº†ç»„ä»¶åï¼Œå¯ä»¥ç›´æ¥åƒä½¿ç”¨ HTML æ ‡ç­¾ä¸€æ ·ä½¿ç”¨è¯¥ç»„ä»¶ã€‚åŒæ—¶ï¼Œä½¿ç”¨ç»„ä»¶æ—¶åœ¨ç»„ä»¶ä¸Šå®šä¹‰çš„æ‰€æœ‰å±æ€§ä¼šé€šè¿‡ä¸€ä¸ª props å¯¹è±¡ä¼ é€’ç»™è¯¥ç»„ä»¶ã€‚ æ³¨æ„ï¼š ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ ç»„ä»¶çš„è¿”å›å€¼åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´  ä¸èƒ½ä¿®æ”¹ç»„ä»¶çš„ props åœ¨æˆ‘çœ‹æ¥ï¼Œä¸€ä¸ªç»„ä»¶åº”è¯¥æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šåŠŸèƒ½ã€ä½è€¦åˆã€å¯å•ç‹¬å·¥ä½œçš„å•å…ƒã€‚ç»„ä»¶åº”è¯¥å…·æœ‰è¾ƒå¥½çš„é€šç”¨æ€§ï¼Œä¸ä¸Šä¸‹æ–‡çš„ä¸åº”è¯¥è¿‡åº¦çš„å…³è”ã€‚ å—æ§ç»„ä»¶å€¼ç”± React æ§åˆ¶çš„è¾“å…¥è¡¨å•å…ƒç´ ç§°ä¸ºâ€œå—æ§ç»„ä»¶â€ã€‚ä¾‹å¦‚ï¼š 123456789101112131415161718192021222324252627class Input extends React.Component &#123; constructor(props)&#123; super(props); this.state = &#123; value: '' &#125;; this.handleChange = this.handleChange.bind(this); &#125; handleChange(e) &#123; this.setState(&#123; value: e.target.value.toLocaleUpperCase() &#125;); &#125; render() &#123; return ( &lt;input value=&#123;this.state.value&#125; onChange=&#123;this.handleChange&#125; /&gt; ); &#125;&#125;ReactDOM.render( &lt;Input /&gt;, document.querySelector('body')); ç»„ä»¶ç»„åˆç»„ä»¶ JSX æ ‡ç­¾å†…çš„ä»»ä½•å†…å®¹éƒ½å°†é€šè¿‡ children å±æ€§ä¼ å…¥ã€‚ å¯ä»¥å°†ä¸€ä¸ªç»„ä»¶ä½œä¸ºå¦ä¸€ä¸ªç»„ä»¶çš„å±æ€§ä¼ å…¥ï¼Œå®Œå…¨å„ç§ç»„ä»¶çš„ç»„åˆï¼Œä¾‹å¦‚ï¼š 123456789101112131415161718192021222324function SplitPane(props) &#123; return ( &lt;div className="SplitPane"&gt; &lt;div className="SplitPane-left"&gt; &#123;props.left&#125; &lt;/div&gt; &lt;div className="SplitPane-right"&gt; &#123;props.right&#125; &lt;/div&gt; &lt;/div&gt; );&#125;function App() &#123; return ( &lt;SplitPane left=&#123; &lt;Contacts /&gt; &#125; right=&#123; &lt;Chat /&gt; &#125; /&gt; );&#125; ç»„ä»¶å¯ä»¥æ¥å—ä»»æ„å…ƒç´ ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹ã€React å…ƒç´ æˆ–å‡½æ•°ã€‚ å¦‚æœè¦åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨ UI æ— å…³çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å»ºè®®å°†å…¶æå–åˆ°å•ç‹¬çš„ JavaScript æ¨¡å—ä¸­ã€‚è¿™æ ·å¯ä»¥åœ¨ä¸å¯¹ç»„ä»¶è¿›è¡Œæ‰©å±•çš„å‰æä¸‹å¯¼å…¥å¹¶ä½¿ç”¨è¯¥å‡½æ•°ã€å¯¹è±¡æˆ–ç±»ã€‚ å±æ€§ç±»å‹æ£€æŸ¥ ä½¿ç”¨ Flow æˆ–è€… TypeScriptè¿™æ ·çš„ JavsScript æ‰©å±•æ¥å¯¹æ•´ä¸ªåº”ç”¨ç¨‹åºè¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ ä½¿ç”¨ prop-types åº“ã€‚ ç”Ÿå‘½å‘¨æœŸè£…è½½ constructorï¼šæ„é€ å‡½æ•°ï¼Œåœ¨åˆ›å»ºç»„ä»¶æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚ componentWillMountï¼šç»„ä»¶è¢«æŒ‚è½½åœ¨é¡µé¢ä¹‹å‰è°ƒç”¨ã€‚ componentDidMountï¼šç»„ä»¶æŒ‚è½½åœ¨é¡µé¢ä¹‹åè°ƒç”¨ã€‚ æ›´æ–° componentWillReceivePropsï¼šç»„ä»¶æ¥æ”¶åˆ°æ–°å±æ€§å‰è°ƒç”¨ã€‚ shouldComponentUpdateï¼šçŠ¶æ€æ”¹å˜æ—¶è°ƒç”¨ï¼Œé»˜è®¤è¿”å› true ï¼Œéœ€è¦é‡æ–°æ¸²æŸ“ã€‚å¯ä»¥å†è¿™é‡Œåšåˆ¤æ–­è¿”å› false é˜»æ­¢æ¸²æŸ“ã€‚ componentWillUpdateï¼šshouldComponentUpdate è¿”å› rue æˆ–è€…è°ƒç”¨forceUpdateä¹‹åï¼Œåœ¨æ¸²æŸ“å‰è¢«ç«‹å³è°ƒç”¨ã€‚åˆå§‹åŒ–æ¸²æŸ“æ—¶ä¸ä¼šè°ƒç”¨ã€‚ componentDidUpdateï¼šåœ¨æ›´æ–°å‘ç”Ÿåç«‹å³è¢«è°ƒç”¨ï¼Œä¸ä¼šåœ¨åˆå§‹åŒ–æ¸²æŸ“æ—¶è°ƒç”¨ã€‚ å¸è½½ componentWillUnmountï¼šå½“ä¸€ä¸ªç»„ä»¶ä» DOM ä¸­è¢«ç§»é™¤æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ã€‚ä¸€èˆ¬åœ¨ componentDidMount é‡Œé¢æ³¨å†Œçš„äº‹ä»¶éœ€è¦åœ¨è¿™é‡Œåˆ é™¤ã€‚ çŠ¶æ€çŠ¶æ€ä¸å±æ€§ååˆ†ç›¸ä¼¼ï¼Œä½†æ˜¯çŠ¶æ€æ˜¯ç§æœ‰çš„ï¼Œå®Œå…¨ç”±ç»„ä»¶è‡ªå·±æ§åˆ¶ã€‚ å¯¹äºç»„ä»¶ä¸­ä¸éœ€è¦è¾“å‡ºåˆ°é¡µé¢ä¸Šçš„å±æ€§ï¼Œä¸è¦å°†å±æ€§æ·»åŠ åˆ° props æˆ–è€… state ä¸Šé¢ï¼Œè€Œæ˜¯ç›´æ¥ä½œä¸ºç»„ä»¶çš„å±æ€§æ·»åŠ åˆ° this ä¸Šã€‚ æ³¨æ„ï¼š ä¸è¦ç›´æ¥çš„ä¿®æ”¹çŠ¶æ€ï¼Œè€Œæ˜¯ä½¿ç”¨ setState æ–¹æ³• çŠ¶æ€æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ è°ƒç”¨ setState() æ—¶ï¼ŒReact ä¼šå°†å¯¹è±¡åˆå¹¶åˆ°å½“å‰çŠ¶æ€ã€‚ å‘ä¸‹çš„å•é¡¹æ•°æ®æµï¼Œå±æ€§åªèƒ½ç”±çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶ã€‚è¿™ç‚¹å’Œ Polymer ä¸ä¸€æ ·ã€‚ çŠ¶æ€æå‡åœ¨Reactä¸­ï¼ŒçŠ¶æ€åˆ†äº«æ˜¯é€šè¿‡å°† state æ•°æ®æå‡è‡³ç¦»éœ€è¦è¿™äº›æ•°æ®çš„ç»„ä»¶æœ€è¿‘çš„çˆ¶ç»„ä»¶æ¥å®Œæˆçš„ã€‚è¿™å°±æ˜¯æ‰€è°“çš„çŠ¶æ€æå‡ã€‚ é€šè¿‡çŠ¶æ€æå‡ï¼Œå¯ä»¥è¿›è¡Œå­ç»„ä»¶é—´çš„é€šä¿¡ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå­ç»„ä»¶çœ‹ä½œæ˜¯ä¸€ä¸ª HTML å…ƒç´ ï¼Œè¿™å°±ç±»ä¼¼äºå‰é¢æåˆ°çš„å—æ§ç»„ä»¶ï¼šç”±çˆ¶ç»„ä»¶è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œå°†å±æ€§é€šè¿‡ props ä¼ é€’ç»™éœ€è¦é€šä¿¡çš„å­ç»„ä»¶ï¼Œè¿™æ ·å­ç»„ä»¶å°±å¯ä»¥æ‹¥æœ‰ä¸€è‡´çš„æ•°æ®ï¼Œå› ä¸ºå±æ€§é€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶æ˜¯ä¸èƒ½ç›´æ¥è¿›è¡Œä¿®æ”¹çš„ï¼Œæ‰€ä»¥åŒæ—¶ä¼ é€’ä¸€ä¸ªå¤„ç†å‡½æ•°ç»™ç›¸åº”çš„å­ç»„ä»¶ã€‚ äº‹ä»¶React ç»„ä»¶ä¸Šç»‘å®šçš„å†™æ³•ä¸åŸç”Ÿå†™æ³•ç±»ä¼¼ï¼Œåªæ˜¯äº‹ä»¶åç§°ä½¿ç”¨é©¼å³°å‘½åï¼Œå¹¶å°†ä¸€ä¸ªå‡½æ•°ä¼ å…¥ï¼Œè€ŒåŸç”Ÿå†™æ³•ä½¿ç”¨çš„æ˜¯äº‹ä»¶åå°å†™å¹¶ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚ä¸‹ï¼š 123456789// åŸç”Ÿå†™æ³•&lt;button onclick="doClick()"&gt; Click Me!&lt;/button&gt;// React å†™æ³•&lt;button onClick=&#123;doClick&#125;&gt; Click Me!&lt;/button&gt; React åœ¨äº‹ä»¶å¤„ç†ä¸­é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸ºä¸èƒ½ä½¿ç”¨ return falseï¼Œåªèƒ½ä½¿ç”¨ e.preventDefault()ã€‚ ä½¿ç”¨ ES6 class è¯­æ³•æ¥å®šä¹‰ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œäº‹ä»¶å¤„ç†å™¨ä¼šæˆä¸ºç±»çš„ä¸€ä¸ªæ–¹æ³•ã€‚ç»‘å®šäº‹ä»¶æ—¶éœ€è¦æ³¨æ„ this çš„æŒ‡å‘ã€‚æ¨èåœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š this æˆ–ä½¿ç”¨å±æ€§åˆå§‹åŒ–å™¨è¯­æ³•ã€‚å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445class ToggleButton extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; isToggleOn: true &#125;; this.handleClick = this.handleClick.bind(this); &#125; handleClick() &#123; /* * çŠ¶æ€çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤æœ€å¥½ä¸è¦ç›´æ¥ä½¿ç”¨å½“å‰çŠ¶æ€æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ * setState æ”¯æŒä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¸­ä¼šå°†ä¸Šæ¬¡çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œæ¨èä½¿ç”¨æ­¤ç§æ–¹å¼ã€‚ * * this.setState(&#123; * isToggleOn: !this.state.isToggleOn * &#125;); */ this.setState(prevState =&gt; (&#123; isToggleOn: !prevState.isToggleOn &#125;)); &#125; render() &#123; return ( /* * ç»‘å®šäº‹ä»¶æ—¶ï¼Œæ³¨æ„ this çš„æŒ‡å‘ï¼Œéœ€è¦ç»‘å®š thisï¼š * this.handClick.bind(this) æˆ– (e) =&gt; this.handleClick(e) * * ä½¿ç”¨è¿™ç§æ–¹å¼åœ¨ ToggleButton æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°ä½œä¸ºå±æ€§ä¼ å…¥å­ç»„ä»¶ï¼Œé‚£ä¹ˆç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚ * å› æ­¤ï¼Œæ¨èåœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š this æˆ–ä½¿ç”¨å±æ€§åˆå§‹åŒ–å™¨è¯­æ³• */ &lt;button onClick=&#123;this.handleClick&#125;&gt; &#123;this.state.isToggleOn ? 'On' : 'Off'&#125; &lt;/button&gt; ); &#125;&#125;ReactDOM.render( &lt;ToggleButton /&gt;, document.querySelector('body')); å±æ€§åˆå§‹åŒ–å™¨è¯­æ³•å¦‚ä¸‹ï¼š 123456789101112131415class LoggingButton extends React.Component &#123; // This syntax ensures `this` is bound within handleClick. // Warning: this is *experimental* syntax. handleClick = () =&gt; &#123; console.log('this is:', this); &#125; render() &#123; return ( &lt;button onClick=&#123;this.handleClick&#125;&gt; Click me &lt;/button&gt; ); &#125;&#125; å…¶ä»–Refé€šè¿‡ Ref æˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œ DOM å…ƒç´ æˆ–è€…å­ç»„ä»¶ã€‚ä¾‹å¦‚ï¼š 123456789101112class AutoFocusTextInput extends React.Component &#123; componentDidMount() &#123; this.textInput.focus(); &#125; render() &#123; return ( &lt;CustomTextInput ref=&#123;(input) =&gt; &#123; this.textInput = input; &#125;&#125; /&gt; ); &#125;&#125; ç»™ HTML å…ƒç´ æ·»åŠ  ref å±æ€§æ—¶ï¼Œref å›è°ƒæ¥æ”¶äº†åº•å±‚çš„ DOM å…ƒç´ ä½œä¸ºå‚æ•°ï¼›ç»™ç»„ä»¶æ·»åŠ  ref å±æ€§æ—¶ï¼Œå‚æ•°æ˜¯ç»„ä»¶çš„å®ä¾‹ï¼Œä»…å¯¹ class å£°æ˜çš„ CustomTextInput æœ‰æ•ˆã€‚ æƒ³è¦åœ¨çˆ¶ç»„ä»¶å†…ç›´æ¥æ“ä½œå­ç»„ä»¶çš„ DOM å…ƒç´ ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶ä¸Šæ·»åŠ  ref å±æ€§ï¼Œç„¶åçˆ¶ç»„ä»¶æŠŠå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä¾‹å¦‚ï¼š 1234567891011121314151617function CustomTextInput(props) &#123; return ( &lt;div&gt; &lt;input ref=&#123;props.inputRef&#125; /&gt; &lt;/div&gt; );&#125;class Parent extends React.Component &#123; render() &#123; return ( &lt;CustomTextInput inputRef=&#123;el =&gt; this.inputElement = el&#125; /&gt; ); &#125;&#125; éå—æ§ç»„ä»¶ åœ¨å—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®ç”± React ç»„ä»¶å¤„ç†ã€‚å¦‚æœè®©è¡¨å•æ•°æ®ç”± DOM å¤„ç†æ—¶ï¼Œæ›¿ä»£æ–¹æ¡ˆä¸ºä½¿ç”¨éå—æ§ç»„ä»¶ã€‚å—æ§ç»„ä»¶é€šè¿‡ ref ä» DOM è·å–è¡¨å•å€¼ï¼›é€šè¿‡ defaultValue å±æ€§æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ valueï¼Œcheckbox å’Œ radio åˆ™æ˜¯ defaultCheckedã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½»åº•å¼„æ‡‚ Unicode ç¼–ç ]]></title>
    <url>%2F2017%2F09%2Fencoded%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©ï¼Œåœ¨å­¦ä¹  Node.js ä¸­çš„ Buffer å¯¹è±¡æ—¶ï¼Œæ³¨æ„åˆ°å®ƒçš„ alloc å’Œ from æ–¹æ³•ä¼šé»˜è®¤ç”¨ UTF-8 ç¼–ç ï¼Œåœ¨æ•°ç»„ä¸­æ¯ä½å¯¹åº” 1 å­—èŠ‚çš„åå…­è¿›åˆ¶æ•°ã€‚æƒ³åˆ°äº†ä¹‹é—´å­¦ä¹  ES6 æ—¶å…³äºå­—ç¬¦ä¸²çš„ Unicode è¡¨ç¤ºæ³•ï¼Œçªç„¶å°±å¾ˆæƒ³çŸ¥é“ UTF-16 æ˜¯å¦‚ä½•è¿›è¡Œç¼–ç çš„ï¼Œæˆ‘å°è¯•å°†ä¸€äº›æ±‰å­—è½¬æ¢æˆäºŒè¿›åˆ¶æ•°ï¼Œç„¶åç®€å•çš„æŒ‰ 2 ä¸ªå­—èŠ‚ä¸€ç»„è½¬æ¢æˆåå…­è¿›åˆ¶ï¼Œå‘ç°å¯¹äºé‚£äº›ç ç‚¹è¾ƒå¤§çš„æ±‰å­—ï¼Œç»“æœå¹¶ä¸ä»…ä»…æ˜¯ç®€å•çš„äºŒè¿›åˆ¶è½¬åå…­è¿›åˆ¶ã€‚äºæ˜¯ï¼Œæˆ‘å¼€å§‹åœ¨ç½‘ä¸Šæ‰¾èµ„æ–™ï¼Œå†³å¿ƒå½»åº•å¼„æ˜ç™½ Unicode ç¼–ç ã€‚ ASCIIç åœ¨å­¦æ ¡å­¦ C è¯­è¨€çš„æ—¶å€™ï¼Œäº†è§£åˆ°ä¸€äº›è®¡ç®—æœºå†…éƒ¨çš„æœºåˆ¶ï¼ŒçŸ¥é“æ‰€æœ‰çš„ä¿¡æ¯æœ€ç»ˆéƒ½è¡¨ç¤ºä¸ºä¸€ä¸ªäºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½æœ‰ 0 å’Œ 1 ä¸¤ç§çŠ¶æ€ï¼Œé€šè¿‡ä¸åŒçš„æ’åˆ—ç»„åˆï¼Œä½¿ç”¨ 0 å’Œ 1 å°±å¯ä»¥è¡¨ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰çš„ä¸œè¥¿ï¼Œæ„Ÿè§‰æœ‰ç‚¹ä¸­å›½â€œå¤ªæâ€çš„æ„Ÿè§‰â€”â€”â€œå¤ªæç”Ÿä¸¤ä»ªï¼Œä¸¤ä»ªç”Ÿå››è±¡ï¼Œå››è±¡ç”Ÿå…«å¦â€ã€‚ åœ¨è®¡ç®—æœºç§ä¸­ï¼Œ1 å­—èŠ‚å¯¹åº” 8 ä½äºŒè¿›åˆ¶æ•°ï¼Œè€Œæ¯ä½äºŒè¿›åˆ¶æ•°æœ‰ 0ã€1 ä¸¤ç§çŠ¶æ€ï¼Œå› æ­¤ 1 å­—èŠ‚å¯ä»¥ç»„åˆå‡º 256 ç§çŠ¶æ€ã€‚å¦‚æœè¿™ 256 ä¸­çŠ¶æ€æ¯ä¸€ä¸ªéƒ½å¯¹åº”ä¸€ä¸ªç¬¦å·ï¼Œå°±èƒ½é€šè¿‡ 1 å­—èŠ‚çš„æ•°æ®è¡¨ç¤º 256 ä¸ªå­—ç¬¦ã€‚ç¾å›½äººäºæ˜¯å°±åˆ¶å®šäº†ä¸€å¥—ç¼–ç ï¼ˆå…¶å®å°±æ˜¯ä¸ªå­—å…¸ï¼‰ï¼Œæè¿°è‹±è¯­ä¸­çš„å­—ç¬¦å’Œè¿™ 8 ä½äºŒè¿›åˆ¶æ•°çš„å¯¹åº”å…³ç³»ï¼Œè¿™è¢«ç§°ä¸º ASCII ç ã€‚ ASCII ç ä¸€å…±å®šä¹‰äº† 128 ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚å¤§å†™çš„å­—æ¯ A æ˜¯ 65ï¼ˆè¿™æ˜¯åè¿›åˆ¶æ•°ï¼Œå¯¹åº”äºŒè¿›åˆ¶æ˜¯0100 0001ï¼‰ã€‚è¿™ 128 ä¸ªå­—ç¬¦åªä½¿ç”¨äº† 8 ä½äºŒè¿›åˆ¶æ•°ä¸­çš„åé¢ 7 ä½ï¼Œæœ€å‰é¢çš„ä¸€ä½ç»Ÿä¸€è§„å®šä¸º 0ã€‚ å†å²é—®é¢˜è‹±è¯­ç”¨ 128 ä¸ªå­—ç¬¦æ¥ç¼–ç å®Œå…¨æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯ç”¨æ¥è¡¨ç¤ºå…¶ä»–è¯­è¨€ï¼Œ128 ä¸ªå­—ç¬¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚äºæ˜¯ï¼Œä¸€äº›æ¬§æ´²çš„å›½å®¶å°±å†³å®šï¼Œå°† ASCII ç ä¸­é—²ç½®çš„æœ€é«˜ä½åˆ©ç”¨èµ·æ¥ï¼Œè¿™æ ·ä¸€æ¥å°±èƒ½è¡¨ç¤º 256 ä¸ªå­—ç¬¦ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œåˆæœ‰äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸åŒçš„å›½å®¶çš„å­—ç¬¦é›†å¯èƒ½ä¸åŒï¼Œå°±ç®—å®ƒä»¬éƒ½èƒ½ç”¨ 256 ä¸ªå­—ç¬¦è¡¨ç¤ºå…¨ï¼Œä½†æ˜¯åŒä¸€ä¸ªç ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ 8 ä½äºŒè¿›åˆ¶æ•°ï¼‰è¡¨ç¤ºçš„å­—ç¬¦å¯èƒ½å¯èƒ½ä¸åŒã€‚ä¾‹å¦‚ï¼Œ144 åœ¨é˜¿æ‹‰ä¼¯äººçš„ ASCII ç ä¸­æ˜¯ Ú¯ï¼Œè€Œåœ¨ä¿„ç½—æ–¯çš„ ASCII ç ä¸­æ˜¯ Ñ’ã€‚ å› æ­¤ï¼ŒASCII ç çš„é—®é¢˜åœ¨äºå°½ç®¡æ‰€æœ‰äººéƒ½åœ¨ 0 - 127 å·å­—ç¬¦ä¸Šè¾¾æˆäº†ä¸€è‡´ï¼Œä½†å¯¹äº 128 - 255 å·å­—ç¬¦ä¸Šå´æœ‰å¾ˆå¤šç§ä¸åŒçš„è§£é‡Šã€‚ä¸æ­¤åŒæ—¶ï¼Œäºšæ´²è¯­è¨€æœ‰æ›´å¤šçš„å­—ç¬¦éœ€è¦è¢«å­˜å‚¨ï¼Œä¸€ä¸ªå­—èŠ‚å·²ç»ä¸å¤Ÿç”¨äº†ã€‚äºæ˜¯ï¼Œäººä»¬å¼€å§‹ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨å­—ç¬¦ã€‚ å„ç§å„æ ·çš„ç¼–ç æ–¹å¼æˆäº†ç³»ç»Ÿå¼€å‘è€…çš„å™©æ¢¦ï¼Œå› ä¸ºä»–ä»¬æƒ³æŠŠè½¯ä»¶å–åˆ°å›½å¤–ã€‚äºæ˜¯ï¼Œä»–ä»¬æå‡ºäº†ä¸€ä¸ªâ€œå†…ç è¡¨â€çš„æ¦‚å¿µï¼Œå¯ä»¥åˆ‡æ¢åˆ°ç›¸åº”è¯­è¨€çš„ä¸€ä¸ªå†…ç è¡¨ï¼Œè¿™æ ·æ‰èƒ½æ˜¾ç¤ºç›¸åº”è¯­è¨€çš„å­—æ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨å¤šè¯­ç§ï¼Œé‚£ä¹ˆå°±éœ€è¦é¢‘ç¹çš„åœ¨å†…ç è¡¨å†…è¿›è¡Œåˆ‡æ¢ã€‚ Unicodeæœ€ç»ˆï¼Œç¾å›½äººæ„è¯†åˆ°ä»–ä»¬åº”è¯¥æå‡ºä¸€ç§æ ‡å‡†æ–¹æ¡ˆæ¥å±•ç¤ºä¸–ç•Œä¸Šæ‰€æœ‰è¯­è¨€ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œå‡ºäºè¿™ä¸ªç›®çš„ï¼ŒUnicodeè¯ç”Ÿäº†ã€‚ Unicode å½“ç„¶æ˜¯ä¸€æœ¬å¾ˆåšçš„å­—å…¸ï¼Œè®°å½•ç€ä¸–ç•Œä¸Šæ‰€æœ‰å­—ç¬¦å¯¹åº”çš„ä¸€ä¸ªæ•°å­—ã€‚å…·ä½“æ˜¯æ€æ ·çš„å¯¹åº”å…³ç³»ï¼Œåˆæˆ–è€…è¯´æ˜¯å¦‚ä½•è¿›è¡Œåˆ’åˆ†çš„ï¼Œå°±ä¸æ˜¯æˆ‘ä»¬è€ƒè™‘çš„é—®é¢˜äº†ï¼Œæˆ‘ä»¬åªç”¨çŸ¥é“ Unicode ç»™æ‰€æœ‰çš„å­—ç¬¦æŒ‡å®šäº†ä¸€ä¸ªæ•°å­—ç”¨æ¥è¡¨ç¤ºè¯¥å­—ç¬¦ã€‚ å¯¹äº Unicode æœ‰ä¸€äº›è¯¯è§£ï¼Œå®ƒä»…ä»…åªæ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œè§„å®šäº†ç¬¦åˆå¯¹åº”çš„äºŒè¿›åˆ¶ä»£ç ï¼Œè‡³äºè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç å¦‚ä½•å­˜å‚¨åˆ™æ²¡æœ‰ä»»ä½•è§„å®šã€‚å®ƒçš„æƒ³æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸ºæ¯ä¸ªå­—ç¬¦è§„å®šä¸€ä¸ªç”¨æ¥è¡¨ç¤ºè¯¥å­—ç¬¦çš„æ•°å­—ï¼Œä»…æ­¤è€Œå·²ã€‚ Unicode ç¼–ç æ–¹æ¡ˆä¹‹å‰æåˆ°ï¼ŒUnicode æ²¡æœ‰è§„å®šå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ç å¦‚ä½•å­˜å‚¨ã€‚ä»¥æ±‰å­—â€œæ±‰â€ä¸ºä¾‹ï¼Œå®ƒçš„ Unicode ç ç‚¹æ˜¯ 0x6c49ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ˜¯ 110110001001001ï¼ŒäºŒè¿›åˆ¶æ•°æœ‰ 15 ä½ï¼Œè¿™ä¹Ÿå°±è¯´æ˜äº†å®ƒè‡³å°‘éœ€è¦ 2 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚å¯ä»¥æƒ³è±¡ï¼Œåœ¨ Unicode å­—å…¸ä¸­å¾€åçš„å­—ç¬¦å¯èƒ½å°±éœ€è¦ 3 ä¸ªå­—èŠ‚æˆ–è€… 4 ä¸ªå­—èŠ‚ï¼Œç”šè‡³æ›´å¤šå­—èŠ‚æ¥è¡¨ç¤ºäº†ã€‚ è¿™å°±å¯¼è‡´äº†ä¸€äº›é—®é¢˜ï¼Œè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä½ è¿™ä¸ª 2 ä¸ªå­—èŠ‚è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³åˆ°ï¼Œé‚£å°±å–ä¸ªæœ€å¤§çš„ï¼Œå‡å¦‚ Unicode ä¸­æœ€å¤§çš„å­—ç¬¦ç”¨ 4 å­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºäº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°†æ‰€æœ‰çš„å­—ç¬¦éƒ½ç”¨ 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œä¸å¤Ÿçš„å°±å¾€å‰é¢è¡¥ 0ã€‚è¿™æ ·ç¡®å®å¯ä»¥è§£å†³ç¼–ç é—®é¢˜ï¼Œä½†æ˜¯å´é€ æˆäº†ç©ºé—´çš„æå¤§æµªè´¹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªè‹±æ–‡æ–‡æ¡£ï¼Œé‚£æ–‡ä»¶å¤§å°å°±å¤§å‡ºäº† 3 å€ï¼Œè¿™æ˜¾ç„¶æ˜¯æ— æ³•æ¥å—çš„ã€‚ äºæ˜¯ï¼Œä¸ºäº†è¾ƒå¥½çš„è§£å†³ Unicode çš„ç¼–ç é—®é¢˜ï¼Œ UTF-8 å’Œ UTF-16 ä¸¤ç§å½“å‰æ¯”è¾ƒæµè¡Œçš„ç¼–ç æ–¹å¼è¯ç”Ÿäº†ã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ª UTF-32 çš„ç¼–ç æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°é‚£ç§å®šé•¿ç¼–ç ï¼Œå­—ç¬¦ç»Ÿä¸€ä½¿ç”¨ 4 ä¸ªå­—èŠ‚ï¼Œè™½ç„¶çœ‹ä¼¼æ–¹ä¾¿ï¼Œä½†æ˜¯å´ä¸å¦‚å¦å¤–ä¸¤ç§ç¼–ç æ–¹å¼ä½¿ç”¨å¹¿æ³›ã€‚ UTF-8UTF-8 æ˜¯ä¸€ä¸ªéå¸¸æƒŠè‰³çš„ç¼–ç æ–¹å¼ï¼Œæ¼‚äº®çš„å®ç°äº†å¯¹ ASCII ç çš„å‘åå…¼å®¹ï¼Œä»¥ä¿è¯ Unicode å¯ä»¥è¢«å¤§ä¼—æ¥å—ã€‚ UTF-8 æ˜¯ç›®å‰äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ Unicode ç¼–ç æ–¹å¼ï¼Œå®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯å¯å˜é•¿ã€‚å®ƒå¯ä»¥ä½¿ç”¨ 1 - 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œæ ¹æ®å­—ç¬¦çš„ä¸åŒå˜æ¢é•¿åº¦ã€‚ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š å¯¹äºå•ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œç¬¬ä¸€ä½è®¾ä¸º 0ï¼Œåé¢çš„ 7 ä½å¯¹åº”è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚å› æ­¤ï¼Œå¯¹äºè‹±æ–‡ä¸­çš„ 0 - 127 å·å­—ç¬¦ï¼Œä¸ ASCII ç å®Œå…¨ç›¸åŒã€‚è¿™æ„å‘³ç€ ASCII ç é‚£ä¸ªå¹´ä»£çš„æ–‡æ¡£ç”¨ UTF-8 ç¼–ç æ‰“å¼€å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚ å¯¹äºéœ€è¦ä½¿ç”¨ N ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆN &gt; 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ N ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ N + 1 ä½è®¾ä¸º0ï¼Œå‰©ä½™çš„ N - 1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä½ 10ï¼Œå‰©ä¸‹çš„äºŒè¿›åˆ¶ä½åˆ™ä½¿ç”¨è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹æ¥å¡«å……ã€‚ ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š Unicode åå…­è¿›åˆ¶ç ç‚¹èŒƒå›´ UTF-8 äºŒè¿›åˆ¶ 0000 0000 - 0000 007F 0xxxxxxx 0000 0080 - 0000 07FF 110xxxxx 10xxxxxx 0000 0800 - 0000 FFFF 1110xxxx 10xxxxxx 10xxxxxx 0001 0000 - 0010 FFFF 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx æ ¹æ®ä¸Šé¢ç¼–ç è§„åˆ™å¯¹ç…§è¡¨ï¼Œè¿›è¡Œ UTF-8 ç¼–ç å’Œè§£ç å°±ç®€å•å¤šäº†ã€‚ä¸‹é¢ä»¥æ±‰å­—â€œæ±‰â€ä¸ºåˆ©ï¼Œå…·ä½“è¯´æ˜å¦‚ä½•è¿›è¡Œ UTF-8 ç¼–ç å’Œè§£ç ã€‚ â€œæ±‰â€çš„ Unicode ç ç‚¹æ˜¯ 0x6c49ï¼ˆ110 1100 0100 1001ï¼‰ï¼Œé€šè¿‡ä¸Šé¢çš„å¯¹ç…§è¡¨å¯ä»¥å‘ç°ï¼Œ0x0000 6c49 ä½äºç¬¬ä¸‰è¡Œçš„èŒƒå›´ï¼Œé‚£ä¹ˆå¾—å‡ºå…¶æ ¼å¼ä¸º 1110xxxx 10xxxxxx 10xxxxxxã€‚æ¥ç€ï¼Œä»â€œæ±‰â€çš„äºŒè¿›åˆ¶æ•°æœ€åä¸€ä½å¼€å§‹ï¼Œä»åå‘å‰ä¾æ¬¡å¡«å……å¯¹åº”æ ¼å¼ä¸­çš„ xï¼Œå¤šå‡ºçš„ x ç”¨ 0 è¡¥ä¸Šã€‚è¿™æ ·ï¼Œå°±å¾—åˆ°äº†â€œæ±‰â€çš„ UTF-8 ç¼–ç ä¸º 11100110 10110001 10001001ï¼Œè½¬æ¢æˆåå…­è¿›åˆ¶å°±æ˜¯ 0xE6 0xB7 0x89ã€‚ è§£ç çš„è¿‡ç¨‹ä¹Ÿååˆ†ç®€å•ï¼šå¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯ 0 ï¼Œåˆ™è¯´æ˜è¿™ä¸ªå­—èŠ‚å¯¹åº”ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½1ï¼Œé‚£ä¹ˆè¿ç»­æœ‰å¤šå°‘ä¸ª 1ï¼Œå°±è¡¨ç¤ºè¯¥å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚ã€‚ UTF-16åœ¨äº†è§£ UTF-16 ç¼–ç æ–¹å¼ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹å¦å¤–ä¸€ä¸ªæ¦‚å¿µâ€”â€”â€œå¹³é¢â€ã€‚ åœ¨ä¸Šé¢çš„ä»‹ç»ä¸­ï¼Œæåˆ°äº† Unicode æ˜¯ä¸€æœ¬å¾ˆåšçš„å­—å…¸ï¼Œå¥¹å°†å…¨ä¸–ç•Œæ‰€æœ‰çš„å­—ç¬¦å®šä¹‰åœ¨ä¸€ä¸ªé›†åˆé‡Œã€‚è¿™ä¹ˆå¤šçš„å­—ç¬¦ä¸æ˜¯ä¸€æ¬¡æ€§å®šä¹‰çš„ï¼Œè€Œæ˜¯åˆ†åŒºå®šä¹‰ã€‚æ¯ä¸ªåŒºå¯ä»¥å­˜æ”¾ 65536 ä¸ªï¼ˆ$2^{16}$ï¼‰å­—ç¬¦ï¼Œç§°ä¸ºä¸€ä¸ªå¹³é¢ï¼ˆplaneï¼‰ã€‚ç›®å‰ï¼Œä¸€å…±æœ‰ 17 ä¸ªï¼ˆ$2^{5}$ï¼‰å¹³é¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ª Unicode å­—ç¬¦é›†çš„å¤§å°ç°åœ¨æ˜¯ $2^{21}$ã€‚ æœ€å‰é¢çš„ 65536 ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºåŸºæœ¬å¹³é¢ï¼ˆç®€ç§° BMP ï¼‰ï¼Œå®ƒçš„ç ç‚¹èŒƒå›´æ˜¯ä» 0 åˆ° $2^{16}-1$ï¼Œå†™æˆ 16 è¿›åˆ¶å°±æ˜¯ä» U+0000 åˆ° U+FFFFã€‚æ‰€æœ‰æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ï¼Œè¿™æ˜¯ Unicode æœ€å…ˆå®šä¹‰å’Œå…¬å¸ƒçš„ä¸€ä¸ªå¹³é¢ã€‚å‰©ä¸‹çš„å­—ç¬¦éƒ½æ”¾åœ¨è¾…åŠ©å¹³é¢ï¼ˆç®€ç§° SMP ï¼‰ï¼Œç ç‚¹èŒƒå›´ä» U+010000 åˆ° U+10FFFFã€‚ åŸºæœ¬äº†è§£äº†å¹³é¢çš„æ¦‚å¿µåï¼Œå†è¯´å›åˆ° UTF-16ã€‚UTF-16 ç¼–ç ä»‹äº UTF-32 ä¸ UTF-8 ä¹‹é—´ï¼ŒåŒæ—¶ç»“åˆäº†å®šé•¿å’Œå˜é•¿ä¸¤ç§ç¼–ç æ–¹æ³•çš„ç‰¹ç‚¹ã€‚å®ƒçš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼šåŸºæœ¬å¹³é¢çš„å­—ç¬¦å ç”¨ 2 ä¸ªå­—èŠ‚ï¼Œè¾…åŠ©å¹³é¢çš„å­—ç¬¦å ç”¨ 4 ä¸ªå­—èŠ‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒUTF-16 çš„ç¼–ç é•¿åº¦è¦ä¹ˆæ˜¯ 2 ä¸ªå­—èŠ‚ï¼ˆU+0000 åˆ° U+FFFFï¼‰ï¼Œè¦ä¹ˆæ˜¯ 4 ä¸ªå­—èŠ‚ï¼ˆU+010000 åˆ° U+10FFFFï¼‰ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸¤ä¸ªå­—èŠ‚æ—¶ï¼Œåˆ°åº•æ˜¯æŠŠè¿™ä¸¤ä¸ªå­—èŠ‚å½“ä½œä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸åé¢çš„ä¸¤ä¸ªå­—èŠ‚ä¸€èµ·å½“ä½œä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå·§å¦™çš„åœ°æ–¹ï¼Œåœ¨åŸºæœ¬å¹³é¢å†…ï¼Œä» U+D800 åˆ° U+DFFF æ˜¯ä¸€ä¸ªç©ºæ®µï¼Œå³è¿™äº›ç ç‚¹ä¸å¯¹åº”ä»»ä½•å­—ç¬¦ã€‚å› æ­¤ï¼Œè¿™ä¸ªç©ºæ®µå¯ä»¥ç”¨æ¥æ˜ å°„è¾…åŠ©å¹³é¢çš„å­—ç¬¦ã€‚ è¾…åŠ©å¹³é¢çš„å­—ç¬¦ä½å…±æœ‰ $2^{20}$ ä¸ªï¼Œå› æ­¤è¡¨ç¤ºè¿™äº›å­—ç¬¦è‡³å°‘éœ€è¦ 20 ä¸ªäºŒè¿›åˆ¶ä½ã€‚UTF-16 å°†è¿™ 20 ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆä¸¤åŠï¼Œå‰ 10 ä½æ˜ å°„åœ¨ U+D800 åˆ° U+DBFFï¼Œç§°ä¸ºé«˜ä½ï¼ˆHï¼‰ï¼Œå 10 ä½æ˜ å°„åœ¨ U+DC00 åˆ° U+DFFFï¼Œç§°ä¸ºä½ä½ï¼ˆLï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªè¾…åŠ©å¹³é¢çš„å­—ç¬¦ï¼Œè¢«æ‹†æˆä¸¤ä¸ªåŸºæœ¬å¹³é¢çš„å­—ç¬¦è¡¨ç¤ºã€‚ å› æ­¤ï¼Œå½“æˆ‘ä»¬é‡åˆ°ä¸¤ä¸ªå­—èŠ‚ï¼Œå‘ç°å®ƒçš„ç ç‚¹åœ¨ U+D800 åˆ° U+DBFF ä¹‹é—´ï¼Œå°±å¯ä»¥æ–­å®šï¼Œç´§è·Ÿåœ¨åé¢çš„ä¸¤ä¸ªå­—èŠ‚çš„ç ç‚¹ï¼Œåº”è¯¥åœ¨ U+DC00 åˆ° U+DFFF ä¹‹é—´ï¼Œè¿™å››ä¸ªå­—èŠ‚å¿…é¡»æ”¾åœ¨ä¸€èµ·è§£è¯»ã€‚ æ¥ä¸‹æ¥ï¼Œä»¥æ±‰å­—â€ğ ®·â€ä¸ºä¾‹ï¼Œè¯´æ˜ UTF-16 ç¼–ç æ–¹å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ æ±‰å­—â€ğ ®·â€çš„ Unicode ç ç‚¹ä¸º 0x20BB7ï¼Œè¯¥ç ç‚¹æ˜¾ç„¶è¶…å‡ºäº†åŸºæœ¬å¹³é¢çš„èŒƒå›´ï¼ˆ0x0000 - 0xFFFFï¼‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚é¦–å…ˆç”¨ 0x20BB7 - 0x10000 è®¡ç®—å‡ºè¶…å‡ºçš„éƒ¨åˆ†ï¼Œç„¶åå°†å…¶ç”¨ 20 ä¸ªäºŒè¿›åˆ¶ä½è¡¨ç¤ºï¼ˆä¸è¶³å‰é¢è¡¥ 0 ï¼‰ï¼Œç»“æœä¸º0001000010 1110110111ã€‚æ¥ç€ï¼Œå°†å‰ 10 ä½æ˜ å°„åˆ° U+D800 åˆ° U+DBFF ä¹‹é—´ï¼Œå 10 ä½æ˜ å°„åˆ° U+DC00 åˆ° U+DFFF å³å¯ã€‚U+D800 å¯¹åº”çš„äºŒè¿›åˆ¶æ•°ä¸º 1101100000000000ï¼Œç›´æ¥å¡«å……åé¢çš„ 10 ä¸ªäºŒè¿›åˆ¶ä½å³å¯ï¼Œå¾—åˆ° 1101100001000010ï¼Œè½¬æˆ 16 è¿›åˆ¶æ•°åˆ™ä¸º 0xD842ã€‚åŒç†å¯å¾—ï¼Œä½ä½ä¸º 0xDFB7ã€‚å› æ­¤å¾—å‡ºæ±‰å­—â€ğ ®·â€çš„ UTF-16 ç¼–ç ä¸º 0xD842 0xDFB7ã€‚ Unicode3.0 ä¸­ç»™å‡ºäº†è¾…åŠ©å¹³é¢å­—ç¬¦çš„è½¬æ¢å…¬å¼ï¼š 123H = Math.floor((c-0x10000) / 0x400)+0xD800L = (c - 0x10000) % 0x400 + 0xDC00 æ ¹æ®ç¼–ç å…¬å¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¡ç®—å‡ºå­—ç¬¦çš„ UTF-16 ç¼–ç ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Unicode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Node.js å®ç°ç™¾åº¦ä¸»åŠ¨æ¨é€]]></title>
    <url>%2F2017%2F09%2Fbaidu-push%2F</url>
    <content type="text"><![CDATA[åšå®¢å»ºç«‹å¥½ä¹‹åï¼Œè¿Ÿè¿Ÿæ²¡æœ‰è¢«ç™¾åº¦æ”¶å½•ã€‚ä¹‹å‰æ·»åŠ äº†ç«™ç‚¹åœ°å›¾å’Œ NexT ä¸»é¢˜æä¾›çš„ä¸»åŠ¨æ¨é€ï¼Œçœ‹åˆ°ç™¾åº¦ç«™é•¿å¹³å°è¿˜æ”¯æŒä¸€ä¸ªä¸»åŠ¨æ¨é€åŠŸèƒ½ï¼Œè¯´æ˜¯èƒ½ä½¿æäº¤çš„é¡µé¢è¢«æ›´å¿«çš„æ”¶å½•ã€‚äºæ˜¯ï¼Œå°±ç”¨ Node.js å†™äº†ä¸€ä¸ªä¸»åŠ¨æ¨é€çš„å°å·¥å…·ï¼Œè¯¥å·¥å…·ä¼šæå–æŒ‡å®šç½‘ç«™ sitemap.xml ä¸­çš„ url å¹¶å°†æ‰€æœ‰æå–åˆ°çš„ url é€šè¿‡ç™¾åº¦ç«™é•¿æä¾›çš„ä¸»åŠ¨æ¨é€æ¥å£æ¨é€ç»™ç™¾åº¦ã€‚ å¦‚ä½•ä½¿ç”¨æˆ‘å°†è„šæœ¬æäº¤åˆ°äº† GitHub ä»“åº“ä¸­ï¼Œè¯¥ä»“åº“ä¸­è¿˜åŒ…å«äº†ä¸€äº›å…¶ä»–æˆ‘ç”¨åˆ°çš„è„šæœ¬(ä»“åº“åœ°å€æˆ³è¿™é‡Œï¼‰ã€‚ç›´æ¥å°†è¯¥ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œç„¶åè¿›å…¥åˆ°è„šæœ¬æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå®‰è£…éœ€è¦çš„ä¾èµ–å¹¶æ‰§è¡Œè„šæœ¬å³å¯ã€‚ 1234$ git clone git@github.com:hezhii/scripts.git$ cd scripts/nodejs/pushurl$ yarn install$ URL=&lt;your_site_url&gt; TOKEN=&lt;your_baidu_token&gt; node index.js æ³¨æ„ï¼šè¿è¡Œæœ¬è„šæœ¬éœ€è¦å®‰è£… Node.js å’Œ Yarnã€‚ å®šæ—¶å¯åŠ¨åœ¨å®Œæˆè¿™ä¸ªè„šæœ¬åï¼Œæˆ‘æƒ³æ¯å¤©èƒ½å®šæ—¶çš„æ¨é€ä¸€æ¬¡åšå®¢ä¸­çš„æ–‡ç« ã€‚äºæ˜¯ï¼Œå°±ä¸Šç½‘äº†è§£äº†ä¸€ä¸‹ macOS ä¸Šè®¡åˆ’ä»»åŠ¡ç›¸å…³çš„å†…å®¹ï¼Œç½‘ä¸Šæœ‰å‡ ç§è§£å†³æ€è·¯ã€‚æœ€ç»ˆæˆ‘é€‰æ‹©äº†ä½¿ç”¨ crontab åˆ›å»ºå®šæ—¶ä»»åŠ¡ã€‚ crontab æ˜¯ä¸€ä¸ªå®šæ—¶ä»»åŠ¡çš„è°ƒåº¦å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¾‘å®šæ—¶ä»»åŠ¡åˆ—è¡¨æ–‡ä»¶å°†ä»»åŠ¡æ·»åŠ åˆ° crontabä¸­ã€‚å®šæ—¶ä»»åŠ¡çš„æ ¼å¼å¦‚ä¸‹ï¼š 1234567* * * * * &lt;command to execute&gt;â”‚ â”‚ â”‚ â”‚ â”‚â”‚ â”‚ â”‚ â”‚ â””â”€â”€â”€ day of week (0 - 6) (0 to 6 are Sunday to Saturday, or use names; 7 is Sunday, the same as 0)â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€ month (1 - 12)â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of month (1 - 31)â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hour (0 - 23)â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ min (0 - 59) ä¸‹é¢æˆ‘ä»¥è®¾ç½®æ¯å¤©ä¸Šåˆ 10 ç‚¹æ‰§è¡Œä¸»åŠ¨æ¨é€è„šæœ¬ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚ é¦–å…ˆåœ¨ç»ˆç«¯è¾“å…¥ crontab -e æ‰“å¼€å®šæ—¶ä»»åŠ¡æ–‡ä»¶ï¼Œç„¶åæŒ‰ i ç¼–è¾‘è¯¥æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ’å…¥ä¸‹é¢å†…å®¹ï¼š 10 10 * * * PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin;URL=your_site_url TOKEN=your_baidu_token ~/Development/projects/tools/nodejs/pushurl/index.js &gt;&gt; ~/Desktop/push_log.txt 2&gt;&amp;1 ç„¶åç›´æ¥ :wq ä¿å­˜å¹¶é€€å‡ºå³å¯ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥ crontab -l æŸ¥çœ‹å·²æ·»åŠ çš„å®šæ—¶ä»»åŠ¡ã€‚ æ ¹æ®ä¸Šé¢çš„å‘½ä»¤æ ¼å¼å¯ä»¥çœ‹å‡ºï¼Œå†…å®¹çš„æ„æ€æ˜¯è¯´åœ¨æ¯å¤©çš„ 10 ç‚¹ æ‰§è¡ŒPATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin;URL=your_site_url TOKEN=your_baidu_token ~/Development/projects/tools/nodejs/pushurl/index.js &gt;&gt; ~/Desktop/push_log.txt 2&gt;&amp;1 å‘½ä»¤ã€‚è¿™è¡Œå‘½ä»¤é¦–å…ˆæ·»åŠ äº† PATHï¼Œå› ä¸º crontab åœ¨æ‰§è¡Œæ—¶çš„ PATH æ˜¯ usr/binï¼Œå¯èƒ½ä¼šå¯¼è‡´ node å‘½ä»¤ä¸å­˜åœ¨ã€‚ç„¶åè®¾ç½®äº† URL å’Œ TOKEN ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨æ¥æŒ‡å®šç«™ç‚¹å’Œç›¸åº”çš„æ¥å£ Tokenã€‚æœ€åï¼Œç›´æ¥æ‰§è¡Œäº†ç™¾åº¦æ¨é€è„šæœ¬ï¼ˆéœ€è¦å…ˆé€šè¿‡ chmod æ·»åŠ è„šæœ¬æ‰§è¡Œæƒé™ï¼‰ï¼Œå¹¶å°†ç»“æœè¾“å‡ºåˆ°äº†æ¡Œé¢ä¸Šçš„ puth_log.txt æ–‡ä»¶ä¸­ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ç”¨ä¸Šé¢çš„å‘½ä»¤ï¼Œç›´æ¥ä½¿ç”¨ &lt;node_home&gt;/node &lt;script_home&gt;/index.js æ‰§è¡Œè„šæœ¬ï¼Œå…¶ä¸­ node_path ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚ å¦‚ä½•å®ç°å®ç°èµ·æ¥ååˆ†çš„ç®€å•ï¼Œé¦–å…ˆè¯·æ±‚ç½‘ç«™çš„ç«™ç‚¹åœ°å›¾æ–‡ä»¶ï¼Œç„¶åè§£æ xml æ–‡ä»¶æå–æ¬²æäº¤çš„ urlã€‚æœ€åï¼Œç›´æ¥è°ƒç”¨ç™¾åº¦ç«™é•¿ä¸Šçš„æä¾›çš„æ¥å£ï¼Œå‘é€ä¸€ä¸ª POST è¯·æ±‚å³å¯ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#!/usr/bin/env nodeconsole.log(`[$&#123;new Date().toLocaleString()&#125;] -- å¼€å§‹æ¨é€`);const request = require('request');const parseString = require('xml2js').parseString;const URL = process.env.URL; // æäº¤åˆ°ç™¾åº¦çš„ç½‘å€const TOKEN = process.env.TOKEN; // ç™¾åº¦ç«™é•¿ä¸»åŠ¨æ¨é€tokenfetchUrlDatas().then(urls =&gt; push(urls));function push(urls) &#123; if (!urls || !urls.length) &#123; console.error('æ¬²æ¨é€çš„åœ°å€æ•°ç›®ä¸èƒ½ä¸ºç©º'); return; &#125; const options = &#123; url: `http://data.zz.baidu.com/urls?site=$&#123;URL&#125;&amp;token=$&#123;TOKEN&#125;`, method: 'POST', headers: &#123; 'Content-Type': 'text/plain', &#125;, body: urls.join('\n') &#125;; request(options, (err, res, body) =&gt; &#123; if (err) &#123; console.error(`æ¨é€Urlæ—¶é‡åˆ°é—®é¢˜: $&#123;err.message&#125;`); &#125; else &#123; let result = JSON.parse(body); console.log(`[$&#123;new Date().toLocaleString()&#125;] -- æ¨é€å®Œæˆã€‚æˆåŠŸæ¨é€ $&#123;result.success&#125; æ¡urlï¼Œä»Šå¤©å‰©ä½™ $&#123;result.remain&#125; æ¡å¯æ¨é€urlã€‚`); console.log('------------------------------------'); &#125; &#125;);&#125;function fetchUrlDatas() &#123; return new Promise((resolve, reject) =&gt; &#123; request(`http://$&#123;URL&#125;/sitemap.xml`, (err, res, body) =&gt; &#123; if (err) &#123; console.error(`è·å–sitemapæ—¶é‡åˆ°é—®é¢˜: $&#123;err.message&#125;`); reject(err); &#125; else &#123; extractUrls(body).then( urls =&gt; resolve(urls), err =&gt; reject(err) ); &#125; &#125;); &#125;);&#125;function extractUrls(body) &#123; return new Promise((resolve, reject) =&gt; &#123; parseString(body, (err, result) =&gt; &#123; if (err) &#123; console.error(`è§£æsitemapæ—¶é‡åˆ°é—®é¢˜ï¼š$&#123;err.message&#125;`); reject(err); &#125; else &#123; let urls = result.urlset.url.map((url) =&gt; &#123; return url.loc[0]; &#125;); console.log(`ä»sitemapä¸­æå–$&#123;urls.length&#125;ä¸ªurlï¼š\n$&#123;urls.join('\n')&#125;`); resolve(urls); &#125; &#125;); &#125;)&#125;]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>SEO</tag>
        <tag>macOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ThinkJS 3.0]]></title>
    <url>%2F2017%2F08%2Flearn-thinkjs%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°ThinkJS æ˜¯ä¸€æ¬¾é¢å‘æœªæ¥å¼€å‘çš„ Node.js æ¡†æ¶ï¼Œåº•å±‚åŸºäº Koa 2.x å®ç°ï¼Œå†…æ ¸å°å·§ã€æ€§èƒ½ä¼˜å¼‚ï¼Œå†…ç½®è‡ªåŠ¨ç¼–è¯‘ã€è‡ªåŠ¨æ›´æ–°æœºåˆ¶ï¼Œä½¿ç”¨æ›´ä¼˜é›…çš„ async/await å¤„ç†å¼‚æ­¥é—®é¢˜ï¼Œå…¼å®¹ä¸­é—´ä»¶å¹¶æä¾›äº†æ‰©å±•å’Œé€‚é…å™¨ç­‰æ’ä»¶æ–¹å¼ã€‚é’ˆå¯¹ä¼ä¸šçº§åº”ç”¨å¼€å‘ï¼Œä½¿å¼€å‘å˜å¾—æ›´åŠ ç®€å•ã€é«˜æ•ˆã€‚ ä¸ªäººè§è§£è¿™ä¸€èŠ‚å†…å®¹æ˜¯æˆ‘åœ¨å­¦ä¹ å®Œ ThinkJS åŸºæœ¬ç”¨æ³•ååŠ ä¸Šçš„ï¼Œä¸»è¦è°ˆè°ˆå…³äº ThinkJS çš„ä¸€äº›ä¸ªäººè§è§£ã€‚ è¿™é‡Œä¸å¾—ä¸å¼•ç”¨å®˜æ–¹æ–‡æ¡£ä¸­çš„æ¶æ„å›¾ã€‚ ä»æ¶æ„å›¾æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ° ThinkJS åº•å±‚æ˜¯åŸºäº Koa 2.xï¼Œä¸»è¦åˆ†ä¸ºä¸­é—´ä»¶ã€æ‰©å±•å’Œé€‚é…å™¨ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚å…¶ä¸­ä¸­é—´ä»¶ä¸»è¦ç”¨æ¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå½“ç”¨æˆ·å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚æ—¶ï¼Œé¡ºåºæ‰§è¡Œä¸­é—´ä»¶ï¼Œæœ€ç»ˆè¿”å›ç”¨æˆ·æœŸæœ›çš„ç»“æœã€‚æ‰©å±•å’Œé€‚é…å™¨å¾€å¾€æ­é…ä½¿ç”¨ï¼Œæä¾›ä¸€äº›è¯¸å¦‚ï¼šSessionã€æ¨¡æ¿å¼•æ“ã€æ•°æ®åº“æ¨¡å‹ç­‰æ‰©å±•åŠŸèƒ½ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼ŒThinkJS å…¶å®å°±æ˜¯å¯¹ä¸€ä¸ªåº”ç”¨å¦‚ä½•æ„å»ºè¿›è¡Œäº†åˆ’åˆ†ï¼Œå°†ä¸€ä¸ªåº”ç”¨åˆ†æˆäº†å„ä¸ªæ¨¡å—ï¼ˆä¸­é—´ä»¶ã€æ‰©å±•ï¼‰ï¼Œå„ä¸ªæ¨¡å—å„å¸å…¶èŒï¼Œå¤„ç†è‡ªå·±çš„é€»è¾‘ã€‚æˆ‘ä»¬åªéœ€è¦å°†ç›¸åº”çš„é€»è¾‘å†™åœ¨ç›¸åº”çš„åœ°æ–¹ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„ä¸€äº›é…ç½®ã€‚åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼ŒThinkJS æ ¹æ®é…ç½®æ–‡ä»¶è£…è½½ç›¸åº”çš„æ¨¡å—ï¼Œå½“ç”¨æˆ·è¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒæŒ‰ç…§é…ç½®å°†å¤„ç†æƒäº¤ç»™ç›¸åº”çš„æ¨¡å—ï¼Œå®Œæˆè¯·æ±‚çš„å“åº”ã€‚æ•´ä¸ªåº”ç”¨éƒ½æ˜¯å¯é…ç½®çš„ï¼Œå¤§å¤§å¢å¼ºäº†çµæ´»æ€§ã€‚ ThinkJS çš„å·¥ä½œæ¨¡å¼æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ä¸Šçš„è¯´æ³•ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼Œå¦ä¸€ä¸ªæ˜¯ç”¨æˆ·è¯·æ±‚å¤„ç†ã€‚è¿™ä¸€ç‚¹æˆ‘æ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ï¼Œæˆ‘è§‰å¾—æ‰€æœ‰çš„åå°åº”ç”¨éƒ½æ˜¯è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œéƒ½æ˜¯éœ€è¦å¯åŠ¨æœåŠ¡ç›‘å¬ç«¯å£ï¼Œç„¶åç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ°æ¥ï¼Œå¤„ç†è¯·æ±‚å¹¶å“åº”ã€‚åªä¸è¿‡åœ¨è¿™ä¸¤ä¸ªé˜¶æ®µè¿›è¡Œçš„å…·ä½“å·¥ä½œæœ‰äº›è®¸å·®å¼‚ç½¢äº†ã€‚ThinkJS åœ¨ç³»ç»ŸæœåŠ¡å¯åŠ¨é˜¶æ®µï¼Œé™¤äº†å¯åŠ¨æœåŠ¡ç›‘å¬ç«¯å£å¤–ï¼Œæœ€ä¸»è¦çš„å·¥ä½œå°±æ˜¯è£…é…ã€‚æŒ‰ç…§ ThinkJS çš„æ¶æ„ï¼Œæˆ‘ä»¬éœ€è¦ä»€ä¹ˆåŠŸèƒ½æˆ–è€…éœ€è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œåªéœ€è¦å°†ç›¸åº”çš„ä»£ç å†™åœ¨ç›¸åº”çš„åœ°æ–¹ï¼Œç„¶åæ·»åŠ å“åº”çš„é…ç½®ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿™æ ·åšäº†å°±å¯ä»¥å®ç°æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ï¼Ÿå¿…ç„¶æ˜¯ ThinkJS åœ¨å¯åŠ¨æ—¶è¿›è¡Œäº†è£…é…ã€‚ æˆ‘ä»¬ä»¥åœ¨ ThinkJS ä¸­æ·»åŠ æ¨¡æ¿é¡µé¢åŠŸèƒ½ä¸ºä¾‹ï¼Œæ¥æ¢³ç†ä¸€ä¸‹ ThinkJS æ‰©å±•å’Œé€‚é…å™¨æœºåˆ¶ä»¥åŠç³»ç»ŸæœåŠ¡å¯åŠ¨ã€‚æ‰©å±•åŠŸèƒ½åœ¨æˆ‘ç†è§£å°±æ˜¯åœ¨ç›¸åº”çš„ç¯å¢ƒï¼ˆå…¨å±€ã€ä¸Šä¸‹æ–‡æˆ–è€…æ§åˆ¶å™¨ï¼‰ä¸‹æ·»åŠ äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒæä¾›çš„ä¸€äº›æ–¹æ³•ï¼Œæ¥å®ç°ç›¸åº”çš„åŠŸèƒ½ã€‚æŒ‰ç…§ ThinkJS çš„æ¶æ„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®ç°è¿™ä¸ªå¯¹è±¡ï¼ˆæ‰©å±•ï¼‰æˆ–è€…ç›´æ¥ä½¿ç”¨åˆ«äººçš„ï¼Œè¿™ä¸ªå¯¹è±¡è‡³å°‘æœ‰ä¸€ä¸ª render æ–¹æ³•ï¼Œèƒ½å°†æ¨¡æ¿æ–‡ä»¶æ¸²æŸ“æˆ html æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é…ç½®æ–‡ä»¶ src/config/extend.js ä¸­æˆ‘ä»¬éœ€è¦å¼•å…¥è¿™ä¸ªå¯¹è±¡å¹¶æ·»åŠ è¿™ä¸ªå¯¹è±¡çš„é…ç½®ã€‚æ¥ç€ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨é€‚é…å™¨ä¸­æ·»åŠ ä¸€ä¸ªå…·ä½“çš„æ¨¡æ¿å¼•æ“é…ç½®ã€‚å®Œæˆè¿™å‡ æ­¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸­é€šè¿‡ this.render() æ¸²æŸ“æ¨¡æ¿é¡µé¢äº†ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆç»è¿‡è¿™æ ·çš„å‡ ä¸ªæ­¥éª¤åï¼Œå°±å¯ä»¥ä½¿ç”¨æ¨¡æ¿é¡µé¢äº†å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­ç›´æ¥ä½¿ç”¨ this.render()ï¼Œè‚¯å®šæ˜¯ ThinkJS åœ¨æ§åˆ¶å™¨å¯¹è±¡ä¸Šæ·»åŠ äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ·»åŠ è¿™ä¸ªæ–¹æ³•çš„ä¾æ®åº”è¯¥å°±æ˜¯æˆ‘ä»¬åœ¨æ‰©å±•é…ç½®æ–‡ä»¶ä¸­æ·»åŠ äº† view é…ç½®ï¼Œè€Œæˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªæ–¹æ³•å…·ä½“çš„å®ç°åˆ™æ˜¯æ ¹æ®é€‚é…å™¨ä¸­çš„é…ç½®æ¥çš„ã€‚æ‰©å±•ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªåŠŸèƒ½æ¥å£ï¼Œè€Œé€‚é…å™¨ä¸­è¿›è¡Œå…·ä½“çš„å®ç°ã€‚æœåŠ¡å¯åŠ¨åï¼Œè¯»å–æ‰©å±•é…ç½®ï¼Œè£…é…ç›¸åº”çš„å¯¹è±¡ï¼ˆæ‰©å±•åŠŸèƒ½ï¼‰ã€‚åœ¨å…·ä½“ä½¿ç”¨è¯¥åŠŸèƒ½æ—¶ï¼Œæ ¹æ®é€‚é…å™¨ä¸­çš„é…ç½®ï¼Œä¸åŒçš„ç±»å‹æœ‰ä¸åŒçš„å®ç°ã€‚ åå°åº”ç”¨çš„æ ¸å¿ƒä¸»è¦è¿˜æ˜¯å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œå¤„ç†ç”¨æˆ·è¯·æ±‚ä¸»è¦é€šè¿‡å„ç§ä¸­é—´ä»¶æ¥å®Œæˆã€‚é€šè¿‡ä¸­é—´ä»¶ï¼Œå°†å¤„ç†è¯·æ±‚çš„æµç¨‹æˆªå–æˆäº†å¤šä¸ªéƒ¨åˆ†ï¼Œå„ä¸ªä¸­é—´ä»¶å®Œæˆå„è‡ªçš„åŠŸèƒ½ï¼Œæ•´ä¸ªå¤„ç†è¿‡ç¨‹ç±»ä¼¼äºä¸€ä¸ªæµæ°´çº¿ç”Ÿäº§ã€‚æ‰©å±•ä¹Ÿæ˜¯ä¸ºè¿™ä¸€è¿‡ç¨‹æœåŠ¡çš„ï¼Œå®šä¹‰çš„æ‰©å±•åŠŸèƒ½å¯ä»¥åœ¨è¯·æ±‚å¤„ç†çš„è¿‡ç¨‹ä¸­è°ƒç”¨ï¼Œå»å®Œæˆæ›´åŠ å…·ä½“çš„å·¥ä½œã€‚æˆ‘è§‰å¾—æ‰©å±•æ˜¯ä½œä¸ºä¸­é—´ä»¶çš„ä¸€éƒ¨åˆ†å­˜åœ¨çš„ï¼Œå»å®ç°ä¸­é—´ä»¶ä¸­çš„æŸä¸€ä¸ªå…·ä½“åŠŸèƒ½ã€‚è¯·æ±‚å¤„ç†æµç¨‹å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å„ç§ä¸­é—´ä»¶åˆ†åˆ«å¯¹ request è¿›è¡ŒåŠ å·¥ï¼Œç„¶åç”±è·¯ç”±åˆ†é…ç»™æŒ‡å®šçš„æ§åˆ¶å™¨å»å¤„ç†ï¼Œåœ¨æ§åˆ¶å™¨å¤„ç†ä¹‹å‰ ThinkJS ä¸­ä¼šå…ˆç»è¿‡ä¸€ä¸ªå«åš Logic çš„ä¸­é—´ä»¶ï¼Œå¯¹æ•°æ®è¿›è¡ŒéªŒè¯ã€è¿‡æ»¤ã€‚æ§åˆ¶å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œå¯ä»¥éšæ—¶è°ƒç”¨æ‰©å±•åŠŸèƒ½å»å®ç°æŸä¸ªå…·ä½“çš„æ“ä½œï¼Œæ¥å£éƒ½æ˜¯ç»Ÿä¸€çš„ï¼Œç”±é€‚é…å™¨å»å®Œæˆå„ç§ä¸åŒçš„å®ç°ã€‚æœ€åï¼Œå°†å“åº”ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ é‚£ä¹ˆï¼Œä½¿ç”¨ ThinkJS èƒ½å¸¦æ¥ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿé¦–å…ˆï¼Œåº”ç”¨å¦‚ä½•å¯åŠ¨æˆ‘ä»¬ä¸éœ€è¦èŠ±è´¹å¤ªå¤šçš„ç²¾åŠ›ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶ä»¥åŠ worker å³å¯å®Œæˆã€‚å…¶æ¬¡ï¼Œå¯¹äºè¯·æ±‚å¤„ç†ï¼Œé€šè¿‡ä¸­é—´ä»¶ã€æ‰©å±•å’Œé€‚é…å™¨ä»¥åŠç›¸åº”çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«é€Ÿçš„æ·»åŠ ç›¸åº”çš„å¤„ç†é€»è¾‘ã€‚åŒæ—¶ï¼Œè¿˜å¯ä»¥ä¿è¯ä¸€ä¸ªè‰¯å¥½çš„ä»£ç ç»“æ„ã€‚æœ€åï¼ŒThinkJS æä¾›äº†å¾ˆå¤šé€šç”¨çš„æœºåˆ¶ï¼Œå»è§£å†³ä¸€äº›é€šç”¨é—®é¢˜ï¼Œä¾‹å¦‚ï¼šæ—¥å¿—ã€æ•°æ®æ¨¡å‹ã€Cookieã€é”™è¯¯å¤„ç†ç­‰ã€‚ æ€»ä¹‹ï¼Œå°±ç›®å‰çš„äº†è§£æ¥çœ‹ï¼ŒThinkJS æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºå®ƒå¾ˆç®€å•ï¼Œå¯ä»¥å¿«é€Ÿçš„ä¸Šæ‰‹ã€‚åªè¦æŒ‰ç…§å®ƒçš„æ¶æ„ï¼Œå°±èƒ½å¾ˆè½»æ¾çš„æ„å»ºå‡ºæ•´ä¸ªåº”ç”¨ã€‚æ¡†æ¶æœ¬èº«å¹¶ä¸ç®—å¤æ‚ï¼Œä½†é€šè¿‡ä¸€äº›å†…éƒ¨æœºåˆ¶åˆå¯ä»¥å¢æ·»å¾ˆå¤šä¸°å¯Œçš„åŠŸèƒ½ã€‚å†…ç½®çš„ä¸€äº›åŠŸèƒ½æ¨¡å—ä¹Ÿè§£å†³çš„äº†å¾ˆå¤šé€šç”¨çš„é—®é¢˜ã€‚æ›´å…·ä½“çš„ä¼˜ç¼ºç‚¹è¿˜å¾—å¾…å…·ä½“ä½¿ç”¨åæ‰çŸ¥é“ã€‚ å¼€å§‹ä½¿ç”¨ThinkJSæä¾›äº†è„šæ‰‹æ¶å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¦æ±‚ Node.js çš„ç‰ˆæœ¬å¤§äº 6.xã€‚ 12$ npm install -g think-cli$ thinkjs new &lt;project-name&gt; æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œå°±å¯ä»¥åˆ›å»ºå‡ºä¸€ä¸ªé¡¹ç›®éª¨æ¶ã€‚è¿›å…¥è¯¥é¡¹ç›®ï¼Œå®‰è£…ä¾èµ–åå¯ç›´æ¥å¯åŠ¨ã€‚ 123$ cd &lt;project-name&gt;$ npm install$ npm start å¯åŠ¨åï¼Œè®¿é—® http://127.0.0.1:8360 å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–é¡µé¢ã€‚ é€šè¿‡è„šæ‰‹æ¶æ„å»ºçš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132.|--- development.js //å¼€å‘ç¯å¢ƒä¸‹çš„å…¥å£æ–‡ä»¶|--- nginx.conf //nginx é…ç½®æ–‡ä»¶|--- package.json|--- pm2.json //pm2 é…ç½®æ–‡ä»¶|--- production.js //ç”Ÿäº§ç¯å¢ƒä¸‹çš„å…¥å£æ–‡ä»¶|--- README.md|--- src| |--- bootstrap //å¯åŠ¨è‡ªåŠ¨æ‰§è¡Œç›®å½•| | |--- master.js //Master è¿›ç¨‹ä¸‹è‡ªåŠ¨æ‰§è¡Œ| | |--- worker.js //Worker è¿›ç¨‹ä¸‹è‡ªåŠ¨æ‰§è¡Œ| |--- config //é…ç½®æ–‡ä»¶ç›®å½•| | |--- adapter.js // adapter é…ç½®æ–‡ä»¶| | |--- config.js // é»˜è®¤é…ç½®æ–‡ä»¶| | |--- config.production.js //ç”Ÿäº§ç¯å¢ƒä¸‹çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œå’Œ config.js åˆå¹¶| | |--- extend.js //extend é…ç½®æ–‡ä»¶| | |--- middleware.js //middleware é…ç½®æ–‡ä»¶| | |--- router.js //è‡ªå®šä¹‰è·¯ç”±é…ç½®æ–‡ä»¶| |--- controller //æ§åˆ¶å™¨ç›®å½•| | |--- base.js| | |--- index.js| |--- logic //logic ç›®å½•| | |--- index.js| |--- model //æ¨¡å‹ç›®å½•| | |--- index.js|--- view //æ¨¡æ¿ç›®å½•| |--- index_index.html|--- www| |--- static //é™æ€èµ„æºç›®å½•| | |--- css| | |--- img| | |--- js åŸºæœ¬ç”¨æ³•å…³äºThinkJSçš„åŸºæœ¬ç”¨æ³•ä¸»è¦æ˜¯å‚è€ƒäº†å®˜æ–¹æ–‡æ¡£çš„å†…å®¹ï¼Œæ ¹æ®æ–‡æ¡£è¯´æ˜ä¾æ¬¡å°è¯•äº†ç›¸åº”çš„æ¨¡å—å¹¶è®°å½•ä¸‹æ ¸å¿ƒçš„å†…å®¹ã€‚ é…ç½®æ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½æ”¾åœ¨ src/config/ ç›®å½•ä¸‹ï¼Œæ ¹æ®ä¸åŒçš„åŠŸèƒ½åˆ’åˆ†ä¸ºä¸åŒçš„é…ç½®æ–‡ä»¶ã€‚å…¶ä¸­ï¼Œé€šç”¨é…ç½®å’Œé€‚é…å™¨é…ç½®æ”¯æŒåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹é…ç½®ä¸åŒçš„å€¼ï¼Œåªéœ€è¦å°†é…ç½®æ–‡ä»¶å‘½ä»¤ä¸º [name].[env].js è¿™ç§å½¢å¼å³å¯ã€‚ä¾‹å¦‚ï¼šconfig.production.js è¡¨æ˜è¿™æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­çš„é…ç½®ï¼Œè¯¥æ–‡ä»¶ä¸­çš„ key ä¼šè¦†ç›– config.js ä¸­åŒåçš„ keyã€‚è¿è¡Œç¯å¢ƒåœ¨å®ä¾‹åŒ– Application å¯¹è±¡æ—¶é€šè¿‡ env å‚æ•°æŒ‡å®šï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 12345const instance = new Application(&#123; ROOT_PATH: __dirname, proxy: true, // use proxy env: 'production'&#125;); åœ¨ç¨‹åºè¿è¡Œæ—¶å¯ä»¥è·å–å’ŒåŠ¨æ€è®¾ç½®é…ç½®ï¼Œè·å–é…ç½®å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡ã€controller å’Œå…¨å±€çš„ think å¯¹è±¡ï¼ŒåŠ¨æ€è®¾ç½®åªèƒ½é€šè¿‡ thinkã€‚ä¸‹é¢æ˜¯è·å–å’Œè®¾ç½®é…ç½®çš„ä¾‹å­ã€‚ 123456// HTTP æœåŠ¡å¯åŠ¨å‰æ‰§è¡Œthink.beforeStartServer(async () =&gt; &#123; console.log(`å…¨å±€ç¯å¢ƒä¸‹è¯»å–ç«¯å£å·é…ç½®: $&#123;think.config('port')&#125;`); console.log('åŠ¨æ€é…ç½®ç«¯å£å·ä¸º: 8088'); think.config('port', '8088'); // åŠ¨æ€é…ç½®ç«¯å£å·ã€‚&#125;); é€šè¿‡ DEBUG=think-loader-config-* npm start å‘½ä»¤æ¥å¯åŠ¨é¡¹ç›®å¯ä»¥åœ¨æ§åˆ¶å°æŸ¥çœ‹é…ç½®æ–‡ä»¶çš„è¯¦ç»†åŠ è½½æƒ…å†µã€‚ ä¸Šä¸‹æ–‡ Context æ˜¯ Koa ä¸­å¤„ç†ç”¨æˆ·è¯·æ±‚ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè´¯ç©¿æ•´ä¸ªè¯·æ±‚ç”Ÿå‘½å‘¨æœŸã€‚ä¸€èˆ¬åœ¨ middlewareã€controllerã€logic ä¸­ä½¿ç”¨ï¼Œç®€ç§°ä¸º ctxã€‚ Context ä¸­åŒ…å«äº†è®¸å¤šä¿¡æ¯ä»¥åŠä¸€äº›ä¾¿æ·æ“ä½œï¼Œä¸‹é¢åˆ—ä¸¾éƒ¨åˆ†ï¼Œè¯¦æƒ…è§ ThinkJS æ–‡æ¡£ å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡è·å– request å’Œ response å¯¹è±¡ã€‚ å¯ä»¥è¿‡ctx.stateåœ¨ä¸­é—´ä»¶ä¸­ä¼ é€’ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ç›´æ¥æ·»åŠ åˆ° ctx ä¸Šã€‚ ctx.throw æŠ›å‡ºåŒ…å« .status å±æ€§çš„å¼‚å¸¸ï¼Œé»˜è®¤çŠ¶æ€ç ä¸º 500ã€‚ ctx.json è¾“å‡º JSON æ ¼å¼æ•°æ®ã€‚ ctx.success å’Œ ctx.fail è¾“å‡ºæˆåŠŸå’Œå¤±è´¥æ•°æ®ã€‚ ctx.confg è¯»å–é…ç½®ã€‚ ä¸­é—´ä»¶ThinkJS ä¸­é€šè¿‡ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶æ¥ç®¡ç†ä¸­é—´ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸º src/config/middleware.jsã€‚ä¸­é—´ä»¶åˆ†ä¸ºæ¡†æ¶å†…ç½®ä¸­é—´ä»¶å’Œé¡¹ç›®è‡ªå®šä¹‰ä¸­é—´ä»¶ä¸¤ç§ã€‚å†…ç½®çš„ä¸­é—´ä»¶å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼ç›´æ¥å¼•ç”¨ï¼Œå†…ç½®ä¸­é—´ä»¶æœ‰ä¸‹é¢è¿™äº›ï¼š meta æ˜¾ç¤ºä¸€äº› meta ä¿¡æ¯ï¼Œå¦‚ï¼šå‘é€ ThinkJS çš„ç‰ˆæœ¬å·ï¼Œæ¥å£çš„å¤„ç†æ—¶é—´ç­‰ç­‰ã€‚ resource å¤„ç†é™æ€èµ„æºï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­ï¼Œç›´æ¥ç”¨ webserver å¤„ç†å³å¯ã€‚ trace å¤„ç†æŠ¥é”™ï¼Œå¼€å‘ç¯å¢ƒå°†è¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯æ˜¾ç¤ºå¤„ç†ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ˜¾ç¤ºé”™è¯¯é¡µé¢ã€‚ payload å¤„ç†è¡¨å•æäº¤å’Œæ–‡ä»¶ä¸Šä¼ ï¼Œç±»ä¼¼äº koa-bodyparser ç­‰ middlewareã€‚ router è·¯ç”±è§£æï¼ŒåŒ…å«è‡ªå®šä¹‰è·¯ç”±è§£æã€‚ logic logic è°ƒç”¨ï¼Œæ•°æ®æ ¡éªŒã€‚ controller controller å’Œ action è°ƒç”¨ã€‚ é¡¹ç›®è‡ªå®šä¹‰çš„ä¸­é—´ä»¶å®šä¹‰åœ¨ src/middleware ç›®å½•ä¸‹ï¼Œç„¶åä¹Ÿå¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼å¼•ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—å½“å‰è¯·æ±‚æ‰§è¡Œæ—¶é—´çš„ä¸­é—´ä»¶çš„ä¾‹å­ã€‚ é¦–å…ˆåœ¨ src/middleware ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª compute-request-time.js çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122const defaultOptions = &#123; consoleExecTime: false // æ˜¯å¦æ‰“å°æ‰§è¡Œæ—¶é—´çš„é…ç½®&#125;module.exports = (options = &#123;&#125;) =&gt; &#123; // åˆå¹¶ä¼ é€’è¿›æ¥çš„é…ç½® options = Object.assign(&#123;&#125;, defaultOptions, options); return (ctx, next) =&gt; &#123; if (!options.consoleExecTime) &#123; return next(); // å¦‚æœä¸éœ€è¦æ‰“å°æ‰§è¡Œæ—¶é—´ï¼Œç›´æ¥è°ƒç”¨åç»­æ‰§è¡Œé€»è¾‘ &#125; const startTime = Date.now(); let err = null; // è°ƒç”¨ next ç»Ÿè®¡åç»­æ‰§è¡Œé€»è¾‘çš„æ‰€æœ‰æ—¶é—´ return next().catch(e =&gt; &#123; err = e; // è¿™é‡Œå…ˆå°†é”™è¯¯ä¿å­˜åœ¨ä¸€ä¸ªé”™è¯¯å¯¹è±¡ä¸Šï¼Œæ–¹ä¾¿ç»Ÿè®¡å‡ºé”™æƒ…å†µä¸‹çš„æ‰§è¡Œæ—¶é—´ &#125;).then(() =&gt; &#123; const endTime = Date.now(); console.log(`request exec time: $&#123;endTime - startTime&#125;ms`); if (err) return Promise.reject(err); // å¦‚æœåç»­æ‰§è¡Œé€»è¾‘æœ‰é”™è¯¯ï¼Œåˆ™å°†é”™è¯¯è¿”å› &#125;) &#125;&#125; æ¥ç€åœ¨é…ç½®æ–‡ä»¶ src/config/middleware.js ä¸­å¢åŠ å¦‚ä¸‹é…ç½®ï¼š 12345678module.exports = [&#123; handle: 'compute-request-time', enable: think.env === 'development', // è¿™ä¸ªä¸­é—´ä»¶åªåœ¨å¼€å‘ç¯å¢ƒä¸‹ç”Ÿæ•ˆ options: &#123; consoleExecTime: true &#125;, match: '/' // è¯·æ±‚çš„ URL æ˜¯ / æ‰“å¤´æ—¶è¿™ä¸ªä¸­é—´ä»¶æ‰å¯ç”¨&#125;]; å‚æ•°åŠå«ä¹‰å¦‚ä¸‹ï¼š handle ä¸­é—´ä»¶çš„å¤„ç†å‡½æ•°ã€‚ enable æ˜¯å¦å¯ç”¨ä¸­é—´ä»¶ã€‚ options ä¼ é€’ç»™ä¸­é—´ä»¶çš„å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è¿”å›ã€‚ match åŒ¹é…ç‰¹å®šçš„è§„åˆ™åæ‰æ‰§è¡Œè¯¥ä¸­é—´ä»¶ï¼Œæ”¯æŒäºŒç§æ–¹å¼ï¼Œä¸€ç§æ˜¯è·¯å¾„åŒ¹é…ï¼Œä¸€ç§æ˜¯è‡ªå®šä¹‰å‡½æ•°åŒ¹é…ã€‚ æ³¨æ„ï¼š å¦‚æœä¸­é—´ä»¶æ²¡æœ‰å®šä¹‰åœ¨ src/middleware/ ç›®å½•ä¸‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¶éœ€è¦å¼•å…¥ã€‚ ä¸­é—´ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯é…ç½®æ–‡ä»¶ä¸­çš„é¡ºåºã€‚ LogicLogic å±‚åœ¨ Controller ä¹‹å‰æ‰§è¡Œï¼Œä¸»è¦æ˜¯å®Œæˆä¸€äº›è¿‡æ»¤ã€æ•°æ®æ ¡éªŒã€æƒé™åˆ¤æ–­ç­‰ä¸€äº›é€»è¾‘æ€§ä¸æ˜¯ç‰¹åˆ«å¼ºä½†åˆå’Œä¸šåŠ¡é€»è¾‘ç›¸å…³çš„å·¥ä½œï¼Œé™ä½ Action ä¸­ä»£ç çš„å¤æ‚ç¨‹åº¦ã€‚Logic é‡Œçš„ Action å’Œæ§åˆ¶å™¨é‡Œçš„ Action ä¸€ä¸€å¯¹åº”ï¼Œç³»ç»Ÿåœ¨è°ƒç”¨æ§åˆ¶å™¨é‡Œçš„ Action ä¹‹å‰ä¼šè‡ªåŠ¨è°ƒç”¨ Logic é‡Œçš„ Actionã€‚ Logic ä»£ç ç±»ä¼¼å¦‚ä¸‹ï¼š 1234567891011module.exports = class extends think.Logic &#123; __before() &#123; // todo &#125; indexAction() &#123; // todo &#125; __after() &#123; // todo &#125;&#125; è¦ç‚¹ï¼š Logic å’Œ Controller çš„æ–‡ä»¶ååº”è¯¥ç›¸åŒã€‚ Logic ä¸­è¿›è¡Œæ•°æ®æ ¡éªŒæ—¶ï¼Œä¼šæ ¹æ®è¯·æ±‚ç±»å‹è‡ªåŠ¨è·å–ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è·å–è®¾ç½®åˆ°æ•°æ®çš„ value å±æ€§ä¸Šã€‚ æ§åˆ¶å™¨æ§åˆ¶å™¨è´Ÿè´£å¤„ç†ç”¨æˆ·è¯·æ±‚çš„é€»è¾‘ï¼Œæ¯ä¸€ä¸ªæ“ä½œå¯¹åº”ä¸€ä¸ª Actionã€‚Controller ä»£ç ç±»ä¼¼å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324const Base = require('./base.js');module.exports = class extends Base &#123; __before() &#123; console.log('Before user action.'); &#125; indexAction() &#123; this.body = 'hello world!'; &#125; profileAction() &#123; this.body = 'User profile!'; &#125; __call() &#123; //å¦‚æœç›¸åº”çš„Actionä¸å­˜åœ¨åˆ™è°ƒç”¨æ”¹æ–¹æ³• this.body = 'Not Found'; &#125; __after() &#123; console.log('After user action.'); &#125;&#125;; è®¿é—® /user æˆ– /user/index ä¼šæ‰§è¡Œ indexActionï¼›è®¿é—® /user/profile ä¼šæ‰§è¡Œ profileActionã€‚ åœ¨ controller ç›®å½•ä¸‹åˆ›å»ºå­ç›®å½•å¹¶æ·»åŠ  controller å¯ä»¥è¿›è¡Œå¤šçº§åŒ¹é…ã€‚ä¾‹å¦‚ï¼šåœ¨ controller ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª user ç›®å½•å¹¶æ·»åŠ ä¸€ä¸ªåä¸º login.js çš„æ§åˆ¶å™¨ï¼Œå½“è®¿é—® /user/login æ—¶ï¼Œä¼šæ‰§è¡Œ login.js ä¸­çš„ indexActionã€‚ Controller é‡Œçš„å¤„ç†é¡ºåºä¾æ¬¡ä¸º __beforeã€xxxActionã€__afterï¼Œreturn false å¯ä»¥æå‰ç»“æŸè¯·æ±‚ã€‚ ViewThinkJS 3.0 æ²¡æœ‰å†…ç½® View åŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡ Extend å’Œ Adapter ä¸­çš„é…ç½®æ¥å®ç°ï¼Œå…·ä½“å¦‚ä½•é…ç½®å‚è€ƒå®˜ç½‘æ–‡æ¡£ã€‚ é…ç½®äº† Extend å’Œ Adapter åï¼Œå°±å¯ä»¥åœ¨ Controller é‡Œä½¿ç”¨äº†ï¼š 12345678910module.exports = class extends think.Controller &#123; indexAction()&#123; this.assign('title', 'thinkjs'); //ç»™æ¨¡æ¿èµ‹å€¼ /* * æ¸²æŸ“æ¨¡æ¿ï¼Œå®é™…ä¸Šè°ƒç”¨äº† this.reader() æ–¹æ³•è·å–æ¸²æŸ“åçš„å†…å®¹ï¼Œç„¶åå°†å†…å®¹èµ‹å€¼åˆ° ctx.bodyä¸Šã€‚ */ return this.display(); &#125;&#125; åœ¨æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ assign æ–¹æ³•æ·»åŠ çš„å˜é‡ã€‚åŒæ—¶ï¼Œç³»ç»Ÿåœ¨æ¸²æŸ“æ¨¡æ¿çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ³¨å…¥ controllerã€configã€ctx å˜é‡ï¼Œä»¥ä¾¿äºåœ¨æ¨¡æ¿é‡Œç›´æ¥ä½¿ç”¨ã€‚ è·¯ç”±ä¸Šé¢è¯´åˆ°å½“è®¿é—® /user/profile æ—¶ï¼Œä¼šæ‰§è¡Œ user æ§åˆ¶å™¨ä¸­çš„ profileActionï¼Œè¿™ä¸€è¿‡ç¨‹ç”±è·¯ç”±æ¥å®Œæˆã€‚ThinkJS ä½¿ç”¨ think-router ä¸­é—´ä»¶ã€‚ å½“ Controller æœ‰å­ç›®å½•æ—¶ï¼Œä¼šä¼˜å…ˆåŒ¹é…å­ Controllerï¼Œç„¶åæ‰åŒ¹é… actionã€‚ æ”¯æŒåœ¨ src/config/router.js ä¸­é…ç½®è‡ªå®šä¹‰è·¯ç”±è§„åˆ™ï¼Œè·¯ç”±è§„åˆ™ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234module.exports = [ [/libs\/(.*)/i, '/libs/:1', 'get'], [/fonts\/(.*)/i, '/fonts/:1', 'get,post'],]; æ¯ä¸€æ¡è·¯ç”±è§„åˆ™ä¹Ÿä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„é¡¹åˆ†åˆ«å¯¹åº”ä¸ºï¼šmatchã€pathnameã€methodã€optionsï¼š match {String | RegExp} pathname åŒ¹é…è§„åˆ™ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™ã€‚å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¼šé€šè¿‡ path-to-regexp æ¨¡å—è½¬ä¸ºæ­£åˆ™ã€‚ pathname {String} åŒ¹é…åæ˜ å°„åçš„ pathnameï¼Œåç»­ä¼šæ ¹æ®è¿™ä¸ªæ˜ å°„çš„ pathname è§£æå‡ºå¯¹åº”çš„ controllerã€actionã€‚ method {String} è¯¥æ¡è·¯ç”±è§„åˆ™æ”¯æŒçš„è¯·æ±‚ç±»å‹ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰ã€‚å¤šä¸ªè¯·æ±‚ç±»å‹ä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œå¦‚ï¼šget,postã€‚ options {Object} é¢å¤–çš„é€‰é¡¹ï¼Œå¦‚ï¼šè·³è½¬æ—¶æŒ‡å®š statusCodeã€‚ é€‚é…å™¨Adapter æ˜¯ä¸€ç±»åŠŸèƒ½çš„ä¸åŒå®ç°ï¼Œè¿™äº›å®ç°æä¾›ä¸€å¥—ç›¸åŒçš„æ¥å£ï¼Œä¾‹å¦‚ï¼šå¤šç§æ•°æ®åº“ã€æ¨¡æ¿å¼•æ“ã€‚Adapter ä¸€èˆ¬æ˜¯ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨çš„ï¼Œè€Œæ˜¯é…åˆå¯¹åº”çš„æ‰©å±•ä¸€èµ·ä½¿ç”¨ã€‚ Adapter å¯ä»¥æ ¹æ®ä¸åŒçš„è¿è¡Œç¯å¢ƒè®¾ç½®ä¸åŒçš„é…ç½®ï¼Œä¾‹å¦‚ï¼šåˆ›å»º adapter.production.js æ–‡ä»¶æŒ‡å®šç”Ÿäº§ç¯å¢ƒä¸‹çš„é€‚é…å™¨é…ç½®ã€‚ é™¤äº†å¼•å…¥å¤–éƒ¨çš„ Adapter å¤–ï¼Œé¡¹ç›®å†…ä¹Ÿå¯ä»¥åˆ›å»º Adapter æ¥ä½¿ç”¨ã€‚Adapter æ–‡ä»¶æ”¾åœ¨ src/adapter/ ç›®å½•ä¸‹ï¼ˆå¤šæ¨¡å—é¡¹ç›®æ”¾åœ¨ src/common/adapter/ï¼‰ï¼Œå¦‚ï¼šsrc/adapter/cache/xcache.jsï¼Œè¡¨ç¤ºåŠ äº†ä¸€ä¸ªåä¸º xcache çš„ cache Adapter ç±»å‹ï¼Œç„¶åè¯¥æ–‡ä»¶å®ç° cache ç±»å‹ä¸€æ ·çš„æ¥å£å³å¯ã€‚ æ‰©å±•æ‰©å±•åœ¨ src/config/extend.js æ–‡ä»¶ä¸­é…ç½®ï¼Œæ ¼å¼ä¸ºæ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345const view = require('think-view');module.exports = [ view //make application support view]; æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ï¼Œæ–‡ä»¶æ”¾åœ¨ src/extend/ ç›®å½•ä¸‹ï¼Œä¸‹é¢æ˜¯ç»™ ctx æ·»åŠ åˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯ä¸æ˜¯æ‰‹æœºè®¿é—®çš„æ‰©å±•çš„ä¾‹å­ã€‚ é¦–å…ˆåœ¨ src/extend ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª context.js çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š 1234567module.exports = &#123; get isMobile() &#123; const userAgent = this.userAgent.toLowerCase(); const mList = ['iphone', 'android']; return mList.some(item =&gt; userAgent.indexOf(item) &gt; -1); &#125;&#125; è¿™æ ·å°±å¯ä»¥é€šè¿‡ ctx.isMobile æ¥åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºè®¿é—®äº†ã€‚ å¼‚æ­¥/é”™è¯¯å¤„ç†è¿™ä¸€éƒ¨åˆ†ä¸»è¦åˆ©ç”¨äº† ES2017 æ ‡å‡†ä¸­å¼•å…¥çš„ async å‡½æ•°ã€‚åŸºæœ¬çš„ç”¨æ³•ä¸ async å‡½æ•°çš„ç”¨æ³•ç›¸åŒï¼Œæ²¡æœ‰å¤ªå¤šçš„å°è£…ã€‚ ç”±äº Node.js åŸç”Ÿçš„å¼‚æ­¥æ–¹æ³•éƒ½æ˜¯ callback æ–¹å¼ï¼Œä¸ºäº†æ–¹ä¾¿çš„å°† callback æ¥å£å°è£…ä¸º Promise æ¥å£ï¼ŒThinkJS æä¾›äº† think.promisify ç”¨æ¥å¿«é€Ÿçš„å°è£…ï¼Œå¦‚ï¼š 1234567const fs = require('fs');const readFile = think.promisify(fs.readFile, fs);const parseFile = async (filepath) =&gt; &#123; const content = await readFile(filepath, 'utf8'); // readFile è¿”å› Promise doSomethingWithContent();&#125; ä½†æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åªèƒ½å°è£… callback(err, data) å½¢å¼çš„å›è°ƒå‡½æ•°ï¼Œå¦åˆ™åªèƒ½æ‰‹åŠ¨å°è£…ã€‚ é”™è¯¯å¤„ç†é™¤äº† try/catch å’Œ then/catch ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ª trace ä¸­é—´ä»¶æ¥ç»Ÿä¸€å¤„ç†è¿è¡Œæ—¶çš„å¼‚å¸¸ã€‚ æ¨¡å‹/æ•°æ®åº“ThinkJS é»˜è®¤æ²¡æœ‰æä¾›æ¨¡å‹åŠŸèƒ½ï¼Œè€Œæ˜¯é€šè¿‡æ‰©å±•çš„æ–¹å¼å®ç°ï¼Œå¯¹åº”çš„æ¨¡å—ä¸º think-modelã€‚åœ¨ src/config/extend.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®å³å¯ï¼š 12345const model = require('think-model');module.exports = [ model(think.app) // è®©æ¡†æ¶æ”¯æŒæ¨¡å‹çš„åŠŸèƒ½] æ·»åŠ äº†æ¨¡å‹æ‰©å±•åï¼Œå°±å¯ä»¥é€šè¿‡ think.modelã€ctx.modelã€controller.modelç­‰è¿›è¡Œä½¿ç”¨ã€‚ æ¨¡å‹å¯ä»¥æ”¯æŒå¤šç§æ•°æ®åº“ï¼Œåœ¨ scr/config/adapter.js ä¸­é…ç½®å³å¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223const mysql = require('think-model-mysql');exports.model = &#123; type: 'mysql', // é»˜è®¤ä½¿ç”¨çš„ç±»å‹ï¼Œè°ƒç”¨æ—¶å¯ä»¥æŒ‡å®šå‚æ•°åˆ‡æ¢ common: &#123; // é€šç”¨é…ç½® logConnect: isDev, // æ˜¯å¦æ‰“å°æ•°æ®åº“è¿æ¥ä¿¡æ¯ logSql: isDev, // æ˜¯å¦æ‰“å° SQL è¯­å¥ logger: msg =&gt; think.logger.info(msg) // æ‰“å°ä¿¡æ¯çš„ logger &#125;, mysql: &#123; // mysql é…ç½® handle: mysql, database: '', prefix: 'think_', encoding: 'utf8', host: '127.0.0.1', port: '', user: 'root', password: 'root', dateStrings: true &#125;, sqlite: &#123; // sqlite é…ç½® &#125;,&#125;; åœ¨é€‚é…å™¨ä¸­æ·»åŠ ç›¸å…³é…ç½®åï¼Œåœ¨ä½¿ç”¨æ¨¡å‹æ—¶æŒ‡å®šç›¸åº”çš„ç±»å‹å³å¯ã€‚ä¾‹å¦‚ä½¿ç”¨ sqlite çš„é…ç½®ï¼šconst user = think.model(&#39;user&#39;, &#39;sqlite&#39;); æ¨¡å‹æ–‡ä»¶åˆ›å»ºåœ¨ src/model ç›®å½•ä¸‹ï¼Œç»§æ‰¿æ¨¡å‹åŸºç±» think.Modelï¼Œmodel ä»£ç ç±»ä¼¼å¦‚ä¸‹ï¼š 123456// src/model/user.jsmodule.exports = class extends think.Model &#123; getList() &#123; return this.field('name').select(); &#125;&#125; å®šä¹‰äº†æ¨¡å‹åï¼Œé€šè¿‡ const usreModel = think.model(&#39;user&#39;, &#39;sqlite&#39;) è·å–æ¨¡å‹å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨æ¨¡å‹æä¾›çš„æ–¹æ³• usreModel.getList()ã€‚ think.Model åŸºç±»æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•è¿›è¡Œ CRUD æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›æ–¹æ³•è¿›è¡Œå°è£…ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ã€‚å…·ä½“æœ‰å“ªäº›æ–¹æ³•è¯¦è§å®˜ç½‘æ–‡æ¡£ã€‚ think-model æ‰©å±•ä¸»è¦ç”¨æ¥æ”¯æŒå…³ç³»å‹æ•°æ®åº“ï¼Œè¿˜æä¾›äº† think-mongo æ‰©å±•æ¥æ”¯æŒ MongoDBï¼Œæ·»åŠ å¦‚ä¸‹æ‰©å±•å³å¯ã€‚ 12345const mongo = require('think-mongo');module.exports = [ mongo(think.app) // è®©æ¡†æ¶æ”¯æŒæ¨¡å‹çš„åŠŸèƒ½] æ·»åŠ æ‰©å±•åï¼Œå¯ä»¥é€šè¿‡ think.mongoã€ctx.mongo ç­‰æ–¹æ³•ä½¿ç”¨ã€‚ MondoDB æ•°æ®åº“é€‚é…å™¨çš„é…ç½®å¤ç”¨äº†å…³ç³»å‹æ•°æ®çš„é…ç½®ã€‚æ¨¡å‹çš„å®šä¹‰å’Œå…³ç³»å‹æ•°æ®åº“ç±»ä¼¼ï¼Œåªæ˜¯ç»§æ‰¿çš„æ˜¯ think.mongoã€‚å®˜æ–¹API]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>ThinkJS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨è½¯ä»¶å®‰è£…]]></title>
    <url>%2F2017%2F08%2Fsoftware-install%2F</url>
    <content type="text"><![CDATA[æœ‰äº›è½¯ä»¶çš„æºä¸å¤ªå¥½ï¼Œæœ‰çš„ä¹Ÿè¿˜éœ€è¦ç ´è§£ã€‚è¿™é‡Œè®°å½•ä¸‹ä¸€äº›å®‰è£…æ—¶å¯èƒ½éœ€è¦æ‰¾ä¸€ä¼šåœ¨å“ªé‡Œä¸‹è½½æˆ–è€…éœ€è¦ç ´è§£çš„è½¯ä»¶ï¼Œä¾¿äºä»¥åé‡è£…æ—¶å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç›¸åº”çš„èµ„æºã€‚å†…å®¹ä¸é—´æ–­æ›´æ–°ã€‚ Office 2016 for macOSèµ„æºä¸‹è½½ Office 2016 for macOS ç ´è§£ç¨‹åºï¼Œç™¾åº¦ç½‘ç›˜ä¸‹è½½ å®‰è£…åŠæ¿€æ´»Office ç›´æ¥å®‰è£…å³å¯ã€‚å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ç ´è§£ç¨‹åºï¼Œæ‰“å¼€æ—¶ä¼šæ˜¾ç¤ºå·²æ¿€æ´»çŠ¶æ€ï¼Œä½†æ˜¯æ­¤æ—¶å…¶å®å¹¶æ²¡æœ‰æ¿€æ´»ã€‚ç‚¹å‡»ä¸­é—´çš„é’¥åŒ™å›¾æ ‡å³å¯å®Œæˆæ¿€æ´»ã€‚ WebStormèµ„æºä¸‹è½½ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆ WebStorm å³å¯ã€‚ å®‰è£…åŠæ¿€æ´»ä¸‹è½½å®Œæˆåç›´æ¥å®‰è£…ï¼Œå®‰è£…æˆåŠŸåæ‰“å¼€ç¨‹åºï¼Œåœ¨ç¨‹åºæ¿€æ´»é¡µé¢é€‰æ‹© Server Licenseï¼Œå¡«å…¥ä¸‹é¢çš„åœ°å€å³å¯æ¿€æ´»ã€‚ http://idea.imsxm.com/ Navicat PremiumNavicat Premium æ˜¯ä¸€å¥—ç›¸å½“å¥½ç”¨çš„æ•°æ®åº“å¼€å‘å·¥å…·ï¼Œä½¿ç”¨è¿™ä¸€ä¸ªç¨‹åºå°±å¯ä»¥è¿æ¥å¤šç§å¸¸è§æ•°æ®åº“ã€‚ä½†æ˜¯ï¼Œè½¯ä»¶æœ¬èº«æ˜¯éœ€è¦æ”¶è´¹çš„å¹¶ä¸”ä»·æ ¼ä¸ä¾¿å®œã€‚ å½“æ—¶åœ¨å®‰è£…ç ´è§£ç‰ˆçš„æ—¶å€™èŠ±äº†å¾ˆå¤šæ—¶é—´ï¼Œç½‘ä¸Šçš„èµ„æºå¥½å¤šéƒ½ä¸èƒ½ç”¨ï¼Œæœ€åç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªç ´è§£ç‰ˆï¼Œä¸‹è½½å®‰è£…åå³å¯ä½¿ç”¨ã€‚ é“¾æ¥: http://pan.baidu.com/s/1eRG9LPS å¯†ç :f5cc]]></content>
      <categories>
        <category>æ”¶è—</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Express 4.0]]></title>
    <url>%2F2017%2F08%2Flearn-express%2F</url>
    <content type="text"><![CDATA[æ¦‚è¿°Express æ˜¯ä¸€ä¸ªåŸºäº Node.js å¹³å°çš„æç®€ã€çµæ´»çš„ web åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¸®åŠ©ä½ åˆ›å»ºå„ç§ Web å’Œç§»åŠ¨è®¾å¤‡åº”ç”¨ã€‚Express å…·æœ‰ä¸°å¯Œçš„ HTTP å¿«æ·æ–¹æ³•å’Œä»»æ„æ’åˆ—ç»„åˆçš„ Connect ä¸­é—´ä»¶ï¼Œè®©ä½ åˆ›å»ºå¥å£®ã€å‹å¥½çš„ API å˜å¾—æ—¢å¿«é€Ÿåˆç®€å•ã€‚åŒæ—¶ï¼ŒExpress ä¸å¯¹ Node.js å·²æœ‰çš„ç‰¹æ€§è¿›è¡ŒäºŒæ¬¡æŠ½è±¡ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨å®ƒä¹‹ä¸Šæ‰©å±•äº† Web åº”ç”¨æ‰€éœ€çš„åŸºæœ¬åŠŸèƒ½ï¼Œå› æ­¤ä¸ä¼šå‡ºç°ç”±äºè¿‡å¤šçš„æŠ½è±¡å’ŒåŒ…è£…å¯¼è‡´çš„æ€§èƒ½æŸè€—é—®é¢˜ã€‚ å¼€å§‹ä½¿ç”¨Express ä¸Šæ‰‹éå¸¸çš„ç®€å•ï¼Œä½¿ç”¨ Express éœ€è¦ Node.jsï¼Œè¿™é‡Œå‡å®šå·²ç»å®‰è£…å¥½äº† Node.jsï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹å†™ä¸€ä¸ª Hello Worldã€‚ Hello Worldé¦–å…ˆæ–°å»ºä¸€ä¸ªé¡¹ç›®ç›®å½•å¹¶è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ 123$ mkdir hello-world$ cd hello-world$ npm init æ‰§è¡Œå®Œä¸Šè¿°æ“ä½œåï¼Œhello-world ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª package.json æ–‡ä»¶ï¼ŒåŒ…å«ä¸€äº›é¡¹ç›®ç›¸å…³ä¿¡æ¯ã€‚ æ¥ä¸‹æ¥ç›´æ¥é€šè¿‡ npm å®‰è£… Express å°±å¯ä»¥äº†ã€‚ 1$ npm install express æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤åï¼Œåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª app.js æ–‡ä»¶ï¼Œç„¶åå°†ä¸‹é¢çš„ä»£ç å¤åˆ¶è¿›å»ï¼š 12345678910111213var express = require('express');var app = express();app.get('/', function(req, res)&#123; res.send('&lt;h1&gt;Hello World!&lt;/h1&gt;');&#125;);var server = app.listen(8080, function()&#123; var host = server.address().address; var port = server.address().port; console.log('Example app listening at http://%s:%s', host, port);&#125;); ä¸Šé¢çš„ä»£ç å¯åŠ¨ä¸€ä¸ªæœåŠ¡å¹¶ç›‘å¬ä» 8080 ç«¯å£è¿›å…¥çš„æ‰€æœ‰è¿æ¥è¯·æ±‚ï¼Œä»–å°†å¯¹æ‰€æœ‰ (/) URL æˆ– è·¯ç”± è¿”å› â€œHello World!â€ å­—ç¬¦ä¸²ã€‚å¯¹äºå…¶ä»–æ‰€æœ‰è·¯å¾„å…¨éƒ¨è¿”å› 404 Not Foundã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨åº”ç”¨ï¼Œç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®http://localhost:8080ï¼Œç½‘é¡µä¸Šä¼šæ˜¾ç¤ºä¸€ä¸ª Hello Worldã€‚1$ node app.js è„šæ‰‹æ¶æˆ‘ä»¬å¯ä»¥é€šè¿‡è„šæ‰‹æ¶å·¥å…·å¿«é€Ÿåˆ›å»ºä¸€ä¸ª Express åº”ç”¨ã€‚é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å…¨å±€å®‰è£…è„šæ‰‹æ¶å·¥å…·ã€‚ 1$ npm install express-generator -g å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º my-first-app çš„åº”ç”¨ã€‚ 1$ express my-first-app -e -e å‚æ•°è¡¨æ˜ä½¿ç”¨çš„ ejs ä½œä¸ºæ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤ä½¿ç”¨çš„ jadeã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ express -h æŸ¥çœ‹æ”¯æŒçš„å‚æ•°ã€‚ åº”ç”¨åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥åˆ°è¯¥ç›®å½•ä¸‹å®‰è£…æ‰€æœ‰çš„ä¾èµ–ã€‚ 12$ cd my-first-app$ npm install ç„¶åå°±å¯ä»¥å¯åŠ¨åº”ç”¨äº†ï¼Œè®¾ç½® DEBUG ç¯å¢ƒå˜é‡ä¸ºå½“å‰åº”ç”¨åç§°å¯ä»¥ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨åº”ç”¨ã€‚ 1$ DEBUG=my-first-app npm start æ³¨æ„ï¼šä¸Šé¢çš„å‘½ä»¤æ˜¯ masOS æˆ–è€… Linux å¹³å°ï¼Œå¦‚æœæ˜¯ Windows å¹³å°ï¼Œéœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚ 1$ set DEBUG=my-first-app &amp; npm start åº”ç”¨å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:3000/ ç½‘å€å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªåº”ç”¨äº†ã€‚ é€šè¿‡ Express åº”ç”¨ç”Ÿæˆå™¨åˆ›å»ºçš„åº”ç”¨ä¸€èˆ¬éƒ½æœ‰å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š 12345678910111213141516171819.â”œâ”€â”€ app.jsâ”œâ”€â”€ binâ”‚ â””â”€â”€ wwwâ”œâ”€â”€ package.jsonâ”œâ”€â”€ publicâ”‚ â”œâ”€â”€ imagesâ”‚ â”œâ”€â”€ javascriptsâ”‚ â””â”€â”€ stylesheetsâ”‚ â””â”€â”€ style.cssâ”œâ”€â”€ routesâ”‚ â”œâ”€â”€ index.jsâ”‚ â””â”€â”€ users.jsâ””â”€â”€ views â”œâ”€â”€ error.jade â”œâ”€â”€ index.jade â””â”€â”€ layout.jade7 directories, 9 files å†…éƒ¨åŸç†Express æ¡†æ¶çš„æ ¸å¿ƒæ˜¯å¯¹ Node.js å†…ç½® http æ¨¡å—çš„ä¸€ä¸ªå°è£…ã€‚åŸç”Ÿ http æ¨¡å—å¯åŠ¨ä¸€ä¸ªæœåŠ¡çš„ä»£ç å¦‚ä¸‹ï¼š 12345var http = require('http');var server = http.createServer(function(request, response) &#123; // Handle request.&#125;);server.listen(8080); ä¸Šé¢ä»£ç çš„å…³é”®éƒ¨åˆ†æ˜¯ http æ¨¡å—çš„ createServer æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚æŠµè¾¾æœåŠ¡å™¨æ—¶ï¼Œä¼šè§¦å‘è¯¥å‡½æ•°ã€‚è¯¥å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«å¯¹åº” request å’Œ response å¯¹è±¡ã€‚ Express å…¶å®å°±æ˜¯å¯¹ http æ¨¡å—çš„ä¸€ä¸ªå°è£…ï¼Œä¸Šé¢çš„ä»£ç ä½¿ç”¨ Express æ”¹å†™å¦‚ä¸‹ï¼š 1234567var http = require('http');var express = require('express');var app = express();var server = http.createServer(app);server.listen(8080); é€šè¿‡ä¸Šè¿°ä»£ç ä¸éš¾çœ‹å‡ºï¼Œexpress æ‹¦æˆªäº† http è¯·æ±‚ï¼Œå½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œäº¤ç”± app è¿›è¡Œå¤„ç†ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ª â€œappâ€ æ˜¯ä»€ä¹ˆå‘¢?app å…¶å®å°±æ˜¯ä¸€ä¸ª Functionï¼Œå¹¶ä¸”æ¥å— request å’Œ response å¯¹è±¡ä»¥åŠä¸€ä¸ªå«åš next çš„å‚æ•°ã€‚æºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021function createApplication() &#123; var app = function(req, res, next) &#123; app.handle(req, res, next); &#125;; mixin(app, EventEmitter.prototype, false); mixin(app, proto, false); // expose the prototype that will get set on requests app.request = Object.create(req, &#123; app: &#123; configurable: true, enumerable: true, writable: true, value: app &#125; &#125;) // expose the prototype that will get set on responses app.response = Object.create(res, &#123; app: &#123; configurable: true, enumerable: true, writable: true, value: app &#125; &#125;) app.init(); return app;&#125; å½“æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œè°ƒç”¨ app æ–¹æ³•ï¼Œåœ¨ app æ–¹æ³•å†…éƒ¨ä¼šæ‰§è¡Œ app.handle é‚£ä¹ˆ app.handle ä¸­ä¼šåšäº›ä»€ä¹ˆå‘¢ï¼Ÿè¿˜æ˜¯ç»§ç»­çœ‹æºç ï¼š 123456789101112131415161718app.handle = function handle(req, res, callback) &#123; var router = this._router; // final handler var done = callback || finalhandler(req, res, &#123; env: this.get('env'), onerror: logerror.bind(this) &#125;); // no routes if (!router) &#123; debug('no routes defined on app'); done(); return; &#125; router.handle(req, res, done);&#125;; ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡º app.handle ä¼šå°†å¤„ç†äº¤ç”± router è¿›è¡Œå¤„ç†ï¼Œå¦‚æœ router ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå›è°ƒå‡½æ•°æˆ–è€… handlerã€‚å…¶ä¸­ router å°±æ˜¯è·¯ç”±å®¹å™¨ï¼Œè´Ÿè´£åˆ†å‘è¯·æ±‚ï¼Œä¾æ¬¡æ‰§è¡Œç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ çœ‹åˆ°è¿™é‡Œå°±èƒ½å¤§è‡´æ¨æµ‹å‡º Express çš„å†…éƒ¨å·¥ä½œæœºåˆ¶äº†ï¼šExpress å°† app æ–¹æ³•ç»‘å®šä¸º http è¯·æ±‚çš„å¤„ç†å‡½æ•°ï¼Œå½“è¯·æ±‚åˆ°è¾¾æ—¶è§¦å‘è¯¥æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•çš„å†…éƒ¨ï¼Œç”±è·¯ç”±å®¹å™¨å¯¹è¯·æ±‚è¿›è¡Œåˆ†å‘ï¼Œäº¤ç”±ç›¸åº”çš„å¤„ç†å‡½æ•°å¤„ç†ï¼Œè€Œå¤„ç†å‡½æ•°æ˜¾ç„¶éœ€è¦æå‰è¿›è¡Œæ³¨å†Œå¹¶ä¸”æ˜¯è¢«é¡ºåºè°ƒç”¨çš„ã€‚è¿™é‡Œçš„â€œå¤„ç†å‡½æ•°â€œåœ¨ Express ä¸­è¢«æˆä¸ºä¸­é—´ä»¶ã€‚ ä¸­é—´ä»¶ä¸­é—´ä»¶è¯´ç™½äº†å°±åƒæ˜¯æµæ°´çº¿ä¸Šä¸€ä¸ªå·¥äººï¼Œå¯¹äº§å“ï¼ˆhttp è¯·æ±‚ï¼‰è¿›è¡ŒæŸé¡¹ç‰¹å®šçš„åŠ å·¥ã€‚å®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯é¡ºåºæ‰§è¡Œï¼ŒExpress è¿è¡Œçš„è¿‡ç¨‹å…¶å®å°±æ˜¯é¡ºåºè°ƒç”¨ä¸€ç³»åˆ—çš„ä¸­é—´ä»¶ã€‚ æ¯ä¸ªä¸­é—´ä»¶éƒ½ä¼šä» Express å®ä¾‹å¯¹è±¡ä¸­è·å–åˆ°ä¸‰ä¸ªå‚æ•°ï¼šrequest å¯¹è±¡ã€response å¯¹è±¡å’Œ next å¯¹è±¡ï¼Œåˆ†åˆ«å¯¹åº” http è¯·æ±‚ã€http å“åº”ä»¥åŠ è´Ÿè´£è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„ next æ–¹æ³•ã€‚ Express é€šè¿‡ use æ–¹æ³•æ³¨å†Œä¸­é—´ä»¶ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š 1234567891011121314var express = require('express');var app = express();app.use(function(req, res, next) &#123; console.log(req.method + ':' + request.url); next();&#125;);app.user(function(req, res, next) &#123; res.end('&lt;h1&gt;Hello World!&lt;/h1');&#125;);app.listen(8080); ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº† app.use æ–¹æ³•æ³¨å†Œäº†ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œåœ¨æ”¶åˆ° http è¯·æ±‚åä¼šé¡ºåºè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚é¦–å…ˆåœ¨æ§åˆ¶å°è¾“å‡ºä¸€è¡Œä¿¡æ¯ï¼Œç„¶åè°ƒç”¨ next æ–¹æ³•ï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ–¹æ³•ï¼Œå“åº” http è¯·æ±‚ã€‚ use æ–¹æ³•å†…éƒ¨å¯ä»¥å¯¹è®¿é—®è·¯å¾„è¿›è¡Œåˆ¤æ–­ï¼Œæ®æ­¤å°±èƒ½å®ç°ç®€å•çš„è·¯ç”±ï¼Œæ ¹æ®ç›¸åº”çš„è¯·æ±‚è·¯å¾„ï¼Œè¿”å›ç›¸åº”çš„è¯·æ±‚ç»“æœã€‚ä¾‹å¦‚ï¼š 12345678910111213var express = require('express');var app = express();app.user(function(req, res, next) &#123; if (req.url === '/') &#123; res.end('&lt;h1&gt;Hello World!&lt;/h1'); &#125; else &#123; res.status(404).end(); &#125;&#125;);app.listen(8080); ä¸Šé¢çš„ä»£ç é€šè¿‡ request.url å±æ€§ï¼Œåˆ¤æ–­è¯·æ±‚çš„ç½‘å€ï¼Œè¿”å›ä¸åŒçš„å†…å®¹ã€‚ è·¯ç”±è·¯ç”±å®šä¹‰äº†åŒ¹é…æŸä¸ªurlçš„å¤„ç†å‡½æ•°ï¼Œç”±ä¸€ä¸ª urlã€http è¯·æ±‚ï¼ˆGETã€POSTç­‰ï¼‰å’Œè‹¥å¹²ä¸ªå¤„ç†å‡½æ•°ç»„æˆï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è·¯ç”±ï¼š 123456var express = require('express');var app = express();app.get('/', function(req, res) &#123; res.send('hello world');&#125;); è·¯ç”±æ–¹æ³•è·¯ç”±æ–¹æ³•æ¥æºäº http è¯·æ±‚ï¼Œå¦‚ï¼šgetã€postã€putç­‰ã€‚å…¶ä¸­ app.all() æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è·¯ç”±æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½• http æ–¹æ³•ä¸å…¶å¯¹åº”ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯¹äºä¸€ä¸ªè·¯å¾„ä¸Šçš„æ‰€æœ‰è¯·æ±‚åŠ è½½ä¸­é—´ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€äº›è·¯ç”±çš„å®ä¾‹ï¼š 123456789101112app.get('/', function (req, res) &#123; res.send('GET request to the homepage');&#125;);app.post('/', function (req, res) &#123; res.send('POST request to the homepage');&#125;);app.all('/secret', function (req, res, next) &#123; console.log('Accessing the secret section ...'); next(); // pass control to the next handler&#125;); è·¯ç”±è·¯å¾„è·¯ç”±è·¯å¾„åŒ¹é… htpp è¯·æ±‚çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å­—ç¬¦ä¸²æ¨¡å¼æˆ–è€…æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›è·¯ç”±è·¯å¾„çš„ç¤ºä¾‹ï¼š 1234567891011121314// åŒ¹é…æ ¹è·¯å¾„çš„è¯·æ±‚app.get('/', function (req, res) &#123; res.send('root');&#125;);// åŒ¹é… acd å’Œ abcdapp.get('/ab?cd', function(req, res) &#123; res.send('ab?cd');&#125;);// åŒ¹é… butterflyã€dragonflyï¼Œä¸åŒ¹é… butterflymanã€dragonfly manç­‰app.get(/.*fly$/, function(req, res) &#123; res.send('/.*fly$/');&#125;); è·¯ç”±å¥æŸ„å¯ä»¥ä¸ºä¸€ä¸ªè¯·æ±‚æä¾›å¤šä¸ªå¤„ç†å‡½æ•°ï¼Œå…¶è¡Œä¸ºç±»ä¼¼ä¸­é—´ä»¶ã€‚è·¯ç”±å¥æŸ„æœ‰å¤šç§å½¢å¼ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªå‡½æ•°æ•°ç»„ï¼Œæˆ–è€…æ˜¯ä¸¤è€…æ··åˆã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516var fun1 = function (req, res, next) &#123; console.log('fun1'); next();&#125;var fun2 = function (req, res, next) &#123; console.log('fun2'); next();&#125;app.get('/example/d', [fun1, fun2], function (req, res, next) &#123; console.log('response will be sent by the next function ...'); next();&#125;, function (req, res) &#123; res.send('Hello from D!');&#125;); ä½¿ç”¨ app.route() å¯ä»¥åˆ›å»ºé“¾å¼çš„è·¯ç”±å¥æŸ„ã€‚ç”±äºè·¯å¾„åœ¨ä¸€ä¸ªåœ°æ–¹æŒ‡å®šï¼Œè¿™æ ·åšæœ‰åŠ©äºåˆ›å»ºæ¨¡å—åŒ–çš„è·¯ç”±ï¼Œè€Œä¸”å‡å°‘äº†ä»£ç å†—ä½™å’Œæ‹¼å†™é”™è¯¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š 12345678910app.route('/user') .get(function(req, res) &#123; res.send('Get a random book'); &#125;) .post(function(req, res) &#123; res.send('Add a book'); &#125;) .put(function(req, res) &#123; res.send('Update the book'); &#125;); è·¯ç”±ä¸­é—´ä»¶Express.Router æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªæ¨¡å—åŒ–ã€å¯æŒ‚è½½çš„è·¯ç”±å¥æŸ„ï¼Œå®ƒå¥½åƒå°å‹çš„ Express åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œæœ‰è‡ªå·±çš„ useã€getã€param å’Œ route æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè·¯ç”±ä¸­é—´ä»¶çš„åŸºæœ¬ä¾‹å­ã€‚ åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª login.js æ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314var express = require('express');var router = express.Router();// è¯¥è·¯ç”±ä½¿ç”¨çš„ä¸­é—´ä»¶router.use(function timeLog(req, res, next) &#123; console.log('Time: ', Date.now()); next();&#125;);router.post('/', function(req, res) &#123; // Login...&#125;);module.exports = router; ç„¶ååœ¨ app.js ä¸­åŠ è½½è·¯ç”±æ¨¡å—ï¼š 123var login = require('./login');app.user('/login', login); è¿™æ ·åº”ç”¨å°±å¯ä»¥å¤„ç†å‘åˆ° /login ä¸Šçš„è¯·æ±‚ï¼Œå¹¶ä¸”è°ƒç”¨ä¸ºè¯¥è·¯ç”±æŒ‡å®šçš„ timeLog ä¸­é—´ä»¶ã€‚ æ¨¡æ¿å¼•æ“åœ¨ Express ä¸­ä½¿ç”¨æ¨¡æ¿å¼•æ“ï¼Œéœ€è¦åœ¨åº”ç”¨ä¸­è¿›è¡Œå¦‚ä¸‹è®¾ç½®æ‰èƒ½è®© Express æ¸²æŸ“æ¨¡æ¿å¼•æ“ï¼š 12345678910var express = require('express');var path = require('path');var app = express();// è®¾ç½®æ¨¡æ¿æ–‡ä»¶ç›®å½•app.set('views', path.join(__dirname, 'views'));// è®¾ç½®æ¨¡æ¿å¼•æ“app.set('view engine', 'jade'); æ¨¡æ¿å¼•æ“è®¾ç½®å®Œæˆåï¼Œåœ¨ views ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º index.ejs çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12345html head title!= title body h1!= message ç„¶ååˆ›å»ºä¸€ä¸ªè·¯ç”±æ¸²æŸ“ index.jade æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® view engineï¼Œæ‚¨éœ€è¦æŒ‡æ˜è§†å›¾æ–‡ä»¶çš„åç¼€ï¼Œå¦åˆ™å°±ä¼šé—æ¼å®ƒã€‚ 123app.get('/', function (req, res) &#123; res.render('index', &#123; title: 'Hey', message: 'Hello there!'&#125;);&#125;); å®Œæˆä¸Šè¿°æ“ä½œåï¼Œè®¿é—®ä¸»é¡µå°±å¯ä»¥çœ‹åˆ° index.jade è¢«æ¸²æŸ“ä¸º HTMLã€‚ å¸¸ç”¨å¯¹è±¡åŠå…¶å±æ€§å’Œæ–¹æ³•Expressé™æ€æ–¹æ³•Express.static(root[, options]) &emsp;&emsp;æ‰˜ç®¡ Express åº”ç”¨å†…çš„é™æ€èµ„æºã€‚root å‚æ•°æŒ‡çš„æ˜¯é™æ€èµ„æºæ–‡ä»¶æ‰€åœ¨çš„æ ¹ç›®å½•ï¼›options å¯é€‰çš„å‚æ•°å¯¹è±¡ï¼ŒåŒ…å«ä¸€äº›ç¼“å­˜ç›¸å…³çš„å­—æ®µï¼šetagã€lastModifiedã€maxAgeï¼Œä»¥åŠä¸€ä¸ªè®¾ç½® HTTP ç›¸åº”å¤´çš„å‡½æ•°ç­‰ã€‚ å®ä¾‹æ–¹æ³•app.listen(port[, hostname][, backlog][, callback]) &emsp;&emsp;ç›‘å¬æŒ‡å®šçš„ä¸»æœºå’Œç«¯å£å· app.use([path, ]function[, functionâ€¦]) &emsp;&emsp;å°†ä¸­é—´ä»¶æŒ‚è½½åˆ°æŒ‡å®šçš„è·¯å¾„ï¼Œé»˜è®¤æ˜¯æ ¹è·¯å¾„ app.all(path, callback[, callbackâ€¦]) &emsp;&emsp;åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚æ–¹æ³• app.get(path, callback[, callbackâ€¦]) &emsp;&emsp;åŒ¹é…æµè§ˆå™¨getè¯·æ±‚ app.post(path, callback[, callbackâ€¦]) &emsp;&emsp;åŒ¹é…æµè§ˆå™¨postè¯·æ±‚ app.render(view[, locals][, callback]) &emsp;&emsp;é€šè¿‡å›è°ƒå‡½æ•°æ¸²æŸ“æ¨¡æ¿é¡µé¢ app.route(path) &emsp;&emsp;åˆ›å»ºé“¾å¼çš„è·¯ç”±å¥æŸ„ Requestå®ä¾‹å±æ€§req.app &emsp;&emsp;Express app å®ä¾‹ req.baseUrl &emsp;&emsp;è·¯ç”±çš„æŒ‚è½½çš„è·¯å¾„ req.body &emsp;&emsp;è¯·æ±‚ä½“ req.cookies &emsp;&emsp;cookies req.query &emsp;&emsp;getè¯·æ±‚å‚æ•°å¯¹è±¡ å®ä¾‹æ–¹æ³•req.get(field) &emsp;&emsp;è·å– Http è¯·æ±‚å¤´å‚æ•° req.param(name[, defualtValue]) &emsp;&emsp;è¯»å–è¯·æ±‚çš„å‚æ•°ï¼Œä¼šä»urlå’Œbodyä¸­æŸ¥æ‰¾ Responseå®ä¾‹å±æ€§res.app &emsp;&emsp;Express app å®ä¾‹ res.locals &emsp;&emsp;æœ¬æ¬¡è¯·æ±‚ä¸­çš„æœ¬åœ°å˜é‡ï¼Œä¸åŒäºapp.localsã€‚ å®ä¾‹æ–¹æ³•res.send([body]) &emsp;&emsp;è¿”å› Http å“åº” res.sendStatus(statusCode) &emsp;&emsp;è¿”å›çŠ¶æ€å— res.json([body]) &emsp;&emsp;è¿”å›JSONæ•°æ® res.append(field[, value]) &emsp;&emsp;å‘ Http å“åº”å¤´ä¸­æ·»åŠ å˜é‡ res.render(view [, locals] [, callback]) &emsp;&emsp;æ¸²æŸ“å¹¶è¿”å›æ¨¡æ¿é¡µé¢ res.cookie(name, value[, options]) &emsp;&emsp;è®¾ç½®cookie res.end([data][, encoding]) &emsp;&emsp;ç»“æŸç›¸åº” res.redirect([status, ]path) &emsp;&emsp;é‡å®šå‘ æ€»ç»“è¿™å‡ å¤©å¯¹ Express çš„å­¦ä¹ å’Œè¿ç”¨ï¼Œç»™æˆ‘æœ€å¤§çš„æ„Ÿè§‰å°±æ˜¯ Express çš„æç®€å’Œçµæ´»ä»¥åŠé‚£ç§æµæ°´çº¿çš„å·¥ä½œæ¨¡å¼ï¼Œå®ƒå®Œå…¨å°±æ˜¯ä¸€ä¸ªç”±è·¯ç”±å’Œä¸­é—´ä»¶æ„æˆçš„ Web æ¡†æ¶ã€‚åŸºäº Express å¯ä»¥å¾ˆå¿«é€Ÿçš„æ„å»ºé¡¹ç›®ï¼Œå„ç§åŠŸèƒ½æŒ‰éœ€æ·»åŠ ï¼Œå³æ’å³ç”¨ã€‚ç»“æ„ååˆ†æ¸…æ™°ï¼Œå„ä¸ªæ¨¡å—ä¹‹é—´è§£è€¦ã€èŒè´£åˆ†æ˜ã€‚ä¸è¿‡ï¼Œä¹Ÿæ­£æ˜¯å› ä¸º Express çš„çµæ´»ï¼Œå¦‚æœåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æ²¡æœ‰æ¸…æ™°çš„æ€è·¯å’Œå¥½çš„è§„åˆ’ï¼Œä»ç„¶ä¼šå¯¼è‡´ä»£ç æ‚ä¹±æ— ç« ï¼Œè¿™é‡Œæ’ä¸€ç‚¹ä¸œè¥¿ï¼Œé‚£é‡Œæ’ä¸€ç‚¹ä¸œè¥¿ã€‚ å¯¹äº Express æˆ‘æ„Ÿè§‰ç”¨æ¥æ„å»ºä¸€ä¸ªå¾ªåºæ¸è¿›çš„é¡¹ç›®æ˜¯æœ€é€‚åˆä¸è¿‡äº†ï¼Œå¼€å§‹çš„æ—¶å€™åªéœ€è¦å°‘é‡çš„å·¥ä½œå°±å¯ä»¥è®©é¡¹ç›®è·‘èµ·æ¥ã€‚æ¥ç€ï¼Œåœ¨åç»­çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡è·¯ç”±å’Œä¸­é—´ä»¶ä¸æ–­çš„æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé€æ­¥çš„å®Œæˆæ•´ä¸ªé¡¹ç›®çš„å®šåˆ¶ã€‚è€Œä¸”ï¼Œè¿˜å¯ä»¥å¯¹ Express è¿›è¡Œä¸€äº›åŸºæœ¬çš„å°è£…ï¼ŒæŠŠä¸€äº›è¾ƒä¸ºé€šç”¨çš„åŠŸèƒ½é¢„å…ˆé›†æˆè¿›å»ï¼Œç„¶ååœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œå„ç±»é¡¹ç›®çš„å®šåˆ¶ã€‚ æ€»è€Œè¨€ä¹‹ï¼ŒExpress å¯ä»¥å¾ˆå¿«é€Ÿçš„æ„å»ºå°å‹é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥å®Œæˆå¤§å‹é¡¹ç›®çš„æ·±åº¦å®šåˆ¶ï¼Œå¯è°“æ˜¯æ–‡æ­¦åŒå…¨ï¼Œé€‚åº”æ€§åŠå…¶å¹¿æ³›ã€‚åªæ˜¯ï¼Œè¿™æ ·çš„çµæ´»æ€§ä¹Ÿæ„å‘³ç€åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä»ç„¶æœ‰ä¸€äº›è¾ƒä¸ºé€šç”¨çš„å¤„ç†éœ€è¦å»åšï¼Œå¯¹äºä¼ä¸šçº§å¼€å‘ï¼Œä¹Ÿè®¸æŠ½è±¡å±‚æ¬¡æ›´é«˜ï¼ŒåŠŸèƒ½æ›´åŠ ä¸°å¯Œçš„æ¡†æ¶æ›´ä¸ºé€‚åˆã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Express</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢ä¸­ä½¿ç”¨Chromeä¸»é¢˜ä¸­çš„èƒŒæ™¯å›¾ç‰‡]]></title>
    <url>%2F2017%2F08%2Fuse-chrome-theme-background%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©æ‰“å¼€Chromeï¼Œçœ‹åˆ°é¦–é¡µä¸Šé‚£ç‚«é…·çš„ä¸»é¢˜èƒŒæ™¯ï¼Œçªç„¶æƒ³åˆ°æˆ‘åšå®¢å¥½åƒè¿˜æ²¡æœ‰èƒŒæ™¯ï¼Œè¿™ç€å®è®©äººè§‰å¾—ä¸å¼€å¿ƒã€‚äºæ˜¯ï¼Œè¶ç€ä¸­åˆä¼‘æ¯çš„æ—¶é—´ï¼Œæˆ‘å†³å®šç»™åšå®¢ä¹Ÿæ·»åŠ ä¸€ä¸ªèƒŒæ™¯ã€‚ é¡ºæ‰‹ç‰µç¾Šæ—¢ç„¶è¦èƒŒæ™¯ï¼Œé‚£å½“ç„¶å¾—æœ‰ä¸ªå¥½çœ‹çš„å›¾ç‰‡ç´ æã€‚æ—¢ç„¶æˆ‘æ˜¯çœ‹åˆ°Chromeçš„ä¸»é¢˜èƒŒæ™¯æ‰èŒç”Ÿè¿™ä¸ªæƒ³æ³•çš„ï¼Œé‚£ç´ æä¹ŸåŒæ ·ä»Chromeçš„ä¸»é¢˜èƒŒæ™¯ä¸­å–å¥½äº†ã€‚æ°å¥½æœ€è¿‘ååˆ†ä¸­æ„åº”ç”¨å•†åº—ä¸­ä¸€ä¸ªå«åšFlying Paintçš„ä¸»é¢˜èƒŒæ™¯ï¼Œäºæ˜¯å°±å†³å®šç”¨è¿™ä¸ªä¸»é¢˜å›¾ç‰‡ä½œä¸ºåšå®¢çš„èƒŒæ™¯ã€‚ ç›´æ¥åœ¨ä¸»é¡µå³é”®--&gt;æ£€æŸ¥ï¼ˆæˆ–è€…å…¶ä»–è¯¸å¦‚å¿«æ·é”®æ‰“å¼€å¼€å‘è€…å·¥å…·ä¹‹ç±»çš„ï¼‰ï¼Œç„¶åå®šä½åˆ°bodyå…ƒç´ æŸ¥çœ‹å®ƒçš„æ ·å¼ã€‚åœ¨å³ä¾§çš„æ ·å¼é¢æ¿ä¸­ï¼Œå¯ä»¥çœ‹åˆ°bodyä¸Šæ·»åŠ äº†ä¸€ä¸ªèƒŒæ™¯æ ·å¼ï¼Œç›´æ¥å¤åˆ¶æ ·å¼ä¸­çš„å›¾ç‰‡urlå¹¶åœ¨æ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€å°±èƒ½çœ‹åˆ°èƒŒæ™¯å›¾ç‰‡äº†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œbodyçš„èƒŒæ™¯å›¾ç‰‡ä½¿ç”¨äº†CSSä¸­ä¸€ä¸ªå«åšimage-setçš„å±æ€§ï¼Œè¯¥å±æ€§å¯ä»¥æ ¹æ®ç”¨æˆ·è®¾å¤‡çš„åˆ†è¾¨ç‡åŒ¹é…åˆé€‚çš„å›¾åƒï¼Œç›®å‰å¹¶ä¸è¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒã€‚æ‰€ä»¥ï¼Œæˆ‘å»ºè®®ç›´æ¥ä½¿ç”¨1xå›¾ç‰‡ï¼Œå› ä¸ºæˆ‘è¯•è¿‡å¤§å·çš„å›¾ç‰‡ï¼Œåœ¨æˆ‘çš„è®¾å¤‡ï¼ˆ13.3è‹±å¯¸çš„macå’Œ1920*1080çš„æ˜¾ç¤ºå™¨ï¼‰ä¸Šæ˜¾ç¤ºå‡ºæ¥å¹¶ä¸å¥½çœ‹ã€‚ç›´æ¥åœ¨å›¾ç‰‡ä¸Šå³é”®ï¼Œé€‰æ‹©å›¾ç‰‡å­˜å‚¨ä¸º...å³å¯ä¿å­˜åˆ°æœ¬åœ°ã€‚ å—è›®å…¥ä¾µå€Ÿæ¥äº†å›¾ç‰‡ä¹‹åï¼Œå°±éœ€è¦æŠŠå›¾ç‰‡æ·»åŠ åˆ°åšå®¢ä¸­ã€‚æˆ‘çš„åšå®¢åŸºäºHexoæ„å»ºï¼Œä½¿ç”¨çš„NexTä¸»é¢˜ã€‚ç›´æ¥å°†ä¿å­˜ä¸‹æ¥çš„å›¾ç‰‡å¤åˆ¶åˆ°themes/next/source/imagesç›®å½•ä¸‹ï¼Œç„¶åæ‰“å¼€theme/next/source/css/_custom/_custom.stylæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­ä¸­æ·»åŠ ä¸‹é¢çš„æ ·å¼å³å¯ã€‚ 123body &#123; background: url(/images/&lt;IMAGE_NAME&gt;) center no-repeat fixed rgb(255, 255, 255);&#125; å®Œæˆäº†ä¸Šè¿°çš„æ­¥éª¤åï¼Œæˆ‘çš„åšå®¢å°±ä¹Ÿæœ‰äº†ç‚«é…·çš„èƒŒæ™¯äº†ã€‚å¼€å¿ƒâ€¦ğŸ˜ƒ]]></content>
      <categories>
        <category>èˆªæµ·æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>CSS</tag>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åœ¨WebStormä¸­ä½¿ç”¨Git Submodule]]></title>
    <url>%2F2017%2F08%2Fgit-submodule-webstorm%2F</url>
    <content type="text"><![CDATA[æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®ï¼Œå³å½“å‰çš„çˆ¶é¡¹ç›®ä¸‹åŒ…å«ä¸€ä¸ªå­é¡¹ç›®ã€‚æˆ‘ä»¬å¯èƒ½ä¼šå¯¹å­é¡¹ç›®ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”å¸Œæœ›çˆ¶é¡¹ç›®å’Œå­é¡¹ç›®ä¸­çš„ä¿®æ”¹å¯ä»¥åˆ†åˆ«æäº¤ã€‚Gité€šè¿‡å­æ¨¡å—æ¥å®ç°è¿™ä¸ªéœ€æ±‚ï¼Œå­æ¨¡å—å…è®¸å°†ä¸€ä¸ªGitä»“åº“ä½œä¸ºå¦ä¸€ä¸ªGitä»“åº“çš„å­ç›®å½•ã€‚å®ƒèƒ½è®©æˆ‘ä»¬å°†å¦ä¸€ä¸ªä»“åº“å…‹éš†åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶è¿˜ä¿æŒæäº¤çš„ç‹¬ç«‹ã€‚æ¥ä¸‹æ¥ï¼Œä»‹ç»ä¸‹å¦‚ä½•åœ¨WebStormä¸­ä½¿ç”¨å­æ¨¡å—ã€‚ å¼€å§‹ä½¿ç”¨ é¦–å…ˆå¯ä»¥é€šè¿‡ç»ˆç«¯å‘½ä»¤æ·»åŠ å­æ¨¡å—åˆ°æŒ‡å®šç›®å½•ä¸‹ï¼Œä¸èƒ½æå‰åˆ›å»ºå¥½è¯¥ç›®å½•ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ 1$ git submodule add &lt;repo&gt; &lt;directory&gt; æ·»åŠ å®Œå­æ¨¡å—ä¹‹åï¼Œåœ¨å½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª.gitmodulesçš„æ–‡ä»¶ï¼Œè¯¥ç½®æ–‡ä»¶ä¿å­˜äº†é¡¹ç›®URLä¸å·²ç»æ‹‰å–çš„æœ¬åœ°ç›®å½•ä¹‹é—´çš„æ˜ å°„ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿåº”è¯¥æäº¤åˆ°Gitä¸­ã€‚æ­¤æ—¶å¦‚æœæ‰§è¡Œgit statuså‘½ä»¤æˆ–è€…åœ¨WebStormçš„Version Control &gt; Local Changesæ ‡ç­¾é¡µä¸‹å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªæœªæäº¤çš„ä¿®æ”¹ï¼Œå¯¹åº”çš„æ˜¯Cloneçš„å­æ¨¡å—æ–‡ä»¶å¤¹ã€‚å½“ä¸åœ¨é‚£ä¸ªç›®å½•ä¸­æ—¶ï¼ŒGitå¹¶ä¸ä¼šè·Ÿè¸ªå®ƒçš„å†…å®¹ï¼Œè€Œæ˜¯å°†å®ƒçœ‹ä½œè¯¥ä»“åº“ä¸­çš„ä¸€ä¸ªç‰¹æ®Šæäº¤ã€‚ 123[submodule &quot;public/home-assistant-polymer&quot;] path = public/home-assistant-polymer url = git@github.com:hezhii/home-assistant-polymer.git ä¸Šé¢è¯´åˆ°ï¼ŒGitå¹¶ä¸ä¼šè·Ÿè¸ªå­ä»“åº“ä¸­çš„å†…å®¹ï¼Œè€Œæ˜¯è§†ä¸ºä¸€ä¸ªå­æ¨¡å—ã€‚ä½†æ˜¯ï¼Œé€šè¿‡WebStormæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­æ¨¡å—ä¸­çš„å…·ä½“ä¿®æ”¹å†…å®¹ï¼Œå°±åƒæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸€æ ·ã€‚åœ¨WebStormçš„è®¾ç½®ä¸­ï¼Œé€‰æ‹©Version Controlï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…‹éš†çš„å­æ¨¡å—ï¼Œåªéœ€è¦é€‰ä¸­å®ƒå¹¶ç‚¹å‡»ä¸‹æ–¹çš„+å°±å¯ä»¥æ³¨å†Œè¯¥æ¨¡å—ï¼Œè¿™æ ·å­æ¨¡å—ä¸­çš„å†…å®¹å˜åŒ–ä¹Ÿä¼šæ˜¾ç¤ºåœ¨Local Changesä¸­ã€‚ åœ¨åç»­çš„å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯çˆ¶æ¨¡å—è¿˜æ˜¯å­æ¨¡å—ä¸­çš„å†…å®¹å‘ç”Ÿäº†ä¿®æ”¹ï¼Œéƒ½å¯ä»¥ç›´æ¥æäº¤ï¼ŒWebStormä¼šå¸®æˆ‘ä»¬å°†ä¿®æ”¹æäº¤åˆ°å¯¹åº”çš„ä»“åº“ä¸­ã€‚ å…‹éš†å«æœ‰å­æ¨¡å—çš„é¡¹ç›®å½“æˆ‘ä»¬åœ¨å…‹éš†ä¸€ä¸ªåŒ…å«å­æ¨¡å—çš„é¡¹ç›®æ˜¯ï¼Œé»˜è®¤ä¼šåŒ…å«è¯¥å­æ¨¡å—ç›®å½•ï¼Œä½†å…¶ä¸­è¿˜æ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚æˆ‘ä»¬å¿…é¡»æ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ï¼š git submodule initç”¨æ¥åˆå§‹åŒ–æœ¬åœ°é…ç½®æ–‡ä»¶ã€‚ git submodule updateä»å­æ¨¡å—ä¸­è·å–æ‰€æœ‰æ•°æ®å¹¶æ£€å‡ºçˆ¶é¡¹ç›®ä¸­åˆ—å‡ºçš„æäº¤ã€‚ æˆ–è€…å¯ä»¥åœ¨æ‰§è¡Œgit cloneå‘½ä»¤æ—¶æŒ‡å®š--recursiveå‚æ•°ï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨åˆå§‹åŒ–å¹¶æ›´æ–°ä»“åº“ä¸­çš„æ¯ä¸€ä¸ªå­æ¨¡å—ã€‚ åˆ é™¤å­æ¨¡å— ç¼–è¾‘.gitmoduleså’Œ.git/configæ–‡ä»¶ï¼Œåˆ é™¤å­æ¨¡å—ç›¸å…³é…ç½®ã€‚ æ‰§è¡Œgit rm --cached path_to_submoduleå‘½ä»¤ï¼Œæ¸…é™¤å­æ¨¡å—ç¼“å­˜ã€‚ åˆ é™¤å­æ¨¡å—æ–‡ä»¶å¤¹åŠç›¸å…³æ–‡ä»¶ã€‚ æäº¤ä¿®æ”¹ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>WebStorm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³åšå®¢æ­å»ºåœ¨GitHubä¸Šæ— æ³•è¢«ç™¾åº¦æ”¶å½•çš„é—®é¢˜]]></title>
    <url>%2F2017%2F08%2Fbaidu-collect-github%2F</url>
    <content type="text"><![CDATA[åšå®¢åœ¨æ­å»ºå®Œæˆåè¿›è¡Œäº†é€‚å½“çš„SEOï¼Œç„¶åæˆ‘åˆ†åˆ«å°†ç«™ç‚¹æäº¤äº†è°·æ­Œå’Œç™¾åº¦è¿›è¡Œæ”¶å½•ï¼Œæäº¤çš„æ˜¯GitHub Pagesçš„åœ°å€ã€‚ç„¶è€Œï¼Œæäº¤ç»™è°·æ­Œåä¸ä¹…å°±è¢«æ”¶å½•äº†ï¼Œä½†æ˜¯ç™¾åº¦å´è¿Ÿè¿Ÿæ²¡æœ‰æ”¶å½•ã€‚å½“æ—¶è¿™ä¸ªé—®é¢˜è¿˜ä¸€ç›´æ‰¾ä¸åˆ°åŸå› ï¼Œç›´åˆ°æˆ‘è¯•å›¾åœ¨ç™¾åº¦ç«™é•¿å¹³å°æ£€æµ‹è‡ªå·±ç½‘ç«™Robotsæ—¶ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯æ‰å‘ç°ç™¾åº¦çˆ¬è™«æ— æ³•æŠ“å–ï¼Œå› ä¸ºGitHubç¦æ‰äº†ç™¾åº¦çˆ¬è™«ã€‚ç°å°†è§£å†³çš„è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚ è§£å†³æ€è·¯è¿™ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•ç½‘ä¸Šæœ‰å‡ ç§è¯´æ³•ï¼Œå¤§è‡´åˆ†ä¸ºä¸‰ç§ï¼š æ”¾å¼ƒå°†åšå®¢éƒ¨ç½²åœ¨GitHubä¸Šã€‚ åˆ©ç”¨CDNã€‚ åŒæ—¶éƒ¨ç½²åˆ°GitHubå’ŒCodingã€‚ åœ¨çŸ¥é“è¿™ä¸ªé—®é¢˜çš„åŸå› ä¹‹åï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ˜¯å°±æ˜¯æä¸€ä¸ªäº‘æœåŠ¡å™¨ï¼Œå°†åšå®¢éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šã€‚ä½†æ˜¯ï¼Œè€ƒè™‘åˆ°äº‘æœåŠ¡å™¨åªéƒ¨ç½²åšå®¢æœ‰ç‚¹äºï¼Œè€Œæš‚æ—¶ä¹Ÿæ²¡æœ‰å…¶ä»–çš„ä¸œè¥¿éœ€è¦ç”¨åˆ°äº‘æœåŠ¡å™¨ï¼Œæ‰€ä»¥å°±æ”¾å¼ƒäº†ï¼Œè¿˜æ˜¯æ‰“ç®—éƒ¨ç½²åœ¨GitHubä¸Šã€‚ç¬¬äºŒç§åˆ©ç”¨CDNæ¥ä»£ç†GitHub Pagesä¸Šçš„åšå®¢çš„æ–¹æ³•å¹¶ä¸èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¦‚æœé™„è¿‘çš„èŠ‚ç‚¹æ²¡æœ‰ç¼“å­˜ï¼Œçˆ¬è™«ä»ç„¶ä¼šå»çˆ¬å–GitHub Pagesä¸Šçš„å†…å®¹ã€‚æ‰€ä»¥ç»¼åˆè€ƒè™‘ï¼Œæœ€åé‡‡å–äº†ç¬¬ä¸‰ç§åŠæ³•ï¼ŒåŒæ—¶éƒ¨ç½²åˆ°GitHubå’ŒCodingä¸Šï¼Œé€šè¿‡åŸŸåè§£æï¼Œå°†å›½å†…çš„è¯·æ±‚è§£æåˆ°Codingä¸Šã€‚ æ“ä½œè¿‡ç¨‹éƒ¨ç½²åˆ°Codingé¦–å…ˆå»Codingä¸Šæ³¨å†Œäº†ä¸ªè´¦å·å¹¶é…ç½®ä¸€ä¸‹SSH Keyï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ª&lt;username&gt;.coding.meçš„ä»“åº“ï¼Œæ¥ç€åœ¨hexoçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¯¥ä»“åº“çš„åœ°å€ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: - git@github.com:hezhii/hezhii.github.io.git - git@git.coding.net:hezhou/hezhou.coding.me.git branch: master è¿™æ ·å°±èƒ½åŒæ—¶å°†åšå®¢å†…å®¹æ¨åˆ°GitHubå’ŒCodingä¸Šã€‚åœ¨Codingä¸Šé€‰æ‹©é¡¹ç›®--&gt;ä»£ç --&gt;Pages æœåŠ¡ï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„åˆ†æ”¯å³å¯å®Œæˆéƒ¨ç½²ã€‚è¿™æ ·ï¼Œé€šè¿‡&lt;username&gt;.github.ioå’Œ&lt;username&gt;.coding.meå°±éƒ½èƒ½è®¿é—®åˆ°åšå®¢äº†ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨äº†Travis CIè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²å¹¶ä¸”æ˜¯SSHæ–¹å¼ç™»é™†çš„ï¼Œéœ€è¦åœ¨ssh_configæ–‡ä»¶ä¸­æ·»åŠ ä¸ŠCodingç›¸å…³é…ç½®ï¼Œssh_configä¸­çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºã€‚ 1234567891011Host github.comUser gitStrictHostKeyChecking noIdentityFile ~/.ssh/id_rsaIdentitiesOnly yesHost git.coding.netUser gitStrictHostKeyChecking noIdentityFile ~/.ssh/id_rsaIdentitiesOnly yes åŸŸåç”³è¯·å¹¶è§£æå®Œæˆäº†åšå®¢çš„éƒ¨ç½²åï¼Œå°±éœ€è¦å»å¼„ä¸ªåŸŸåå¹¶æ·»åŠ è§£æã€‚æˆ‘æ˜¯åœ¨ä¸‡ç½‘ç”³è¯·çš„åŸŸåï¼Œç”³è¯·å®Œæˆåæ·»åŠ 4æ¡CNAMEè®°å½•ï¼Œå°†å›½å†…å’Œå›½å¤–çš„è¯·æ±‚åˆ†åˆ«è§£æåˆ°Codingå’ŒGitHubï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ åŸŸååœ¨ç”³è¯·åéœ€è¦è¿›è¡Œå®åè®¤è¯ï¼Œå¦åˆ™å°†ä¼šåœæ­¢è§£æï¼Œå®åè®¤è¯ååˆ†ç®€å•ï¼Œä¸Šä¼ ä¸ªèº«ä»½è¯æ­£é¢ç…§å°±å¯ä»¥äº†ã€‚å®¡æ ¸æ‰€éœ€æ—¶é—´è¯´æ˜¯3~5ä¸ªå·¥ä½œæ—¥ï¼Œä½†æ˜¯æˆ‘æäº¤å®¡æ ¸åè¿‡äº†6ä¸ªå·¥ä½œæ—¥æ‰å®Œæˆã€‚ åŸŸåç»‘å®šåŸŸåè§£ææˆåŠŸåï¼Œå¹¶ä¸èƒ½é€šè¿‡åŸŸåè®¿é—®åšå®¢ï¼Œéœ€è¦åˆ†åˆ«åœ¨GitHubå’ŒCodingä¸Šç»‘å®šè‡ªå·±ç”³è¯·çš„åŸŸåã€‚å…¶ä¸­ï¼Œåœ¨åšå®¢çš„sourceç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªCNAMEæ–‡ä»¶ï¼Œæ–‡ä»¶å†™ä¸Šè‡ªå·±ç”³è¯·çš„åŸŸåï¼ˆä¸éœ€è¦http://ï¼Œwwwå¯æœ‰å¯æ— ï¼‰å¹¶æäº¤ï¼Œå³å¯å®ŒæˆGitHubä¸Šçš„ç»‘å®šï¼›è€ŒCodingä¸Šçš„ç»‘å®šåˆ™æ›´åŠ ç®€å•ï¼Œåœ¨PagesæœåŠ¡é¡µé¢ï¼Œé€šè¿‡è‡ªå®šä¹‰åŸŸåæ›´èƒ½è¿›è¡Œç»‘å®šå³å¯ã€‚ç»‘å®šå®Œæˆåï¼Œå¾…åŸŸåçš„è§£æç”Ÿæ•ˆå³å¯é€šè¿‡ç”³è¯·çš„åŸŸåè®¿é—®åˆ°åšå®¢äº†ã€‚æˆ‘é€šè¿‡å¼€å…³VPNåˆ†åˆ«è®¿é—®è¿›è¡Œäº†æµ‹è¯•ï¼Œç¡®å®å›½å†…ä¼šè¢«è§£æåˆ°Codingï¼Œå›½å¤–ä¼šè¢«è§£æåˆ°GitHubã€‚ å…¶ä»–é—®é¢˜ è¿™æ ·åšä¹‹åï¼Œå¦‚æœéœ€è¦ç»™å…¶ä»–çš„é¡¹ç›®æ·»åŠ GitHub PagesæœåŠ¡ï¼Œåœ¨å›½å†…å°±æ— æ³•è®¿é—®ï¼Œæˆ‘ç›®å‰é‡‡å–çš„æ–¹æ¡ˆæ˜¯ä»ç„¶åŒæ—¶éƒ¨ç½²åˆ°GitHubå’ŒCodingã€‚ åœ¨ç™¾åº¦ç«™é•¿ä¸Šè¿›è¡Œç½‘ç«™éªŒè¯æ—¶ï¼Œé€šè¿‡HTMLæ–¹å¼éªŒè¯ä¼šè¿”å›ä¸€ä¸ª302çš„é”™è¯¯ï¼Œæ€€ç–‘æ˜¯å› ä¸ºCodingæœ‰ä¸€ä¸ªè·³è½¬é¡µå¯¼è‡´ï¼Œç›®å‰æ²¡æƒ³å¥½è§£å†³åŠæ³•ï¼Œé‡‡ç”¨CNAMEçš„æ–¹å¼è¿›è¡ŒéªŒè¯ã€‚ åœ¨ç™¾åº¦ç«™é•¿ä¸Šæäº¤sitemapæ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªä¸»åŸŸæ ¡éªŒå¤±è´¥çš„é”™è¯¯ï¼Œæ£€æµ‹sitemap.xmlæ–‡ä»¶åï¼Œå‘ç°ä¸Šé¢çš„åœ°å€ä»æ˜¯GitHub Pagesçš„åœ°å€ï¼Œéœ€è¦å°†hexoé…ç½®æ–‡ä»¶ä¸­çš„urlè®¾ç½®ä¸ºç”³è¯·çš„åŸŸåã€‚]]></content>
      <categories>
        <category>èˆªæµ·æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>GitHub</tag>
        <tag>BaiduSpider</tag>
        <tag>SEO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTML5 Notification]]></title>
    <url>%2F2017%2F08%2Fnotification%2F</url>
    <content type="text"><![CDATA[The Notifications API allows web pages to control the display of system notifications to the end user. These are outside the top-level browsing context viewport, so therefore can be displayed even when the user has switched tabs or moved to a different app. The API is designed to be compatible with existing notification systems, across different platforms. å¼•å­ä»Šå¤©æ‰“å¼€ä¼˜é…·ç½‘ç«™å‘ç°å¼¹å‡ºäº†ä¸€ä¸ªæ˜¯å¦å…è®¸æ˜¾ç¤ºé€šçŸ¥çš„å¯¹è¯æ¡†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å½“æˆ‘é€‰æ‹©å…è®¸åï¼Œè¿‡ä¸€ä¼šå„¿ä»ç”µè„‘çš„å³ä¾§å¼¹å‡ºäº†ä¸€ä¸ªæç¤ºæ¡†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å½“æ—¶è§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œä¾¿ä¸Šç½‘æŸ¥è¯¢äº†ä¸€ä¸‹ç›¸å…³çš„èµ„æ–™ï¼Œäº†è§£åˆ°æ˜¯HTML5çš„æ–°APIâ€”â€”Notificationã€‚äºæ˜¯ï¼Œæœ¬ç€å­¦ä¹ çš„æƒ³æ³•ï¼Œå¼„äº†ä¸€ä¸ªå°çš„demoã€‚ Notificationç®€ä»‹Notification APIæ˜¯HTML5ä¸­ä¸€ä¸ªæ–°çš„APIï¼Œç”¨äºå‘ç”¨æˆ·é…ç½®å’Œæ˜¾ç¤ºæ¡Œé¢é€šçŸ¥ï¼Œå¹¶ä¸”è¿™ä¸€ç‰¹æ€§åœ¨Web Workerä¸­å¯ç”¨ã€‚ æ„é€ æ–¹æ³•é€šè¿‡let notification = new Notification(title, options);å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªNotificationå®ä¾‹ã€‚æ„é€ å‡½æ•°ä¸­åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­titleæ˜¯é€šçŸ¥çš„æ ‡é¢˜ï¼Œè€Œoptionsåˆ™æ˜¯ä¸€äº›åˆå§‹å‚æ•°ï¼Œå…·ä½“çš„å‚æ•°åˆ—è¡¨å¦‚ä¸‹ï¼š dir : æ–‡å­—çš„æ–¹å‘ï¼›å®ƒçš„å€¼å¯ä»¥æ˜¯ autoï¼ˆè‡ªåŠ¨ï¼‰, ltrï¼ˆä»å·¦åˆ°å³ï¼‰, or rtlï¼ˆä»å³åˆ°å·¦ï¼‰ lang: æŒ‡å®šé€šçŸ¥ä¸­æ‰€ä½¿ç”¨çš„è¯­è¨€ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å¿…é¡»åœ¨ BCP 47 language tag æ–‡æ¡£ä¸­æ˜¯æœ‰æ•ˆçš„ã€‚ body: é€šçŸ¥ä¸­é¢å¤–æ˜¾ç¤ºçš„å­—ç¬¦ä¸² tag: èµ‹äºˆé€šçŸ¥ä¸€ä¸ªIDï¼Œä»¥ä¾¿åœ¨å¿…è¦çš„æ—¶å€™å¯¹é€šçŸ¥è¿›è¡Œåˆ·æ–°ã€æ›¿æ¢æˆ–ç§»é™¤ã€‚ icon: ä¸€ä¸ªå›¾ç‰‡çš„URLï¼Œå°†è¢«ç”¨äºæ˜¾ç¤ºé€šçŸ¥çš„å›¾æ ‡ã€‚ å±æ€§Notificationä¸»è¦åŒ…å«ä¸€ä¸ªé™æ€å±æ€§å’Œè‹¥å¹²ä¸ªå®ä¾‹å±æ€§ï¼Œå®ä¾‹å±æ€§å…¨éƒ¨éƒ½æ˜¯åªè¯»çš„å±æ€§ï¼Œå¹¶ä¸”å°±æ˜¯åˆå§‹åŒ–è¯¥å®ä¾‹æ—¶optionä¸­çš„å†…å®¹ã€‚å…·ä½“çš„å±æ€§å¦‚ä¸‹æ‰€ç¤ºã€‚ Notification.permissionï¼šè¿™æ˜¯ä¸€ä¸ªé™æ€çš„åªè¯»å±æ€§ï¼Œç”¨äºè¡¨æ˜å½“å‰é€šçŸ¥æ˜¾ç¤ºæˆæƒçŠ¶æ€çš„å­—ç¬¦ä¸²ã€‚å¯èƒ½çš„å€¼åŒ…æ‹¬ï¼šdenied (ç”¨æˆ·æ‹’ç»äº†é€šçŸ¥çš„æ˜¾ç¤º), granted (ç”¨æˆ·å…è®¸äº†é€šçŸ¥çš„æ˜¾ç¤º), or default (å› ä¸ºä¸çŸ¥é“ç”¨æˆ·çš„é€‰æ‹©ï¼Œæ‰€ä»¥æµè§ˆå™¨çš„è¡Œä¸ºä¸ denied æ—¶ç›¸åŒ)ã€‚ titleï¼šé€šçŸ¥çš„æ ‡é¢˜ï¼ŒReadonlyã€‚ dirï¼šé€šçŸ¥çš„æ–‡æœ¬æ˜¾ç¤ºæ–¹å‘ï¼ŒReadonlyã€‚ langï¼šé€šçŸ¥ä½¿ç”¨çš„è¯­è¨€ï¼ŒReadonlyã€‚ bodyï¼šé€šçŸ¥ä¸­çš„æ–‡æœ¬å†…å®¹ï¼ŒReadonlyã€‚ tagï¼šé€šçŸ¥çš„IDï¼ŒReadonlyã€‚ iconï¼šé€šçŸ¥ä¸­å›¾ç‰‡çš„urlåœ°å€ï¼ŒReadonlyã€‚ ä¸»è¦æ–¹æ³• Notification.requestPermissionï¼šè¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä½œç”¨å°±æ˜¯è¯·æ±‚ç”¨æˆ·å½“å‰æ¥æºçš„æƒé™ä»¥æ˜¾ç¤ºé€šçŸ¥ï¼Œæ•ˆæœå°±æ˜¯ä¸Šæ–‡ä¸­æ‰“å¼€ä¼˜é…·ç½‘é¡µæ—¶å¼¹å‡ºçš„ä¸€ä¸ªå¯¹è¯æ¡†ã€‚ closeï¼šå…³é—­é€šçŸ¥ã€‚ onclickï¼šå¤„ç†clickäº‹ä»¶çš„å¤„ç†ã€‚æ¯å½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ—¶è¢«è§¦å‘ã€‚ onshowï¼šå¤„ç†showäº‹ä»¶çš„å¤„ç†ã€‚å½“é€šçŸ¥æ˜¾ç¤ºçš„æ—¶å€™è¢«è§¦å‘ã€‚ onerrorï¼šå¤„ç†erroräº‹ä»¶çš„å¤„ç†ã€‚æ¯å½“é€šçŸ¥é‡åˆ°é”™è¯¯æ—¶è¢«è§¦å‘ã€‚ oncloseï¼šå¤„ç† close äº‹ä»¶çš„å¤„ç†ã€‚å½“ç”¨æˆ·å…³é—­é€šçŸ¥æ—¶è¢«è§¦å‘ã€‚ å®ä¾‹æ¼”ç¤ºåœ¨ç†Ÿæ‚‰äº†APIä¹‹åï¼Œå°±å°è¯•è‡ªå·±å¼„ä¸ªå®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ã€‚ See the Pen Notification by Sylvanass (@Sylvanass) on CodePen. ç‚¹å‡»DING!æŒ‰é’®ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ï¼Œä¼šå‡ºç°ä¸‹é¢çš„æç¤ºï¼š é€‰æ‹©å…è®¸åï¼Œä¸€ä¼šå°±ä¼šæ”¶åˆ°é€šçŸ¥äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ­¤æ—¶ï¼Œåˆ·æ–°æˆ–è€…å…³é—­æµè§ˆå™¨ï¼Œé€šçŸ¥ä»ç„¶ä¼šæ˜¾ç¤ºã€‚ç‚¹å‡»é€šçŸ¥ï¼Œå¯ä»¥äº§ç”Ÿä¸€äº›äº¤äº’æ•ˆæœã€‚è‡³æ­¤ï¼Œå…³äºHTML5 Notificationçš„ä»‹ç»å’Œç®€å•ä½¿ç”¨å°±å®Œç»“äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>HTML5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Polymer 2.0]]></title>
    <url>%2F2017%2F08%2Flearn-polymer%2F</url>
    <content type="text"><![CDATA[Unlock the Power of Web Components. Polymer is a JavaScript library that helps you create custom reusable HTML elements, and use them to build performant, maintainable apps. è¿™ç¯‡åšå®¢æ˜¯æˆ‘åœ¨å­¦ä¹ Polymer 2.0çš„è¿‡ç¨‹ä¸­è®°å½•çš„ä¸€äº›ç¬”è®°ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªPolymerçš„æ•™ç¨‹ã€‚åšå®¢è®°å½•äº†æˆ‘åœ¨å­¦ä¹ Polymeræ—¶è®¤ä¸ºé‡è¦çš„ä¸€äº›åœ°æ–¹ä»¥åŠä¸€äº›è‡ªå·±çš„ç†è§£ï¼Œä¾¿äºä»¥åå›è¿‡å¤´æ¥å¤ä¹ å’Œæ€»ç»“ã€‚ Polymerå…ƒç´  ä½¿ç”¨&lt;dom-module&gt;æ ‡ç­¾æ¥å®šä¹‰ç»„ä»¶çš„æ ·å¼å’Œæ–‡æ¡£å†…å®¹ï¼Œç»™&lt;dom-module&gt;èµ‹äºˆä¸€ä¸ªåŒ¹é…ç»„ä»¶çš„iså±æ€§çš„idæ ‡è®°ï¼Œå¹¶åœ¨&lt;dom-module&gt;ä¸­æ·»åŠ ä¸€ä¸ªæ’å…¥ä¸€ä¸ª&lt;template&gt;æ ‡ç­¾ï¼ŒPolymerå°±ä¼šè‡ªåŠ¨å…‹éš†æ¨¡æ¿å†…å®¹åˆ°ç»„ä»¶çš„local DOMä¸­ã€‚1234567891011121314151617&lt;dom-module id="x-foo"&gt; &lt;template&gt; &lt;style&gt;&lt;/style&gt; &lt;div&gt;I am x-foo!&lt;/div&gt; &lt;!--ç±»ä¼¼äºvueä¸­çš„slot--&gt; &lt;content&gt;&lt;/content&gt; &lt;/template&gt;&lt;/dom-module&gt;&lt;script&gt; Polymer(&#123; is: 'x-foo' &#125;);&lt;/script&gt; è‡ªå®šä¹‰å…ƒç´ åç§°å¿…é¡»æ˜¯å°å†™å­—æ¯ï¼Œä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª-ã€‚ Polymerç°åœ¨åªæ”¯æŒæ‰©å±•åŸç”ŸHTMLç»„ä»¶ï¼ˆä¾‹å¦‚inputæˆ–buttonï¼Œå°†æ¥ä¼šæ”¯æŒæ‰©å±•å…¶å®ƒè‡ªå®šä¹‰ç»„ä»¶ï¼‰ï¼Œè¿™äº›åŸç”Ÿç»„ä»¶æ‰©å±•è¢«ç§°ä¸ºè‡ªå®šä¹‰ç±»å‹æ‰©å±•ç»„ä»¶ã€‚ ä¸ºäº†åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ ·å¼ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª&lt;dom-module&gt;ç»„ä»¶å†…æ‰“åŒ…ä¸€ä¸ªæ ·å¼é›†åˆã€‚12345678910111213141516171819202122232425&lt;dom-module id="shared-styles"&gt; &lt;template&gt; &lt;style&gt; .red &#123; color: red; &#125; &lt;/style&gt; &lt;/template&gt;&lt;/dom-module&gt;&lt;!--å¦‚ä½•ä½¿ç”¨--&gt;&lt;link rel="import" href="../shared-styles/shared-styles.html"&gt;&lt;dom-module id="x-foo"&gt; &lt;template&gt; &lt;!-- include the style module by name --&gt; &lt;style include="shared-styles"&gt;&lt;/style&gt; &lt;style&gt; :host &#123; display: block; &#125; &lt;/style&gt; &lt;div&gt;I am x-foo!&lt;/div&gt; &lt;/template&gt;&lt;/dom-module&gt;&lt;script&gt; Polymer(&#123;is: 'x-foo'&#125;);&lt;/script&gt; ç»„ä»¶å±æ€§ typeï¼šå±æ€§ç±»å‹ã€‚æ”¯æŒBooleanã€Dateã€Numberã€Stringã€Arrayã€Objectï¼Œé€šè¿‡è¦†ç›–_deserializeValueæ–¹æ³•å¯ä»¥å¢åŠ å¯¹å…¶ä»–å±æ€§çš„æ”¯æŒã€‚ valueï¼šå±æ€§çš„é»˜è®¤å€¼ã€‚Booleanã€Numberã€Stringã€Functionã€‚å¦‚æœé»˜è®¤å€¼æ˜¯æ•°ç»„æˆ–è€…å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡å‡½æ•°è¿”å›ã€‚ computedï¼šè®¡ç®—å±æ€§ã€‚ notifyï¼šBooleanï¼Œå½“å±æ€§æ”¹å˜æ—¶ï¼Œæ˜¯å¦è§¦å‘äº‹ä»¶ã€‚è§¦å‘propertyName-change readOnlyï¼šç§æœ‰å±æ€§ï¼Œé€šè¿‡æ–¹æ³•è°ƒç”¨ã€‚ reflectToAttributeï¼šå½“ç»„ä»¶çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°domä¸Šçš„ç›¸åº”å±æ€§ã€‚ åœ¨templateä¸­ä½¿ç”¨å±æ€§æ—¶ï¼Œé©¼å³°å‘½åéœ€è¦ä½¿ç”¨-çš„æ–¹å¼ï¼Œå¦‚æœæ˜¯å…ƒç´ åŸç”Ÿçš„å±æ€§ï¼Œåé¢åŠ ä¸Š$ç¬¦å·ã€‚ è¡Œä¸º Polymeræ”¯æŒä½¿ç”¨ç§°ä¸ºbehaviorsçš„å…±äº«ä»£ç æ¨¡å—æ¥æ‰©å±•è‡ªå®šä¹‰ç»„ä»¶åŸå‹ã€‚è¡Œä¸ºæ˜¯ä¸€ä¸ªçœ‹èµ·æ¥åƒä¸€ä¸ªå…¸å‹çš„PolymeråŸå‹çš„å¯¹è±¡ï¼›è¡Œä¸ºå¯ä»¥å®šä¹‰ç”Ÿå‘½å‘¨æœŸå›è°ƒã€å£°æ˜çš„å±æ€§ã€é»˜è®¤æ ‡è®°ã€è§‚å¯Ÿå™¨å’Œç›‘å¬å™¨ï¼›è¡Œä¸ºæ˜¯ä»ç»„ä»¶ä¸­æå–å‡ºæ¥çš„å…¬å…±æ–¹æ³•ï¼Œç±»ä¼¼äºåˆ‡é¢ç¼–ç¨‹ã€‚12345Polymer(&#123; is: 'super-element', behaviors: [SuperBehavior]&#125;); äº‹ä»¶ listenerså¯¹è±¡ä¸­å®šä¹‰äº†äº‹ä»¶åŠå…¶ç›¸åº”çš„å¤„ç†æ–¹æ³•ã€‚äº‹ä»¶ç›‘å¬å™¨å¯ä»¥ç›‘å¬this.$é›†åˆä¸­çš„ä»»æ„å…ƒç´ ä¸Šçš„äº‹ä»¶ï¼Œäº‹ä»¶ç±»å‹éœ€è¦å®šä¹‰ä¸ºelementId.eventNameçš„æ–¹å¼ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œè¿™ç§æ–¹å¼åªèƒ½ä¸ºæ‹¥æœ‰idçš„èŠ‚ç‚¹æ·»åŠ äº‹ä»¶ç›‘å¬ã€‚12345678910111213141516171819202122232425&lt;dom-module id="x-customâ€&gt; &lt;template&gt; &lt;div&gt;I will respond&lt;/div&gt; &lt;div&gt;to a tap on&lt;/div&gt; &lt;div&gt;any of my children!&lt;/div&gt; &lt;div id="special"&gt;I am special!&lt;/div&gt; &lt;/template&gt; &lt;/dom-module&gt;&lt;script&gt; Polymer(&#123; is: 'x-customâ€™, listeners: &#123; 'tap': 'regularTapâ€™, 'special.tap': â€˜specialTap' &#125;, regularTap: function(e) &#123; alert("Thank you for tapping"); &#125;, specialTap: function(e) &#123; alert("It was special tapping"); &#125; &#125;); &lt;/script&gt; åŸºäºä¸Šé¢ä¸ªçš„æ–¹æ³•ï¼Œå¦‚æœä¸æƒ³ä»…ä»…ä¸ºäº†æ·»åŠ äº‹ä»¶è€ŒæŒ‡å®šå…ƒç´ idï¼Œå¯ä»¥é€šè¿‡on-eventçš„æ–¹æ³•æŒ‡å®šäº‹ä»¶ã€‚ é€šè¿‡ä¸‹é¢çš„æ–¹æ³•å¯ä»¥ç»‘å®šæˆ–è§£ç»‘äº‹ä»¶ã€‚123this.listen(this.$.myButton, 'tap', 'onTap');this.unlisten(this.$.myButton, 'tap', 'onTap'); fireæ–¹æ³•å¯ä»¥å‡ºå‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ã€‚ æ•°æ®ç³»ç»Ÿ notifyå±æ€§æ§åˆ¶å±æ€§çš„ä¿®æ”¹æ˜¯å¦ä¼šå‘ä¸ŠæµåŠ¨ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼Œå³è¯¥å±æ€§ä¿®æ”¹åï¼Œä¸ä¼šè§¦å‘ä»»ä½•ä¸œè¥¿ã€‚ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ï¼Œé˜»æ­¢æ•°æ®å‡ºå»ã€‚ readOnlyå±æ€§æ§åˆ¶å±æ€§æ˜¯å¦å¯ä»¥å‘ä¸‹æµåŠ¨ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼Œå³ç›¸åº”æ•°æ®çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°è‡ªå·±ï¼Œé˜»æ­¢æ•°æ®è¿›æ¥ã€‚ [[]]é˜»æ­¢æ•°æ®å‘ä¸ŠæµåŠ¨ï¼Œå³ä½¿æŒ‡å®šnotifyä¸ºtrueã€‚ æ³¨æ„ï¼šè¿™é‡Œçš„å‘ä¸Šã€å‘ä¸‹æµåŠ¨ï¼Œä¸æ˜¯dataå’Œç•Œé¢ä¹‹é—´çš„æµåŠ¨ï¼Œè€Œæ˜¯çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ã€‚notifyå’ŒreadOnlyæ˜¯å¯¹è‡ªå·±çš„å±æ€§è€Œè¨€çš„ï¼Œè€Œ[[ ]]å’Œ{{ }}ç›¸å½“äºæ˜¯åœ¨ä½¿ç”¨è¯¥å±æ€§çš„æ—¶å€™ï¼Œå¯¹ä½¿ç”¨çš„é‚£ä¸ªå±æ€§è€Œè¨€ã€‚ å…¨å±€é…ç½® dom: shadyï¼Œæ‰€æœ‰çš„Local DOMéƒ½ä½¿ç”¨shady DOMè¿›è¡Œæ¸²æŸ“ï¼Œå³ä½¿åªæ˜¯shadow DOM(å½“å‰é»˜è®¤ä½¿ç”¨æ­¤é€‰é¡¹). shadowï¼ŒLocal DOMåœ¨æ”¯æŒshadow DOMæ—¶ä½¿ç”¨shadow DOMåšæ¸²æŸ“(æœªæ¥ä¼šé»˜è®¤ä½¿ç”¨æ­¤é€‰é¡¹)ã€‚ lazyRegister: trueï¼Œå°†ä¸€äº›æ³¨å†Œæ—¶çš„æ´»åŠ¨å»¶è¿Ÿåˆ°ç¬¬ä¸€ä¸ªç»„ä»¶å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œé»˜è®¤æ˜¯false(é»˜è®¤å€¼å°†æ¥å¯èƒ½æ”¹å˜)ã€‚ maxï¼Œå»¶è¿Ÿæ‰€æœ‰è¡Œä¸ºæ‰§è¡Œä¸€ç›´åˆ°ç¬¬ä¸€ä¸ªç»„ä»¶è¢«åˆ›å»ºã€‚å½“è®¾ç½®lazyRegisterä¸ºmaxæ—¶ï¼Œä¸èƒ½æ”¹å˜ä¸€ä¸ªç»„ä»¶çš„iså±æ€§æˆ–é€šè¿‡å®šä¹‰factoryImplæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æ„é€ å‡½æ•°ã€‚Polymerä¼šè°ƒç”¨ç»„ä»¶çš„beforeRegisterç”¨ä»¥ä¿ç•™ä½¿ç”¨ES6å®šä¹‰ç»„ä»¶çš„èƒ½åŠ›ã€‚ç»„ä»¶çš„beforeRegisterä¼šåœ¨ç‰¹æ€§çš„beforeRegisterä¹‹å‰è°ƒç”¨. useNativeCSSPropertiesï¼šä¸ºtrueæ—¶, Polymeråœ¨æµè§ˆå™¨æ”¯æŒæ—¶ä½¿ç”¨æœ¬åœ°è‡ªå®šä¹‰CSSå±æ€§ã€‚é»˜è®¤æ˜¯falseï¼Œç”±äºSafari 9è¿˜ä¸æ”¯æŒã€‚ noUrlSettingsï¼šä¸ºtrueæ—¶, Polymerçš„è®¾ç½®åªèƒ½é€šè¿‡é¡µé¢ä¸Šè„šæœ¬æ¥è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡URLæŸ¥è¯¢å­—ç¬¦ä¸²è®¾ç½®çš„?dom=shadowä¼šè¢«å¿½ç•¥ï¼Œé»˜è®¤ä¸ºfalseã€‚ API Polymer.CaseMapï¼šæä¾›ä¸¤ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨æ¥å®Œæˆ-å’Œé©¼å³°å‘½åä¹‹é—´çš„äº’è½¬ã€‚polymer-element &lt;==&gt; polymerElement ç‰¹æ€§ æ”¯æŒçˆ¶å­ç»„ä»¶åŒå‘çš„æ•°æ®æµï¼Œå¯¹æ•°æ®çš„æµåŠ¨æœ‰å®Œå…¨çš„æ§åˆ¶æƒã€‚ ç»„ä»¶é—´çš„æ ·å¼å…±äº«ï¼Œåˆ©ç”¨CSSå˜é‡ï¼Œè¿›è¡Œç»„ä»¶çš„æ ·å¼å®šåˆ¶ã€‚ ä¿®æ”¹äº†å¯¹è±¡çš„getterã€setterï¼Œå½“å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å¹¶è°ƒç”¨ç›‘å¬è¯¥å±æ€§å˜åŒ–çš„æ–¹æ³•ã€‚ behaviorçš„ä½œç”¨å’Œvueä¸­çš„mixinç±»ä¼¼ï¼Œæä¾›ä¸€äº›é€šç”¨çš„å¤„ç†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯</category>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Polymer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢æ­å»ºè¿‡ç¨‹]]></title>
    <url>%2F2017%2F08%2Fbuild-blog%2F</url>
    <content type="text"><![CDATA[åšå®¢åŸºäºGitHub Pageså’ŒHexoæ­å»ºï¼Œä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²ï¼Œå…·ä½“å¦‚ä½•æ“ä½œç½‘ä¸Šæœ‰å…¨é¢çš„æ•™ç¨‹ï¼Œæˆ‘è¿™é‡Œä¹Ÿå°±æ²¡æœ‰å¿…è¦ä¸€ä¸€è®²è¿°äº†ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤æ‚çš„ä¸€ä¸ªä¸œè¥¿ã€‚è¿™ç¯‡åšå®¢ï¼Œä¹Ÿæƒå½“ä½œæ˜¯æˆ‘è‡ªå·±çš„ä¸€ä¸ªç¬”è®°ï¼Œè®°å½•ä¸‹æˆ‘è‡ªå·±çš„æ­å»ºè¿‡ç¨‹ä»¥åŠæˆ‘ç¨å¾®èŠ±äº†ç‚¹æ—¶é—´å»å¤„ç†çš„ä¸€äº›é—®é¢˜ã€‚ ç¯å¢ƒå‡†å¤‡ Git Node.js Ruby æˆ‘è‡ªå·±ç”µè„‘ä¸Šæœ¬æ¥ä¹Ÿå°±æœ‰è¿™äº›ç¯å¢ƒï¼Œæ‰€ä»¥è¿™ä¸€æ­¥éª¤å°±ç›´æ¥è·³è¿‡äº†ã€‚å„ç§ç¯å¢ƒå¦‚ä½•å®‰è£…ï¼Œç½‘ä¸Šä¸€æŸ¥ä¹Ÿå°±çŸ¥é“äº†ã€‚ å®‰è£…Hexoå®‰è£…ä»¥åŠä½¿ç”¨Hexoæ˜¯ç›´æ¥å‚è€ƒHexoå®˜ç½‘ä¸Šçš„æ–‡æ¡£å®Œæˆçš„ã€‚å®˜ç½‘ä¸Šçš„æ–‡æ¡£è¿˜æ˜¯æ¯”è¾ƒå…¨é¢çš„ï¼ŒåŸºæœ¬è¯»ä¸€éå°±èƒ½è€èµ·æ¥äº†ã€‚ä¸è¿‡åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å´æ˜¯åœ¨è¿™ä¸ªåœ°æ–¹é‡åˆ°ä¸€ç‚¹é—®é¢˜ï¼Œå½“æ—¶ç›´æ¥å°±npm install hexo-cli -gè¿›è¡Œå®‰è£…ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å´å¡ä½äº†ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ä¹Ÿæ²¡æœ‰ä»»ä½•çš„é”™è¯¯æç¤ºã€‚èµ·åˆæˆ‘è¿˜ä»¥ä¸ºæ˜¯éœ€è¦ç¿»å¢™ï¼Œç­‰äº†ä¸€ä¼šä»¥åå°±ç›´æ¥ç»“æŸå®‰è£…ï¼Œç„¶åæ‰“å¼€vpné‡æ–°å®‰è£…ï¼Œç„¶è€Œç»“æœè¿˜æ˜¯ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œè¿™ä¸€æ¬¡æˆ‘æ²¡æœ‰é€€å‡ºï¼Œè€Œæ˜¯å…ˆå»å¹²äº†ç‚¹åˆ«çš„äº‹æƒ…ï¼Œè¿‡äº†ä¸€ä¼šå†æ¥çœ‹çš„æ—¶å€™ï¼Œç»™äº†ä¸ªæ²¡æœ‰æƒé™çš„é”™è¯¯æç¤ºï¼Œç„¶ååŠ ä¸Šsudoå°±å®‰è£…æˆåŠŸäº†ã€‚ åˆå§‹åŒ–åŠé…ç½®è¿™ä¸€æ­¥å‚è€ƒå®˜ç½‘ä¸Šçš„æ–‡æ¡£è¿›è¡Œæ“ä½œå³å¯ï¼ŒåŸºæœ¬å°±æ˜¯hexo init &lt;folder&gt;åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œæ¥ç€è¿›å…¥åˆ°è¯¥ç›®å½•npm installå®‰è£…ä¾èµ–ï¼Œç„¶åä¿®æ”¹ä¸‹é…ç½®æ–‡ä»¶çš„è¿‡ç¨‹ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°±ç®—æ²¡æœ‰è‡ªå·±çš„ä¸€ä¸ªç«™ç‚¹ï¼Œä¹Ÿä¸è¦åˆ é™¤é…ç½®æ–‡ä»¶ä¸­çš„urlå‚æ•°ã€‚ åŸºæœ¬ä½¿ç”¨é…ç½®å®Œæˆåï¼Œæ‰§è¡Œhexo serverå³å¯åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®http://localhost:4000/å°±å¯ä»¥çœ‹åˆ°åšå®¢é¡µé¢ã€‚åœ¨ä½¿ç”¨æ—¶é€šå¸¸æ‰§è¡Œhexo n &lt;name&gt;åˆå§‹åŒ–ä¸€ç¯‡åšæ–‡ï¼Œç„¶åå¯¹åšæ–‡çš„å†…å®¹è¿›è¡Œç¼–è¾‘ï¼Œå¦‚æœå¯åŠ¨äº†æœ¬åœ°æœåŠ¡ï¼Œåˆ·æ–°é¡µé¢å¯ä»¥çœ‹åˆ°åšå®¢å†…å®¹çš„ä¿®æ”¹ã€‚åšæ–‡å®Œæˆåï¼Œé€šè¿‡hexo deployå³å¯éƒ¨ç½²åˆ°é…ç½®æ–‡ä»¶ä¸­çš„æŒ‡å®šç«™ç‚¹ï¼Œåœ¨éƒ¨ç½²åˆ°GitHubä¸Šæ—¶ï¼Œéœ€è¦å®‰è£…hexo-deployer-gitæ’ä»¶ã€‚ GitHub Pagesåœ¨GitHubä¸Šæ–°å»ºä¸€ä¸ªyourname.github.ioçš„ä»“åº“ï¼Œä»“åº“masteråˆ†æ”¯ä¸­çš„é™æ€æ–‡ä»¶å³å¯é€šè¿‡https://yourname.github.ioç›´æ¥è¿›è¡Œè®¿é—®ã€‚å¦‚æœå¸Œæœ›å…¶ä»–ä»“åº“ä¸­çš„å†…å®¹ä¹Ÿèƒ½é€šè¿‡GitHub Pagesè¿›è¡Œè®¿é—®ï¼Œé‚£ä¹ˆå°±åœ¨è¯¥ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªgh-pagesçš„åˆ†æ”¯ï¼Œè¯¥åˆ†æ”¯ä¸‹çš„å†…å®¹å¯ä»¥é€šè¿‡yourname.github.io/repoitoryNameè¿›è¡Œè®¿é—®ã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œæˆ‘å°†åšå®¢éƒ¨ç½²åˆ°äº†hezhii.github.ioä¸­çš„masteråˆ†æ”¯ä¸Šï¼Œåšå®¢çš„ä¸€äº›æºæ–‡ä»¶åˆ™æäº¤åˆ°äº†è¯¥ä»“åº“çš„hexoåˆ†æ”¯ä¸Šï¼Œåˆ©ç”¨Travis CIè‡ªåŠ¨å°†hexoåˆ†æ”¯ä¸­çš„æ›´æ–°éƒ¨ç½²åˆ°masteråˆ†æ”¯ä¸Šã€‚ Travis CITravis CIç»“åˆhexoå…·ä½“å¦‚ä½•ä½¿ç”¨ï¼Œç½‘ä¸Šä¹Ÿæœ‰ç›¸å½“å¤šçš„æ•™ç¨‹ï¼Œä¸»è¦æ¶‰åŠåˆ°Travis CIå‘½ä»¤è¡Œå·¥å…·çš„å®‰è£…å’Œä½¿ç”¨ã€è®¿é—®GitHubçš„ä¸€ä¸ªé…ç½®ä»¥åŠTravis CIçš„é…ç½®ã€‚å…¶ä¸­å‘½ä»¤è¡Œå·¥å…·çš„å®‰è£…å’Œä½¿ç”¨ååˆ†ç®€å•ï¼Œæ‰¾ä¸ªæ•™ç¨‹ç…§ç€åšå°±å¯ä»¥äº†ã€‚å…³äºGitHubè®¿é—®çš„ä¸€ä¸ªé…ç½®ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯SSHçš„æ–¹å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨GitHub Access Tokenï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸è¦å¿˜è®°hexoé…ç½®æ–‡ä»¶ä¸­GitHubçš„ä»“åº“åœ°å€ä¹Ÿåº”è¯¥ä½¿ç”¨SSHã€‚Travis CIä¸­çš„é…ç½®å¯ä»¥å‚è€ƒæˆ‘çš„é…ç½®ï¼Œå…¶ä¸­å¦‚æœæ²¡æœ‰è®¾ç½®æ—¶åŒºçš„è¯ï¼ŒGitHubä¸Šçš„æäº¤æ—¶é—´å°±ä¸æ˜¯åŒ—äº¬æ—¶é—´ã€‚ ä¸»é¢˜ä¸»é¢˜æˆ‘ä½¿ç”¨çš„æ˜¯ç›¸å½“ç«çš„NexTä¸»é¢˜ï¼Œä¸»é¢˜çš„å®‰è£…å’Œä½¿ç”¨åœ¨å®˜æ–¹æ–‡æ¡£ä¸Šä¹Ÿæœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œæˆ‘åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å‚è€ƒäº†è¿™ç¯‡åšæ–‡ä¸­çš„ä¸€äº›é…ç½®ã€‚]]></content>
      <categories>
        <category>èˆªæµ·æ—¥å¿—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>GitHub</tag>
        <tag>Travis CI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»æ­¤ï¼Œæ¯å¤©ä¸ä¸€æ ·]]></title>
    <url>%2F2017%2F08%2Fmy-first-blog%2F</url>
    <content type="text"><![CDATA[éŸ¶å…‰æ˜“é€äºŒåå¤šå¹´æ—¶å…‰è½¬çœ¼å³é€ï¼Œè¿‡å»çš„ä¸€åˆ‡å†å†åœ¨ç›®ï¼Œå“­è¿‡ã€ç¬‘è¿‡ã€ç–¯è¿‡ã€é—¹è¿‡â€¦â€¦è¿‡å»çš„ä¸€åˆ‡è¿˜æ˜¯è®©å®ƒè¿‡å»å§ï¼Œäººä¸èƒ½æ€»æ˜¯æ´»åœ¨è¿‡å»ã€‚ä½†æ˜¯ï¼Œå´æ˜¯åº”è¯¥å¸å–è¿‡å»çš„ç»éªŒï¼ŒåŠªåŠ›è®©è‡ªå·±å˜å¾—ä¸åŒã€‚ çæƒœç°åœ¨ç°åœ¨çš„ä¸€åˆ‡ä¹Ÿè®¸ä¸æ˜¯è‡ªå·±æƒ³è¦çš„ï¼Œä½†ä¸€å®šæ˜¯è‡ªæ‰¾çš„ã€‚ åº†å¹¸ç°åœ¨æ˜¯æ¥ä¸Šæµ·çš„ç¬¬å››ä¸ªæœˆï¼Œå¾ˆå¤šäº‹æƒ…å…¶å®è·Ÿæˆ‘å½“åˆåšå‡ºè¿™ä¸ªè®¡åˆ’æ—¶æœŸæœ›çš„ä¸å¤ªä¸€æ ·ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¹Ÿå¾ˆåº†å¹¸è‡ªå·±åšå‡ºäº†è¿™ä¸ªå†³å®šã€‚å¦åˆ™ï¼Œæˆ‘ç°åœ¨åº”è¯¥ä¸ä¼šå†™ä¸‹è¿™ç¯‡åšå®¢äº†ï¼Œå„æœ‰å„çš„å¥½ç½¢äº†ã€‚è¿™æ®µæ—¶é—´çš„ä¸€äº›ç»å†ï¼Œè®©è‡ªå·±ä½œå‡ºäº†è®¸å¤šçš„æ”¹å˜ï¼Œæˆ‘æƒ³è¿™ä¼šæ˜¯å½±å“æˆ‘æ¥ä¸‹æ¥çš„äººç”Ÿçš„ä¸€æ®µç»å†ã€‚ ä¸ºä»€ä¹ˆè¦å†™åšå®¢æœ‰æ—¶å€™ä¼šæƒ³ï¼Œæ¯•ä¸šä¸€å¹´äº†æ‰æƒ³åˆ°è¦å¼„ä¸€ä¸ªè‡ªå·±çš„åšå®¢ä¼šä¸ä¼šå¤ªæ™šã€‚ä½†æ˜¯ï¼Œåšä¸€ä»¶è‡ªå·±æƒ³åšçš„æ˜¯äº‹æƒ…ï¼Œåº”è¯¥ä»»ä½•æ—¶å€™éƒ½ä¸ä¼šæ™šå§ã€‚å…¶å®ä»¥å‰ä¹Ÿä¼šå†™ä¸€äº›ä¸œè¥¿ã€æ€»ç»“ä¸€äº›ä¸œè¥¿ï¼Œå‘å‘è¯´è¯´æˆ–è€…æœ‹å‹åœˆï¼Œä½†æ˜¯ç°åœ¨æ¸æ¸çš„å°‘äº†ï¼Œå¾ˆå°‘åˆ†äº«è‡ªå·±çš„ç”Ÿæ´»ï¼Œæ€»æ˜¯åœ¨è‡ªå·±ç©ç€ã€‚çªç„¶è§‰å¾—ï¼Œè¿˜æ˜¯åº”è¯¥è¦åœ¨è¿™ä¸ªä¸–ä¸Šç•™ä¸‹ç‚¹ä»€ä¹ˆï¼Œè¯æ˜è‡ªå·±æ¥è¿‡ã€‚æ‰€ä»¥ï¼Œå°±å¼„ä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œåˆ†äº«ä¸€äº›è‡ªå·±æ€»ç»“çš„ä¸œè¥¿ï¼Œå¦‚æœèƒ½ç»™ä»»ä½•ä¸€ä¸ªäººå¸¦æ¥ä»»ä½•çš„å¸®åŠ©ï¼Œé‚£åšçš„è¿™ä¸€åˆ‡ä¹Ÿå°±æ˜¯å€¼å¾—äº†çš„ã€‚ åšå®¢å†…å®¹è™½ç„¶è‡ªå·±æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œä½†å¹¶ä¸æ‰“ç®—å¼„ä¸€ä¸ªçº¯æŠ€æœ¯åšå®¢ï¼Œé™¤äº†ä¸€äº›å­¦ä¹ ã€å·¥ä½œä¸Šçš„å†…å®¹ï¼Œä¹Ÿæ‰“ç®—å¤šçš„åˆ†äº«ç”Ÿæ´»ã€‚ä¹Ÿè®¸æˆ‘æŸäº›å¤±è´¥çš„ç»å†å¯ä»¥æˆä¸ºå¤§å®¶çš„å‰è½¦ä¹‹é‰´ï¼Œä½¿å¤§å®¶èƒ½å°‘è¸©ç‚¹å‘ã€‚ æ¥ä¸‹æ¥åšä»€ä¹ˆæ³¨æ„èº«ä½“ çƒŸæ˜¯ä¸€å®šè¦æˆ’çš„ï¼Œå¬è¯´ä»»ä½•æ—¶å€™æˆ’éƒ½æ¥å¾—åŠå‘¢ã€‚æˆ’çƒŸæœ‰ä»€ä¹ˆéš¾ï¼Œå·²ç»æˆ’äº†åŠå¹´äº†ã€‚ åšæŒé”»ç‚¼ã€‚ä¸‹äº†ä¸ªkeepï¼Œæ¯å¤©å°±å¾—è¦åšæŒæ‰“å¡ï¼Œç¾½æ¯›çƒçˆ±å¥½ä¹Ÿä¸èƒ½ä¸¢ã€‚ å°‘ç†¬å¤œã€‚ä¸Šå¹´çºªäº†ï¼Œèº«ä½“ä¹Ÿä¸è¡Œäº†ï¼Œæ¸¸æˆä»€ä¹ˆçš„ä¹Ÿç©ä¸åŠ¨äº†ã€‚ å­¦æ— æ­¢å¢ƒ äººä¸‘å¤šè¯»ä¹¦ã€‚è¯»ä¹¦çš„ä¹ æƒ¯è¦åšæŒä¸‹å»ï¼Œè¯»åˆ«äººçš„äººç”Ÿï¼Œæ‚Ÿè‡ªå·±çš„é“ã€‚ ä»£ç è¿˜æ˜¯è¦ç»§ç»­æ’¸çš„ï¼Œåˆ«å¿˜äº†è‡ªå·±æ˜¯å¹²ä»€ä¹ˆçš„ã€‚ åšå®¢ä¹Ÿè¦åšæŒæ›´æ–°å‘¢ï¼Œè¡·äºåŸåˆ›ã€‚ è¦æ”¹æ”¹äº† æ€§æ ¼æ€•è¿˜æ˜¯æœ‰ç‚¹ç¼ºé™· æœ‰è¯å¥½å¥½è¯´ æ€»ç»“åˆ«è¯´è¿™ç§ä¸§æ°”è¯ï¼Œè¿˜æœ‰æœºä¼šçš„ã€‚]]></content>
      <categories>
        <category>å¿ƒçµé¸¡æ±¤</category>
      </categories>
  </entry>
</search>
